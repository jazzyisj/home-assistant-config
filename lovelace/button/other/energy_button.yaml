###############################################################################
## Power Use Button
###############################################################################
type: custom:button-card
entity: sensor.current_power_use
template: menu_button
name: 'POWER'
show_name: true
show_icon: false
show_state: true
show_label: true
state_display: >
  [[[
      return states['sensor.current_power_use_kw'].state + ' kW';
  ]]]
label: >
  [[[
      return states['utility_meter.daily_energy_use'].state.toUpperCase();
  ]]]
styles:
  name:
    - font-size: 0.9em
    - font-weight: bold
  state:
    - font-size: 1.2em
    - font-weight: bold
    - color: >
        [[[
          var power = states['sensor.current_power_use_kw'].state;
          if (power < 300)
            return 'var(--entity-ok-color)';
          else if (power < 400)
            return 'var(--entity-warning-color)';
          else
            return 'var(--entity-severe-color)';
        ]]]
  label:
    - font-size: 0.7em
    - font-weight: bold
    - color: >
        [[[
          var tariff = states['utility_meter.daily_energy_use'].state;
          if (tariff == 'peak')
            return 'var(--entity-critical-color)';
          else if (tariff == 'midpeak')
            return 'var(--entity-warning-color)';
          else
            return 'var(--state-icon-color)';
        ]]]
double_tap_action:
  action: navigate
  navigation_path: /energy
