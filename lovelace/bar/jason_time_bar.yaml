###############################################################################
## Jason Time To Home Bar Card
#IDEA bars to presence card (separate bar card)
###############################################################################
type: custom:state-switch
entity: template
transition: slide-right
transition_time: 400
template: >
  {% if is_state('binary_sensor.home_commute_active','on') %} home_commute
  {% elif is_state('binary_sensor.work_commute_active','on') %} work_commute
  {% else %} false
  {% endif %}
states:
  home_commute:
    type: custom:bar-card
    entity: sensor.jason_time_to_home
    animation:
      - state: 'on'
      - speed: 5
    decimal: 0
    direction: right
    height: 10px
    name: 'Home'
    positions:
      icon: 'off'
      indicator: 'off'
      name: 'off'
      minmax: 'off'
      value: 'off'
    target: 10
    unit_of_measurement: 'min'
    width: 90%
    severity:
      - from: 0
        to: 2
        color: rgb(0, 204, 15)
      - from: 3
        to: 4
        color: rgb(25, 208, 0)
      - from: 5
        to: 6
        color: rgb(68, 212, 0)
      - from: 7
        to: 8
        color: rgb(112, 216, 0)
      - from: 9
        to: 10
        color: rgb(158, 219, 0)
      - from: 11
        to: 12
        color: rgb(205, 224, 0)
      - from: 13
        to: 14
        color: rgb(238, 215, 0)
      - from: 15
        to: 16
        color: rgb(231, 159, 0)
      - from: 17
        to: 18
        color: rgb(236, 115, 0)
      - from: 19
        to: 20
        color: rgb(239, 69, 0)
      - from: 21
        to: 22
        color: rgb(239, 69, 0)
    tap_action: #NOTE double, hold don't work, fire-dom-event doesn't work
      action: call-service
      service: script.update_traffic_sensors
    card_mod: #overflow; visible;
      style: |
        ha-card { background-color: transparent; box-shadow: none;  padding: 0px; margin: 0px; }
        bar-card-currentbar, bar-card-backgroundbar { padding: 0px; margin: 0px; }
        bar-card-card { padding-left: 5px; padding-right: 5px; padding-top: 0px; padding-bottom: 0px; margin: 0px; }
        .card-content { text-align: start; padding: 0px; margin: 0px; }
  work_commute:
    type: custom:bar-card
    entity: sensor.jason_time_to_work
    animation:
      - state: 'on'
      - speed: 5
    decimal: 0
    direction: right
    height: 15px
    name: 'Home'
    positions:
      icon: 'off'
      indicator: 'off'
      name: 'off'
      minmax: 'off'
      value: 'off'
    target: 10
    unit_of_measurement: 'min'
    width: 90%
    severity:
      - from: 0
        to: 2
        color: rgb(0, 204, 15)
      - from: 3
        to: 4
        color: rgb(25, 208, 0)
      - from: 5
        to: 6
        color: rgb(68, 212, 0)
      - from: 7
        to: 8
        color: rgb(112, 216, 0)
      - from: 9
        to: 10
        color: rgb(158, 219, 0)
      - from: 11
        to: 12
        color: rgb(205, 224, 0)
      - from: 13
        to: 14
        color: rgb(238, 215, 0)
      - from: 15
        to: 16
        color: rgb(231, 159, 0)
      - from: 17
        to: 18
        color: rgb(236, 115, 0)
      - from: 19
        to: 20
        color: rgb(239, 69, 0)
      - from: 21
        to: 22
        color: rgb(239, 69, 0)
    tap_action:
      action: call-service
      service: script.update_traffic_sensors
    card_mod:
      style: |
        ha-card { background-color: transparent; box-shadow: none;  padding: 0px; margin: 0px; }
        bar-card-currentbar, bar-card-backgroundbar { padding: 0px; margin: 0px; }
        bar-card-card { padding-left: 5px; padding-right: 5px; padding-top: 0px; padding-bottom: 0px; margin: 0px; }
        .card-content { text-align: start; padding: 0px; margin: 0px; }

#overflow; visible; #STYLE
# bar-card-card  The root bar of each defined entity containing all elements.
# bar-card-background  Contains bar and any elements outside of the bar.
# bar-card-backgroundbar  The background of the bar.
# bar-card-currentbar  The filled part of the bar.
# bar-card-contentbar  Contains all elements inside of the bar.
# ha-icon  Icon element.
# bar-card-iconbar  Contains ha-icon.
# bar-card-name  Name element.
# bar-card-min  Min value element.
# bar-card-divider  Min/Max divider element.
# bar-card-max  Max value element.
# bar-card-value  Value element.
# bar-card-animationbar  Animated part of the bar.
# bar-card-targetbar  Target bar element.
# bar-card-markerbar  Target marker element.
# bar-card-indicator
