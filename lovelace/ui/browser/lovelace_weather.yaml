title: Weather
icon: mdi:weather-partly-snowy-rainy
path: weather
panel: true
cards:
  - type: custom:layout-card
    layout: vertical
    cards:
      - !include /config/lovelace/include/menu/weather_menu.yaml
      - !include /config/lovelace/include/card/global_alerts.yaml
      - !include /config/lovelace/include/card/weather_card.yaml

      - break
      - type: horizontal-stack
        cards:
          - !include /config/lovelace/include/graph/outdoor_temperature_graph.yaml
          - !include /config/lovelace/include/graph/outdoor_humidity_graph.yaml

      - type: horizontal-stack
        cards:

          - !include /config/lovelace/include/graph/wind_speed_graph.yaml
          - !include /config/lovelace/include/graph/pressure_graph.yaml

      - type: horizontal-stack
        cards:
          - !include /config/lovelace/include/graph/cloud_coverage_graph.yaml
          - !include /config/lovelace/include/graph/precipitation_intensity_graph.yaml

      - !include /config/lovelace/include/history/precipitation_history.yaml

      - break
      - type: custom:swipe-card
        card_width: '98%'
        start_card: 1
        reset_after: 120
        parameters:
          followFinger: true
          threshold: 10
          autoHeight: true
          roundLengths: true
          speed: 300
          effect: coverflow
          grabCursor: true
          centeredSlides: true
          slidesPerView: auto
          spaceBetween: 8
          coverflowEffect:
            rotate: 50
            stretch: 0
            depth: 100
            modifier: 1
            slideShadows : true
          pagination:
            type: bullets
        cards:
          - type: horizontal-stack
            cards:
              - !include /config/lovelace/include/graph/air_quality_graph.yaml
              - !include /config/lovelace/include/graph/uv_index_graph.yaml
          - !include /config/lovelace/include/entities/uv_allergy_asthma.yaml

      - !include /config/lovelace/include/entities/weather_conditions_uv.yaml
      - !include /config/lovelace/include/history/weather_history.yaml

      - break
      - type: custom:state-switch
        template: >
          {{ 'alert' if (is_state('binary_sensor.noaa_alert_active','on')
              or is_state('binary_sensor.dark_sky_alert_active','on'))
                and is_state('input_boolean.display_weather_alerts','on') else 'clear' }}
        default: clear
        states:
          clear:
            type: vertical-stack
            cards:
              - type: iframe
                aspect_ratio: 100%
                url: https://embed.windy.com/embed2.html?lat=42.121&lon=-82.856&detailLat=42.303&detailLon=-83.034&width=650&height=450&zoom=8&level=surface&overlay=radar&product=radar&menu=&message=true&marker=&calendar=12&pressure=&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default&radarRange=-1

              - type: custom:swipe-card
                card_width: '98%'
                start_card: 1
                reset_after: 120
                parameters:
                  followFinger: true
                  threshold: 10
                  autoHeight: true
                  roundLengths: true
                  speed: 300
                  effect: coverflow
                  grabCursor: true
                  centeredSlides: true
                  slidesPerView: auto
                  spaceBetween: 8
                  coverflowEffect:
                    rotate: 50
                    stretch: 0
                    depth: 100
                    modifier: 1
                    slideShadows : true
                  pagination:
                    type: bullets
                cards:
                  - type: picture-entity
                    name: Windsor Radar
                    entity: camera.envcan_radar

              - !include /config/lovelace/include/settings/weather_settings.yaml

          alert:
            type: custom:swipe-card
            card_width: '98%'
            start_card: 1
            reset_after: 120
            parameters:
              followFinger: true
              threshold: 10
              autoHeight: true
              roundLengths: true
              speed: 300
              effect: coverflow
              grabCursor: true
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 8
              coverflowEffect:
                rotate: 50
                stretch: 0
                depth: 100
                modifier: 1
                slideShadows : true
              pagination:
                type: bullets
            cards:
              - type: vertical-stack
                cards:
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dark_sky_alert_active
                        state: 'on'
                    card:
                      !include /config/lovelace/include/markdown/dark_sky_alert_markdown.yaml

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.noaa_alert_active
                        state: 'on'
                    card:
                      !include /config/lovelace/include/markdown/noaa_alert_markdown.yaml

                  - !include /config/lovelace/include/settings/weather_settings.yaml

              - type: vertical-stack
                cards:
                  - type: iframe
                    aspect_ratio: 100%
                    url: https://embed.windy.com/embed2.html?lat=42.121&lon=-82.856&detailLat=42.303&detailLon=-83.034&width=650&height=450&zoom=8&level=surface&overlay=radar&product=radar&menu=&message=true&marker=&calendar=12&pressure=&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default&radarRange=-1
                  - type: custom:swipe-card
                    card_width: '98%'
                    start_card: 1
                    reset_after: 120
                    parameters:
                      followFinger: true
                      threshold: 10
                      autoHeight: true
                      roundLengths: true
                      speed: 300
                      effect: coverflow
                      grabCursor: true
                      centeredSlides: true
                      slidesPerView: auto
                      spaceBetween: 8
                      coverflowEffect:
                        rotate: 50
                        stretch: 0
                        depth: 100
                        modifier: 1
                        slideShadows : true
                      pagination:
                        type: bullets
                    cards:
                      - type: picture-entity
                        name: Windsor Radar
                        entity: camera.envcan_radar

                  - !include /config/lovelace/include/settings/weather_settings.yaml
