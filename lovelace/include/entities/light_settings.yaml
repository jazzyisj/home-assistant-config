type: entities
show_header_toggle: false
entities:
  - entity: binary_sensor.lutron_connected
    name: Lutron Bridge Connected

  - type: custom:fold-entity-row
    head: binary_sensor.auto_light_on
    padding: 10
    entities:
      - entity: input_boolean.auto_light_on
      - entity: input_boolean.auto_light_enabled

      - type: conditional
        conditions:
          - entity: input_boolean.auto_light_enabled
            state: 'on'
        row:
          entity: sensor.sun_elevation

      - type: conditional
        conditions:
          - entity: input_boolean.auto_light_enabled
            state: 'on'
        row:
          entity: input_number.lighting_on_sun_elevation
          name: Lights on

      - type: conditional
        conditions:
          - entity: input_boolean.auto_light_enabled
            state: 'on'
        row:
          entity: input_number.lighting_off_sun_elevation
          name: Lights off

  - type: custom:fold-entity-row
    head: binary_sensor.illuminance_light_on
    padding: 10
    entities:
      - entity: sensor.illuminance
      - entity: input_boolean.illuminance_light_enabled

      - type: conditional
        conditions:
          - entity: input_boolean.illuminance_light_enabled
            state: 'on'
        row:
          entity: input_number.illuminance_threshold

  - entity: switch.light_flux

  - type: custom:auto-entities
    filter:
      include:
        - group: group.light_in_use_timers
    sort:
      method: name
      ignore_case: true
    card:
      type: custom:fold-entity-row
      head: binary_sensor.light_in_use
      padding: 10
      group_config:
        secondary_info: last-changed

  - type: custom:auto-entities
    card:
      type: custom:fold-entity-row
      head: input_boolean.light_automation
      padding: 5
    filter:
      include:
        - entity_id: "automation.light_*"
    sort:
      method: name
      ignore_case: true

  - type: button
    icon: mdi:light
    name: Turn All Lights Off
    action_name: RUN
    tap_action:
      action: call-service
      service: script.lights_off

  - type: button
    icon: mdi:light
    name: Turn All Lights On
    action_name: RUN
    tap_action:
      action: call-service
      service: script.lights_on

  - type: custom:auto-entities
    card:
      type: custom:fold-entity-row
      head: binary_sensor.lights_on
      padding: 5
    filter:
      include:
        - group: group.lights
      exclude:
        - state: 'off'
    entities:
