type: entities
show_header_toggle: false
#STYLE border radius
style: |
  ha-card {
    border: 5px;
    border-radius: 0px; !important
  }
entities:
  - entity: sensor.alarm_clock_auto #NOTE don't use entity include - recursive popup
    name: Next Auto Alarm
    tap_action:
      action: call-service
      service: browser_mod.popup
      service_data:
        deviceID: this
        title: Alarm Time
        card: !include /config/lovelace/include/card/waketime_picker.yaml
    double_tap_action:
      action: none
    hold_action:
      action: none
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% else %} var(--state-icon-active-color)
          {% endif %}
          ;
      }

  - type: divider

  - entity: input_select.alarm_clock_sound_auto
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% else %} var(--state-icon-active-color)
          {% endif %}
          ;
      }

  - type: conditional
    conditions:
      - entity: input_select.alarm_clock_sound_auto
        state: Radio
    row:
      entity: input_select.alarm_clock_radio_auto
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% else %} var(--state-icon-active-color)
          {% endif %}
          ;
      }

  - type: conditional
    conditions:
      - entity: input_select.alarm_clock_sound_auto
        state: Spotify
    row:
      entity: input_select.alarm_clock_spotify_auto
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% else %} var(--state-icon-active-color)
          {% endif %}
          ;
      }

  - entity: input_select.alarm_clock_media_player_auto
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% else %} var(--state-icon-active-color)
          {% endif %}
          ;
      }

  - entity: input_number.alarm_clock_volume_auto
    icon: mdi:volume-high
    style: |
      :host {
        --paper-item-icon-color:
          {% if is_state('sensor.alarm_clock_auto','Off') %} var(--state-icon-color)
          {% elif states('input_number.alarm_clock_volume_auto')|int > 0 %} var(--state-icon-active-color)
          {% else %} var(--entity-warning-color)
          {% endif %}
          ;
      }

  - type: divider

  - type: custom:paper-buttons-row
    buttons:
      - entity: input_boolean.alarm_clock_auto_workdays
        state_icons:
          'on': mdi:alarm-check
          'off': mdi:alarm-off
        state_text:
          'on': Workdays
          'off': Workdays
        state_styles:
          'on':
            button:
              color: var(--state-icon-active-color)
          'off':
            button:
              color: var(--state-icon-color)
        style:
          button:
            background-color: var(--table-row-alternative-background-color)
            border-radius: 40px
            padding: 10px
            font-size: 1.2rem
        tap_action:
          action: toggle
        double_tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            deviceID: this
            title: Workdays Waketime
            card: !include /config/lovelace/include/card/waketime_picker.yaml
        hold_action:
          action: toggle

      - entity: input_boolean.alarm_clock_auto_weekends
        state_icons:
          'on': mdi:alarm-check
          'off': mdi:alarm-off
        state_text:
          'on': Weekends
          'off': Weekends
        state_styles:
          'on':
            button:
              color: var(--state-icon-active-color)
          'off':
            button:
              color: var(--state-icon-color)
        style:
          button:
            background-color: var(--table-row-alternative-background-color)
            border-radius: 40px
            padding: 10px
            font-size: 1.2rem
        tap_action:
          action: toggle
        double_tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            deviceID: this
            title: Weekend Waketime
            card:
              type: custom:time-picker-card
              entity: input_datetime.weekend_waketime
              layout:
                name: inside
                align_controls: right
        hold_action:
          action: toggle

      - entity: input_boolean.alarm_clock_guest
        state_icons:
          'on': mdi:alarm-check
          'off': mdi:alarm-off
        state_text:
          'on': Guest
          'off': Guest
        state_styles:
          'on':
            button:
              color: var(--state-icon-active-color)
          'off':
            button:
              color: var(--state-icon-color)
        style:
          button:
            background-color: var(--table-row-alternative-background-color)
            border-radius: 40px
            padding: 10px
            font-size: 1.2rem
        tap_action:
          action: toggle
        double_tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            deviceID: this
            title: Guest Waketime
            card:
              type: custom:time-picker-card
              entity: input_datetime.guest_waketime
              layout:
                name: inside
                align_controls: right
        hold_action:
          action: toggle

  - type: custom:paper-buttons-row
    buttons:
      - entity: input_boolean.alarm_clock_active_auto
        state_icons:
          'on': mdi:alarm-note
          'off': mdi:alarm-note
        state_text:
          'on': Stop Alarm
          'off': Test Alarm
        state_styles:
          'on':
            button:
              color: var(--state-icon-active-color)
          'off':
            button:
              color: var(--state-icon-color)
        style:
          button:
            background-color: var(--table-row-alternative-background-color)
            border-radius: 40px
            padding: 10px
            font-size: 1.2rem
        tap_action:
          action: call-service
          service: script.alarm_clock_stop
        double_tap_action:
          action: call-service
          service: script.alarm_clock_stop
        hold_action:
          action: call-service
          service: script.alarm_clock_play
          service_data:
            alarm_type: auto
            first_run: true
            test_play: true
