type: entities
title: Server Monitor
icon: mdi:server
show_header_toggle: false
state_color: true
style: |
  .card-header {
    font-size: 22px;
    font-variant: small-caps;
  }
entities:
  - type: custom:template-entity-row
    entity: sensor.rpi_uptime
    secondary: "{{ states('sensor.last_boot_date_time') }}"
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
      }

  - entity: binary_sensor.rpi_power_status
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
        --paper-item-icon-active-color: var(--entity-critical-color);
          ;
      }

  - entity: sensor.local_ip
    name: IPV4
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
      }

  - entity: sensor.ipv6_address_eth0
    name: IPV6
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
      }

  - type: custom:fold-entity-row
    head:
      entity: sensor.disk_use_percent_home
    #OPEN open: false
    padding: 5 #STYLE
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
      }
    entities:
      - type: custom:fold-entity-row
        head:
          entity: sensor.alarm_snapshots
          name: Alarm Snapshot Folder
          style: |
            :host {
              --paper-item-icon-color:
                {% if states('sensor.alarm_snapshots')|int > 100 %} var(--entity-warning-color)
                {% else %} var(--state-icon-active-color)
                {% endif %}
                ;
            }
        padding: 5
        entities:
          - type: call-service
            service: shell_command.alarm_snapshots_purge_all
            icon: mdi:database-sync
            name: Purge Motion Capture
            action_name: PURGE

      - type: custom:fold-entity-row
        head:
          entity: sensor.tts
          name: TTS Cache Folder
          style: |
            :host {
              --paper-item-icon-color:
                {% if states('sensor.tts')|int > 100 %} var(--entity-warning-color)
                {% else %} var(--state-icon-active-color)
                {% endif %}
                ;
            }
        padding: 5
        entities:
          - type: call-service
            service: shell_command.tts_purge_all
            icon: mdi:database-sync
            name: Purge TTS Cache
            action_name: PURGE

  - type: custom:fold-entity-row
    head:
      #OPTION mariadb entity: sensor.hassio_db
      entity: sensor.home_assistant_v2_db
      name: Hassio Database
      style: |
        :host {
          --paper-item-icon-color:
            {% if states('sensor.hassio_db')|int > 1000 %} var(--entity-critical-color)
            {% elif states('sensor.hassio_db')|int > 500 %} var(--entity-warning-color)
            {% else %} var(--state-icon-active-color)
            {% endif %}
            ;
        }
    padding: 5
    style: |
      :host {
        --paper-item-icon-color: var(--state-icon-active-color);
      }
    entities:
      - type: call-service
        service: script.purge_database
        name: Purge Hassio Database
        icon: mdi:database-sync
        action_name: PURGE