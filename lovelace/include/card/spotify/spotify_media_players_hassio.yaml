###################################################################################################
## Spotify Media Players Conditional #NEW_MEDIA_PLAYER
###################################################################################################
type: custom:swipe-card
card_width: '98%'
start_card: 2
reset_after: 60
parameters: !include /config/lovelace/lovelace_swipe_parameters.yaml
cards:
  - type: custom:state-switch
    entity: template
    template: "{{ 'group' if expand(state_attr('sensor.spotify_media_player','players'))|count > 1 else 'default' }}"
    default: default
    states:
      default:
        type: vertical-stack
        cards:
          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_speaker') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.dining_room_display') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_dining_room_display.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bedroom_display') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bedroom_display.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bathroom_speaker') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bathroom_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.laundry_room_speaker') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_laundry_room_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.garage_speaker') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_garage_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_tv') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_tv.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bedroom_tv') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bedroom_tv.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.office_tv') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_office_tv.yaml

          #CHROMECAST
          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_chromecast') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_chromecast.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.office_chromecast') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_office_chromecast.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.deck_chromecast') == 'spotify_hassio' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_deck_chromecast.yaml
      group:
        type: vertical-stack
        cards:
          # group speakers

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.all_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_all_speakers.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.broadcast_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_broadcast_speakers.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.music_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_music_speakers.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.quiet_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_quiet_speakers.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.night_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_night_speakers.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.inside_speakers') == 'spotify_hassio' else 'off' }}"
            states:
              'on': !include /config/lovelace/include/media_player/media_player_inside_speakers.yaml

          # single speakers

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_speaker') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.dining_room_display') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_dining_room_display.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bedroom_display') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bedroom_display.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bathroom_speaker') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bathroom_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.laundry_room_speaker') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_laundry_room_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.garage_speaker') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_garage_speaker.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_tv') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_tv.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.bedroom_tv') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_bedroom_tv.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.office_tv') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_office_tv.yaml

          #CHROMECAST
          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.living_room_chromecast') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_living_room_chromecast.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.office_chromecast') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_office_chromecast.yaml

          - type: custom:state-switch
            entity: template
            template: "{{ 'on' if states('sensor.deck_chromecast') == 'spotify_hassio_group' else 'off' }}"
            states:
              'on':
                !include /config/lovelace/include/media_player/media_player_deck_chromecast.yaml

  - !include /config/lovelace/include/media_player/media_player_spotify_hassio.yaml
  - !include /config/lovelace/include/card/spotify/spotcast_card.yaml
