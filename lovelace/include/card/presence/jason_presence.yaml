type: vertical-stack #BUGFIX
cards:
  - type: custom:stack-in-card #STACK #BUG entities card won't display if not nested in a vertical stack
    cards:
      - type: custom:swipe-card
        card_width: '98%'
        start_card: 1
        reset_after: 120
        parameters: !include /config/lovelace/lovelace_swipe_parameters.yaml
        cards:
          - type: vertical-stack
            cards:
              - type: entities
                state_color: true
                entities:
                  - entity: person.jason

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.jason_home
                        state: 'on'
                    row:
                      entity: proximity.jphone_home
                      name: Distance From Home
                      secondary_info: last-updated
                      card_mod:
                        style: |
                          :host {
                            --paper-item-icon-color:
                              {% if is_state('proximity.jphone_home','not_set') %} var(--entity-warning-color)
                              {% else %} var(--state-icon-active-color)
                              {% endif %}
                              ;
                          }

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.jason_home
                        state: 'on'
                    row:
                      type: custom:template-entity-row
                      name: Current Address
                      icon: mdi:map-marker-radius
                      secondary: "{{ states('sensor.jphone_geocoded_location') }}"
                      card_mod:
                        style: |
                          :host {
                            --paper-item-icon-color:
                              {% if states('sensor.jphone_geocoded_location')|lower in ['unknown','unavailable','none'] %} var(--entity-warning-color)
                              {% else %} var(--state-icon-active-color)
                              {% endif %}
                              ;
                          }

                  - entity: binary_sensor.jason_home
                    card_mod:
                      style: |
                        :host {
                          --paper-item-icon-color:
                            {% if is_state('input_boolean.home_override_jason','on') %} var(--entity-warning-color)
                            {% else %} var(--state-icon-color)
                            {% endif %}
                          ;
                          --paper-item-icon-active-color:
                            {% if is_state('input_boolean.home_override_jason','on') %} var(--entity-warning-color)
                            {% else %} var(--state-icon-active-color)
                            {% endif %}
                          ;
                        }

                  - entity: input_boolean.jason_home
                    card_mod:
                      style: |
                        :host {
                          --paper-item-icon-color:
                            {% if is_state('input_boolean.home_override_jason','on') %} var(--entity-warning-color)
                            {% else %} var(--state-icon-color)
                            {% endif %}
                          ;
                          --paper-item-icon-active-color:
                            {% if is_state('input_boolean.home_override_jason','on') %} var(--entity-warning-color)
                            {% else %} var(--state-icon-active-color)
                            {% endif %}
                          ;
                        }

                  - entity: input_boolean.home_override_jason
                    card_mod:
                      style: |
                        :host {
                          --paper-item-icon-color: var(--state-icon-color);
                          --paper-item-icon-active-color: var(--entity-warning-color);
                        }
                card_mod:
                  class: sub_card

          - type: picture-entity
            entity: camera.jason_location
            camera_image: camera.jason_location
            show_name: false
            show_state: false
    card_mod:
      class: popup