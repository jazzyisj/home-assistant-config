type: custom:state-switch
entity: binary_sensor.alarm_clock
default: 'off'
states:
  'off':
    type: vertical-stack
    cards:
      - type: horizontal-stack
        cards:
          - !include /config/lovelace/include/button/alarm_clock/alarm_clock_auto_button.yaml
          - !include /config/lovelace/include/button/alarm_clock/alarm_clock_manual_button.yaml
          - !include /config/lovelace/include/button/alarm_clock/alarm_clock_nap_button.yaml
          - !include /config/lovelace/include/button/alarm_clock/alarm_clock_other_button.yaml

      - type: custom:state-switch
        entity: template
        template: >
          {% if is_state('input_boolean.alarm_clock_launcher_auto','on') %} auto
          {% elif is_state('input_boolean.alarm_clock_launcher_manual','on') %} manual
          {% elif is_state('input_boolean.alarm_clock_launcher_nap','on') %} nap
          {% elif is_state('input_boolean.alarm_clock_launcher_other','on') %} other
          {% else %} default
          {% endif %}
        default: auto
        states:
          auto: !include /config/lovelace/include/card/alarm_clock/alarm_clock_auto.yaml
          manual: !include /config/lovelace/include/card/alarm_clock/alarm_clock_manual.yaml
          nap: !include /config/lovelace/include/card/alarm_clock/alarm_clock_nap.yaml
          other:
            type: vertical-stack
            cards:
              - type: entities
                entities:
                  - input_select.alarm_clock_selection

              - type: custom:state-switch
                entity: input_select.alarm_clock_selection
                default: 'Jason Phone'
                states:
                  'Jason Phone': !include /config/lovelace/include/card/alarm_clock/alarm_clock_jason_phone.yaml
                  'Sheri Phone': !include /config/lovelace/include/card/alarm_clock/alarm_clock_sheri_phone.yaml
                  'Dining Room Display': !include /config/lovelace/include/card/alarm_clock/alarm_clock_dining_room_display.yaml
                  'Bedroom Display': !include /config/lovelace/include/card/alarm_clock/alarm_clock_bedroom_display.yaml
                  'Bathroom Speaker': !include /config/lovelace/include/card/alarm_clock/alarm_clock_bathroom_speaker.yaml
                  'Living Room Speaker': !include /config/lovelace/include/card/alarm_clock/alarm_clock_living_room_speaker.yaml
                  'Laundry Room Speaker': !include /config/lovelace/include/card/alarm_clock/alarm_clock_laundry_room_speaker.yaml
                  'Garage Speaker': !include /config/lovelace/include/card/alarm_clock/alarm_clock_garage_speaker.yaml

  'on':
    type: custom:stack-in-card
    cards:
      - !include /config/lovelace/include/card/alarm_clock/alarm_clock_media_players.yaml

      - type: conditional
        conditions:
          - entity: timer.alarm_clock_nap
            state: active
        card:
          type: entities
          show_empty: false
          entities:
            - type: custom:timer-bar-card
              entity: timer.alarm_clock_nap

      - type: conditional
        conditions:
          - entity: timer.alarm_clock_snooze
            state: active
        card:
          type: entities
          show_empty: false
          entities:
            - type: custom:timer-bar-card
              entity: timer.alarm_clock_snooze
