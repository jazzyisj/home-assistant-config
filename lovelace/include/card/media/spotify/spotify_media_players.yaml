###################################################################################################
## Spotify Media Players
###################################################################################################
type: custom:state-switch
entity: template
template: >
  {% if is_state('binary_sensor.spotify','on')
      and states('sensor.spotify_media_player') in state_attr('sensor.media_players','group') %} group
  {% else %}{{ 'on' if states('media_player.spotify') in ['playing','paused'] else 'off' }}
  {% endif %}
states:
  'off': !include /config/lovelace/include/media_player/spotify_media_player.yaml
  'on':
    #SWIPE state-switch/swipe bug type: custom:swipe-card
    # card_width: '98%'
    # start_card: 1
    # reset_after: 120
    # parameters: !include /config/lovelace/lovelace_swipe_parameters.yaml
    type: vertical-stack
    cards:
      - !include /config/lovelace/include/media_player/spotify_media_player.yaml
      - !include /config/lovelace/include/card/media/spotify/spotify_media_player_single.yaml
  'group':
    #SWIPE type: custom:swipe-card
    # card_width: '98%'
    # start_card: 1
    # reset_after: 120
    # parameters: !include /config/lovelace/lovelace_swipe_parameters.yaml
    type: vertical-stack
    cards:
      - !include /config/lovelace/include/media_player/spotify_media_player.yaml
      - !include /config/lovelace/include/card/media/spotify/spotify_media_player_single.yaml
      - !include /config/lovelace/include/card/media/spotify/spotify_media_player_group.yaml
