#######################################################################################################################
## Thermostat Card
#######################################################################################################################
type: custom:stack-in-card
cards:
  - type: thermostat
    entity: climate.upstairs_thermostat
    card_mod:
      class: sub_card
      style: |
        ha-card {
          background:
            {% if is_state('sensor.upstairs_thermostat_hvac_state','heat') %} var(--entity-heating-color);
            {% elif is_state('sensor.upstairs_thermostat_hvac_state','cool') %} var(--entity-cooling-color);
            {% endif %}
          ;
        }

  - type: glance
    show_state: false
    show_name: false
    state_color: true
    columns: 6
    entities:
      - entity: automation.climate_occupancy_mode_control
        card_mod:
          style: |
            :host {
              --paper-item-icon-color: var(--entity-warning-color);
            }
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            deviceID: this
            title: Climate Settings
            card: !include /config/lovelace/include/card/climate/climate_settings.yaml
        hold_action:
          action: toggle

      - entity: binary_sensor.upstairs_thermostat_leaf
        card_mod:
          style: |
            :host {
              --paper-item-icon-active-color: green;
            }

      - entity: binary_sensor.home_away
      - entity: binary_sensor.upstairs_thermostat_locked

      - entity: fan.hvac_fan
        hold_action:
          action: call-service
          service: fan.toggle
          service_data:
            entity_id: fan.hvac_fan

      - !include /config/lovelace/include/entity/fan/fan_schedule.yaml
    card_mod:
      class: sub_card
      style: |
        ha-card {
          font-size: 12px;
        }

  - type: entities
    state_color: true
    entities:
      - entity: sensor.indoor_temperature_statistics
        name: Average Indoor Temp
      - entity: binary_sensor.humidity_level_in_range
        name: Humidity Confort Zone
      - entity: sensor.indoor_humidity_statistics
        name: Average Indoor Humidity
    card_mod:
      class: sub_card
card_mod:
  class: basic #STYLE how to do popup