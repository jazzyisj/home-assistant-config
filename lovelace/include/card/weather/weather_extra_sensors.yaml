type: glance
show_state: false
show_name: false
columns: 8
entities:
  #IDEA move to temp in weather card
  - entity: sensor.temperature_trend
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% if is_state('binary_sensor.climacell_temperature_rising','on') %} var(--entity-heating-color)
            {% elif is_state('binary_sensor.climacell_temperature_falling','on') %} var(--entity-cooling-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/card/weather/windy_temperature_widget.yaml
  # move to temp in weather card
  #DISABLED - entity: sensor.climacell_temperature_alert
  #   card_mod:
  #     style: |
  #       :host {
  #         --paper-item-icon-color:
  #           {% if is_state('sensor.climacell_temperature_alert','Heat') %} var(--entity-heating-color)
  #           {% elif is_state('sensor.climacell_temperature_alert','Cold') %} var(--entity-cooling-color)
  #           {% else %} var(--entity-ok-color)
  #           {% endif %}
  #         ;
  #       }
  #   tap_action:
  #     action: fire-dom-event
  #     browser_mod:
  #       command: popup
  #       deviceID: this
  #       large: true
  #       hide_header: true
  #       title: Air Quality Summary Graph
  #       card: !include /config/lovelace/include/card/weather/windy_temperature_widget.yaml

  - entity: binary_sensor.storm_approaching_alert
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% if is_state('binary_sensor.storm_approaching_alert','on') %} var(--entity-warning-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Windy Radar Map
        card: !include /config/lovelace/include/card/weather/windy_radar_widget.yaml

  - entity: sensor.current_uv_index
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set level = states('sensor.current_uv_index')|float %}
            {% if level < 2.5 %} var(--entity-ok-color)
            {% elif level < 4.9 %} var(--entity-minor-color)
            {% elif level < 7.3 %} var(--entity-warning-color)
            {% elif level < 9.7 %} var(--entity-severe-color)
            {% else %} var(--entity-critical-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Atmosphere Summary Graph
        card: !include /config/lovelace/include/graph/atmosphere_summary_graph.yaml
    double_tap_action:
      action: url
      url_path: https://maps.darksky.net/@uv_index,42.505,-81.914,7

  - entity: sensor.allergy_risk_today
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set level = states('sensor.allergy_index_today')|float %}
            {% if level < 2.5 %} var(--entity-ok-color)
            {% elif level < 4.9 %} var(--entity-minor-color)
            {% elif level < 7.3 %} var(--entity-warning-color)
            {% elif level < 9.7 %} var(--entity-severe-color)
            {% else %} var(--entity-critical-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/graph/air_quality_summary_graph.yaml
    double_tap_action:
      action: url
      url_path: https://www.pollen.com/forecast/current/pollen/48201

  - entity: sensor.asthma_risk_today
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set level = states('sensor.asthma_risk_today')|float %}
            {% if level < 2.5 %} var(--entity-ok-color)
            {% elif level < 4.9 %} var(--entity-minor-color)
            {% elif level < 7.3 %} var(--entity-warning-color)
            {% elif level < 9.7 %} var(--entity-severe-color)
            {% else %} var(--entity-critical-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/graph/air_quality_summary_graph.yaml
    double_tap_action:
      action: url
      url_path: https://www.asthmaforecast.com/forecast/current/asthma/48201

  - entity: sensor.cold_flu_index_today #IQVIA
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set level = states('sensor.waqi_windsor')|float %}
            {% if level < 2.5 %} var(--entity-ok-color)
            {% elif level < 4.9 %} var(--entity-minor-color)
            {% elif level < 7.3 %} var(--entity-warning-color)
            {% elif level < 9.7 %} var(--entity-severe-color)
            {% elif level >= 9.7 %} var(--entity-critical-color)
            {% else %} var(--state-icon-color);
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/graph/air_quality_summary_graph.yaml
    double_tap_action:
      action: url
      url_path: https://www.flustar.com/forecast/current/cold/48201

  - entity: sensor.waqi_windsor
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set level = states('sensor.waqi_windsor')|float %}
            {% if level < 2.5 %} var(--entity-ok-color)
            {% elif level < 4.9 %} var(--entity-minor-color)
            {% elif level < 7.3 %} var(--entity-warning-color)
            {% elif level < 9.7 %} var(--entity-severe-color)
            {% elif level >= 9.7 %} var(--entity-critical-color)
            {% else %} var(--state-icon-color);
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/graph/air_quality_summary_graph.yaml
    double_tap_action:
      action: url
      url_path: https://waqi.info/#/c/42.198/-82.861/10.4z

  - entity: sensor.climacell_fire_index
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% if states('sensor.climacell_fire_index')|int > 10 %} var(--entity-critical-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
          ;
        }
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        deviceID: this
        large: true
        hide_header: true
        title: Air Quality Summary Graph
        card: !include /config/lovelace/include/graph/air_quality_summary_graph.yaml
    double_tap_action:
      action: url
      url_path:  https://www.lioapplications.lrc.gov.on.ca/ForestFireInformationMap/index.html?viewer=FFIM.FFIM
card_mod:
  class: sub_card
