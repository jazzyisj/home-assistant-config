###################################################################################################
## Alarm Clock Card
###################################################################################################
type: vertical-stack
cards:
  - type: picture-glance
    entity: sensor.alarm_clock_status
    state_image:
      'off': /local/images/glance/alarm_clock_off.png
      'playing': /local/images/glance/alarm_clock_playing.png
      'snoozed': /local/images/glance/alarm_clock_snoozed.png
      'failed': /local/images/glance/alarm_clock_failed.png
      'unknown': /local/images/glance/alarm_clock_failed.png
    tap_action:
      action: call-service
      service: browser_mod.toast
      service_data:
        duration: 30000
        message: "Double tap to snooze, press and hold to turn off."
    double_tap_action:
      action: call-service
      service: input_boolean.turn_on
      service_data:
        entity_id: input_boolean.alarm_clock_snooze
    hold_action:
      action: call-service
      service: script.alarm_clock_stop
    entities:
      - type: custom:dummy_entity_row
        name: Alarm Clock Settings
        entity: sensor.dummy
        icon: mdi:cog
        tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            deviceID: this
            title: Alarm Clock Settings
            large: false
            card: !include /config/lovelace/include/entities/alarm_clock_settings.yaml
        double_tap_action:
          action: none
        hold_action:
          action: none

      - entity: sensor.alarm_clock_auto_display
        tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            title: Auto Alarm Clock
            deviceID: this
            large: false
            card: !include /config/lovelace/include/entities/alarm_clock_settings_auto.yaml
        double_tap_action:
          action: call-service
          service: input_boolean.toggle
          service_data:
            entity_id: input_boolean.alarm_clock_auto_workdays
        hold_action:
          action: call-service
          service: input_boolean.turn_off
          service_data:
            entity_id: input_boolean.alarm_clock_active_auto

      - entity: sensor.alarm_clock_manual_display
        tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            title: Manual Alarm Clock
            deviceID: this
            large: false
            card: !include /config/lovelace/include/entities/alarm_clock_settings_manual.yaml
        double_tap_action:
          action: call-service
          service: input_boolean.toggle
          service_data:
            entity_id: input_boolean.alarm_clock_manual
        hold_action:
          action: call-service
          service: input_boolean.turn_off
          service_data:
            entity_id: input_boolean.alarm_clock_active_manual

      - entity: sensor.alarm_clock_nap_display
        tap_action:
          action: call-service
          service: browser_mod.popup
          service_data:
            title: Nap Alarm Clock
            deviceID: this
            large: false
            card: !include /config/lovelace/include/entities/alarm_clock_settings_nap.yaml
        double_tap_action:
          action: call-service
          service: input_boolean.toggle
          service_data:
            entity_id: input_boolean.alarm_clock_nap
        hold_action:
          action: call-service
          service: input_boolean.turn_off
          service_data:
            entity_id: input_boolean.alarm_clock_active_nap

      - entity: input_boolean.alarm_clock_snooze

  # only show alarm clock timers when active
  - type: conditional
    conditions:
      - entity: timer.alarm_clock_snooze
        state: 'active'
    card:
      type: entities
      show_header_toggle: false
      show_empty: false
      state_color: true
      entities:
        - entity: timer.alarm_clock_snooze

