type: custom:html-template-card
ignore_line_breaks: true
entities: sensor.noaa_alerts_miz076
#STYLE border radius doesn't work
card_mod:
  style: |
    html_template-card {
      border: 5px solid;
      border-radius: 0px; !important
    }
content: >
  {% if states('sensor.noaa_alerts_miz076')|lower in ['unknown','unavailable','none'] %}
    NOAA service not connected.
  {% elif is_state('sensor.noaa_alerts_miz076','0') %}
    No Active Alerts
  {% else %}
    {%- if state_attr('sensor.noaa_alerts_miz076','alerts')|lower not in ['unknown','unavailable','none'] -%}
      {% for alert in state_attr('sensor.noaa_alerts_miz076','alerts') %}
        <p style='font-size:22px;font-weight:bold;'><ha-icon icon="mdi:weather-sunny"></ha-icon>{{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].event }}</p>
        <p>The National Weather Service has issued a
        {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].event }} in effect from
        {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].effective,'ERROR')|timestamp_custom('%-I:%M %p %A',true,'ERROR') }} until
        {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].expires,'ERROR')|timestamp_custom('%-I:%M %p %A',true,'ERROR') }}.
        {% if not state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].instruction == None %}
          {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].instruction }}
        {% endif %}</p>
        <p>{{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].parameters.NWSheadline[0] }}</p>
        <p>{{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].description|replace('*', '<br/>') }}</p>
        <p style="font-size:12px;">
        Headline: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].headline }}
        <br/>Response: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].response }}
        <br/>Issued: {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].effective,'ERROR')|timestamp_custom('%a %B %d,%-I:%M %p',true,'ERROR') }}
        <br/>Onset: {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].onset,'ERROR')|timestamp_custom('%a %B %d,%-I:%M %p',true,'ERROR') }}
        <br/>Expires: {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].expires,'ERROR')|timestamp_custom('%a %B %d,%-I:%M %p',true,'ERROR') }}
        <br/>Ends: {{ as_timestamp(state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].ends,'ERROR')|timestamp_custom('%a %B %d,%-I:%M %p',true,'ERROR') }}
        <br/>Status: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].status }}
        <br/>Type: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].messageType }}
        <br/>Category: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].category }}
        <br/>Severity: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].severity }}
        <br/>Certainty: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].certainty }}
        <br/>Urgency: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].urgency }}
        <br/>Event: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].event }}
        <br/>Sender: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].sender }}
        <br/>Name: {{ state_attr('sensor.noaa_alerts_miz076','alerts')[loop.index0].senderName }}</p>
      {% endfor %}
    {% else %} Error
    {% endif %}
  {% endif %}