type: custom:fold-entity-row
head:
  entity: sensor.disk_use_percent_home
padding: 5
card_mod:
  style: |
    {% if is_state('binary_sensor.disk_use_alert','on') %}
    @keyframes blink {
      50% {
        --paper-item-icon-color: var(--entity-warning-color);
      }
    }
    {% endif %}
    :host {
      --paper-item-icon-color:
        {% if is_state('binary_sensor.disk_use_alert','on') %} var(--entity-critical-color)
        {% elif states('sensor.disk_use_percent_home')|int(0) < 40 %} var(--entity-ok-color)
        {% elif states('sensor.disk_use_percent_home')|int(0) < 50 %} var(--entity-minor-color)
        {% elif states('sensor.disk_use_percent_home')|int(0) < 70 %} var(--entity-warning-color)
        {% elif states('sensor.disk_use_percent_home')|int(0) < 80 %} var(--entity-severe-color)
        {% else %} var(--entity-critical-color)
        {% endif %}
      ;
    }
    {% if is_state('binary_sensor.disk_use_alert','on') %}animation: blink 2s linear infinite;{% endif %}

entities:
  - type: custom:fold-entity-row
    head:
      entity: sensor.hassio_db
      name: Hassio Database
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% if states('sensor.hassio_db')|int(0) > 1000 %} var(--entity-critical-color)
              {% elif states('sensor.hassio_db')|int(0) > 750 %} var(--entity-warning-color)
              {% else %} var(--entity-ok-color)
              {% endif %}
              ;
          }
    padding: 5
    entities:
      - type: call-service
        service: script.purge_database
        name: Purge Hassio Database
        icon: mdi:database-sync
        action_name: PURGE

  - entity: sensor.home_assistant_log
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% if states('sensor.home_assistant_log')|int(0) > 100 %} var(--entity-critical-color)
            {% elif states('sensor.home_assistant_log')|int(0) > 50 %} var(--entity-warning-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
            ;
        }

  - type: custom:template-entity-row
    name: Snapshot Backup Disk Use
    icon: mdi:folder-sync
    state: "{{ state_attr('sensor.snapshot_backup','size_in_home_assistant') }}"
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% if states('sensor.alarm_snapshots')|int(0) > 5 %} var(--entity-warning-color)
            {% else %} var(--state-icon-color)
            {% endif %}
            ;
        }

  - type: custom:fold-entity-row
    head:
      entity: sensor.alarm_snapshots
      name: Alarm Snapshot Disk Use
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% if states('sensor.alarm_snapshots')|int(0) > 100 %} var(--entity-warning-color)
              {% else %} var(--state-icon-color)
              {% endif %}
              ;
          }
    padding: 5
    entities:
      - type: call-service
        service: shell_command.alarm_snapshots_purge_all
        icon: mdi:database-sync
        name: Purge Motion Capture
        action_name: PURGE

  - type: custom:fold-entity-row
    head:
      entity: sensor.tts
      name: TTS Cache Disk Use
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% if states('sensor.tts')|int(0) > 100 %} var(--entity-warning-color)
              {% else %} var(--state-icon-color)
              {% endif %}
              ;
          }
    padding: 5
    entities:
      - type: call-service
        service: shell_command.tts_purge_all
        icon: mdi:database-sync
        name: Purge TTS Cache
        action_name: PURGE