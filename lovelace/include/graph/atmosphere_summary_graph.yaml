#######################################################################################################################
## Atmosphere Summary Graph
# https://github.com/RomRider/apexcharts-card
# https://apexcharts.com/docs/installation/
#######################################################################################################################

type: custom:apexcharts-card
config_templates: weather_graph
apex_config:
  title:
    text: Atmosphere
yaxis:
  - id: percent
    show: true
    min: 0
    max: 100
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Percent
        rotate: -90

  - id: ozone
    show: false
    min: 0
    max: 400
    apex_config:
      tickAmount: 5

  - id: uv
    show: false
    min: 0
    max: 11

  - id: visibility
    show: false
    opposite: true
    min: 0
    max: 15
    apex_config:
      tickAmount: 3
      decimalsInFloat: 0
      title:
        text: Miles
        rotate: -90

  - id: aqi
    show: true
    opposite: true
    min: 0
    max: 150
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Total AQI
        rotate: -90

all_series_config:
  float_precision: 1
  fill_raw: last
  curve: smooth
  opacity: 1
  stroke_width: 3
series:
  - entity: sensor.waqi_windsor
    name: AQI
    yaxis_id: aqi
    type: area
    color: '#CECECE'
    stroke_width: 1
    opacity: 0.7
    color_threshold:
      - value: 0
        color: '#43CC73'
        opacity: 0.1
      - value: 20
        color: '#A4CE3C'
        opacity: 0.3
      - value: 50
        color: '#F9F204'
        opacity: 0.4
      - value: 100
        color: '#F1931C'
        opacity: 0.7
      - value: 150
        color: '#EC1A24'
        opacity: 0.7
      - value: 200
        color: '#A4024C'
        opacity: 0.8
      - value: 300
        color: '#891A1F'
        opacity: 0.9

  - entity: sensor.current_ozone_level
    yaxis_id: ozone
    name: Ozone
    type: line
    color: '#FF9F00'

  - entity: sensor.current_uv_index
    yaxis_id: uv
    name: UV
    type: line
    stroke_width: 3
    color_threshold:
      - value: 1
        color: '#33CC99'
      - value: 3
        color: '#FFFF66'
      - value: 6
        color: '#FF9933'
      - value: 8
        color: '#FFFF66'
      - value: 11
        color: '#CC0099'

  - entity: sensor.climacell_visibility
    yaxis_id: visibility
    type: line
    name: Visibility
    color: '#00DDFF'
    stroke_width: 2

  - entity: sensor.climacell_cloud_cover
    yaxis_id: percent
    name: Clouds
    type: area
    color: '#808080'
    stroke_width: 1
    color_threshold:
      - value: 0
        color: '#007aff'
        opacity: 0
      - value: 1.00
        color: '#808080'
        opacity: 0.5