#######################################################################################################################
## Atmosphere Summary Graph
# https://github.com/RomRider/apexcharts-card
# https://apexcharts.com/docs/installation/
#######################################################################################################################
type: custom:apexcharts-card
config_templates: weather_graph
apex_config:
  title:
    text: Atmospheric Conditions
yaxis:
  - id: speed
    show: true
    min: 0
    max: 75
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Wind Speed (km/h)
        rotate: -90

  - id: pressure
    show: true
    opposite: true
    min: 980
    max: 1035
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Barmetric Pressure (hPa)
        rotate: -90

  - id: percent
    show: false
    min: 0
    max: 100
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Percent
        rotate: -90

  - id: uv
    show: false
    min: 0
    max: 11
    apex_config:
      tickAmount: 5

  - id: visibility
    show: false
    min: 0
    max: 20
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: Visibility (km)
        rotate: -90

all_series_config:
  float_precision: 1
series:
  - name: Wind
    entity: sensor.wind_speed
    yaxis_id: speed
    type: area
    stroke_width: 1
    opacity: 1
    color: rgb(28, 28, 28)
    color_threshold:
      &speed_colors # https://www.windy.com/colors?42.326,-83.057,4
      - value: 0
        color: rgb(98, 113, 183)
        opacity: 0.2
      - value: 4
        color: rgb(57, 97, 159)
        opacity: 0.3
      - value: 11
        color: rgb(74, 148, 169)
        opacity: 0.4
      - value: 18
        color: rgb(77, 141, 123)
        opacity: 0.6
      - value: 25
        color: rgb(83, 165, 83)
        opacity: 0.8
      - value: 32
        color: rgb(53, 159, 53)
        opacity: 1
      - value: 40
        color: rgb(167, 157, 81)
        opacity: 1
      - value: 47
        color: rgb(159, 127, 58)
        opacity: 1
      - value: 54
        color: rgb(161, 108, 92)
        opacity: 1
      - value: 61
        color: rgb(129, 58, 78)
        opacity: 1
      - value: 68
        color: rgb(175, 80, 136)
        opacity: 1
      - value: 76
        color: rgb(117, 74, 147)
        opacity: 1
      - value: 86
        color: rgb(109, 97, 163)
        opacity: 1

  - name: Gust
    entity: sensor.wind_gust
    yaxis_id: speed
    type: area
    stroke_width: 0
    color_threshold: *speed_colors

  - name: Pressure
    entity: sensor.barometric_pressure
    yaxis_id: pressure
    float_precision: 0
    color: rgb(229, 235, 52)

  - name: UV
    entity: sensor.uv_index
    yaxis_id: uv
    color: rgb(235, 98, 52)

  - name: Clouds
    entity: sensor.cloud_cover
    yaxis_id: percent
    type: area
    stroke_width: 1
    color: rgb(128, 128, 128)
    opacity: 1
    color_threshold:
      - value: 0
        color: rgb(0, 122, 255)
        opacity: 0
      - value: 100
        color: rgb(128, 128, 128)
        opacity: 0.3

  - name: Visibility
    entity: sensor.visibility
    yaxis_id: visibility
    color: rgb(0, 206, 255)
