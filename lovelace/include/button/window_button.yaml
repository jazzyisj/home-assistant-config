type: custom:button-card
template: menu_button
entity: binary_sensor.window_open
icon: mdi:window-closed-variant
styles:
  icon:
    - color: >
        [[[
          if (states['binary_sensor.window_open'].state == 'on')
            return 'var(--state-icon-active-color';
          else
            return 'var(--state-icon-color)';
        ]]]
tap_action:
  action: call-service
  service: browser_mod.popup
  service_data:
    deviceID: this
    title: Open Windows
    large: false
    card:
      type: markdown
      content: >
        {% set open_windows = states.binary_sensor|selectattr('attributes.device_class','eq','window')|rejectattr('state','eq','off')|map(attribute='name')|list %}
        The following windows are open:{{ '\n'  }}
        {%- if open_windows|count > 0 -%}
        - {{ open_windows|join('\n- ') }}
        {%- else -%}
            No open windows.
        {%- endif -%}
double_tap_action:
  action: none
hold_action:
  action: none