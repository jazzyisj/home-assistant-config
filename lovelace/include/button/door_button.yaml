type: custom:button-card
template: menu_button
entity: binary_sensor.door_open
icon: mdi:door
styles:
  icon:
    - color: >
        [[[
          if (states['binary_sensor.door_open'].state == 'on')
            return 'var(--state-icon-active-color';
          else
            return 'var(--state-icon-color)';
        ]]]
tap_action:
  action: call-service
  service: browser_mod.popup
  service_data:
    deviceID: this
    title: Open Entry Doors
    large: false
    card:
      type: markdown
      content: >
        {% set open_doors = states.binary_sensor|selectattr('attributes.device_class','eq','door')|rejectattr('state','eq','off')|map(attribute='name')|list %}
        The following doors are open:{{ '\n'  }}
        {%- if open_doors|count > 0 -%}
        - {{ open_doors|join('\n- ') }}
        {%- else -%}
            No open doors.
        {%- endif -%}
double_tap_action:
  action: none
hold_action:
  action: none