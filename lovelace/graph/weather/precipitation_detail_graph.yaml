###############################################################################
## Precipitation Detail Graph
###############################################################################
type: custom:apexcharts-card
config_templates: weather
apex_config:
  title:
    text: 'Precipitation'
yaxis:
  - id: probability
    show: true
    min: 0
    max: 110
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      title:
        text: 'POP (%)'
        rotate: -90
        style:
          fontSize: 14px
          fontFamily: Roboto # 'Helvetica, Arial, sans-serif'
          fontWeight: normal

  - id: pressure
    show: true
    opposite: true
    min: ~1000
    max: ~1035
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
      labels:
        show: true
        align: center
      title:
        text: 'Barometric Pressure (hPa)'
        rotate: -90
        style:
          fontSize: 14px
          fontFamily: Roboto # 'Helvetica, Arial, sans-serif'
          fontWeight: normal

  - id: humidity
    show: false
    min: 0
    max: 110
    apex_config:
      tickAmount: 5

  - id: clouds
    show: false
    min: 0
    max: 110
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0

  - id: intensity
    show: false
    min: 0
    max: ~5
    apex_config:
      tickAmount: 5
      decimalsInFloat: 3

  - id: precip
    show: false
    min: 0
    max: ~25
    apex_config:
      tickAmount: 5
      decimalsInFloat: 0
series:
  - name: 'Probability'
    entity: sensor.precipitation_probability
    yaxis_id: probability
    stroke_width: 1
    color: rgb(235, 186, 52)
    color_threshold: !include /config/lovelace/graph/include/precipitation_probability_line_color.yaml

  - name: 'Probability'
    entity: sensor.precipitation_probability
    yaxis_id: probability
    type: area
    stroke_width: 0
    color: rgb(235, 186, 52)
    color_threshold: !include /config/lovelace/graph/include/precipitation_probability_area_color.yaml

  - name: 'Intensity'
    entity: sensor.precipitation_intensity
    yaxis_id: intensity
    fill_raw: 'zero'
    type: line
    stroke_width: 1
    opacity: 1
    color: rgb(150, 150, 150)
    color_threshold: !include /config/lovelace/graph/include/precipitation_intensity_line_color.yaml

  - name: 'Intensity'
    entity: sensor.precipitation_intensity
    yaxis_id: intensity
    fill_raw: 'zero'
    type: area
    show:
      legend_value: false
    float_precision: 3
    stroke_width: 0
    color: rgb(150, 150, 150)
    color_threshold: !include /config/lovelace/graph/include/precipitation_intensity_area_color.yaml

  - name: 'Clouds'
    entity: sensor.cloud_cover
    yaxis_id: clouds
    type: line
    stroke_width: 1
    opacity: 1
    color: rgb(150, 150, 150)
    color_threshold: !include /config/lovelace/graph/include/cloud_cover_line_color.yaml

  - name: 'Clouds'
    entity: sensor.cloud_cover
    yaxis_id: clouds
    type: area
    show:
      legend_value: false
    stroke_width: 0
    color: rgb(150, 150, 150)
    color_threshold: !include /config/lovelace/graph/include/cloud_cover_area_color.yaml

  - name: 'Humidity'
    entity: sensor.outdoor_humidity
    yaxis_id: humidity
    stroke_width: 1.5
    opacity: 1
    color: rgb(255, 51, 51)

  - name: 'Pressure'
    entity: sensor.barometric_pressure
    yaxis_id: pressure
    float_precision: 0
    stroke_width: 1.5
    opacity: 1
    color: rgb(150, 150, 150)
    color_threshold: !include /config/lovelace/graph/include/pressure_line_color.yaml

  # - name: 'Rain'
  #   entity: sensor.precipitation_yesterday
  #   yaxis_id: precip
  #   type: column
  #   group_by:
  #     func: max
  #     duration: 24h
  #   show:
  #     datalabels: true
  #   stroke_width: 5
  #   color: rgb(0, 51, 255)
