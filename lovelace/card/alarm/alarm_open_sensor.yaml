###############################################################################
## Alarm Open Sensors
###############################################################################
type: custom:stack-in-card
cards:
  - type: entities
    entities:
      - type: custom:template-entity-row
        entity: binary_sensor.alarm_open_sensor_alert
        state: ''
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            deviceID: this
            hide_header: true
            title: 'Alarm Control Panel'
            card: !include /config/lovelace/card/alarm/alarm_control_panel.yaml
        card_mod:
          style: |
            @keyframes blink {
              50% {
                --paper-item-icon-color: white;
              }
            }
            :host {
              --paper-item-icon-color: var(--entity-critical-color);
              animation: blink 1s linear infinite;
            }
    card_mod:
      class: alarm_timer

  - type: custom:auto-entities
    filter:
      template: >
        [
        {%- if state_attr('alarm_control_panel.master','open_sensors')|lower != 'none' -%}
          {%- for item in state_attr('alarm_control_panel.master','open_sensors') -%}
            '{{ item|replace('Open Alert','') }}{% if not loop.last %},{% endif -%}'
          {%- endfor -%}
        {%- endif -%}
        ]
    card:
      type: entities
      card_mod:
        class: alarm_timer_entities
        style: |
          :host {
            --paper-item-icon-color: black;
          }
card_mod:
  class: alarm_timer
