###############################################################################
## Alarm Triggered
###############################################################################
type: custom:state-switch
entity: template
template: >
  {% if is_state('alarm_control_panel.master','triggered') %} master
  {% elif is_state('alarm_control_panel.house','triggered') %} house
  {% elif is_state('alarm_control_panel.garage','triggered') %} garage
  {% endif %}
states:
  master:
    type: entities
    entities:
      - type: custom:template-entity-row
        icon: mdi:shield-alert
        name: "ALARM: {{ states('input_text.current_alarm') }}"
        active: true
        card_mod:
          style: |
            :host {
              --paper-item-icon-active-color: white;
            }
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            deviceID: this
            hide_header: true
            title: 'Alarm Control Panel'
            card: !include /config/lovelace/card/alarm/alarm_control_panel.yaml
    card_mod:
      style: |
        ha-card {
          background: red !important;
          color: white;
          font-size: 22px;
          font-weight: bold;
          font-variant: small-caps;
        }

  house:
    type: entities
    entities:
      - type: custom:template-entity-row
        icon: mdi:shield-alert
        name: "ALARM: {{ states('input_text.current_alarm') }}"
        active: true
        card_mod:
          style: |
            :host {
              --paper-item-icon-active-color: white;
            }
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            deviceID: this
            hide_header: true
            title: 'Alarm Control Panel'
            card: !include /config/lovelace/card/alarm/alarm_control_panel_house.yaml
    card_mod:
      style: |
        ha-card {
          background: red !important;
          color: white;
          font-size: 22px;
          font-weight: bold;
          font-variant: small-caps;
        }

  garage:
    type: entities
    entities:
      - type: custom:template-entity-row
        icon: mdi:shield-alert
        name: "ALARM: {{ states('input_text.current_alarm') }}"
        active: true
        card_mod:
          style: |
            :host {
              --paper-item-icon-active-color: white;
            }
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            deviceID: this
            hide_header: true
            title: 'Alarm Control Panel'
            card: !include /config/lovelace/card/alarm/alarm_control_panel_garage.yaml
    card_mod:
      style: |
        ha-card {
          background: red !important;
          color: white;
          font-size: 22px;
          font-weight: bold;
          font-variant: small-caps;
        }
