###############################################################################
## Other Media Players  (HASS, kiosk, browsers)
###############################################################################
type: vertical-stack
cards:
  - type: media-control
    entity: media_player.jphone_app_internal #TEMP need state switch fix

  - type: media-control
    entity: media_player.jlaptop_chrome_internal

  - type: entities
    entities:
      - media_player.kiosk_internal_player #TEMP need state switch fix
      - media_player.fire_tablet

  - type: entities
    entities:
      - type: custom:state-switch
        entity: template
        template: "{{ states('sensor.kiosk_internal_player') in ['off','alarm_clock','unknown','unavailable'] }}"
        states:
          true:
            type: custom:hui-element
            card_type: entities
            entities:
              - entity: media_player.mass_kiosk_internal_player
            card_mod:
              class: sub_card
          false:
            type: custom:hui-element
            card_type: media-control
            entity: media_player.mass_kiosk_internal_player

      - type: custom:state-switch
        entity: template
        template: "{{ states('sensor.hass_media_player') in ['off','alarm_clock','unknown','unavailable'] }}"
        states:
          true:
            type: custom:hui-element
            card_type: entities
            entities:
              - entity: media_player.mass_hass_media_player
            card_mod:
              class: sub_card
          false:
            type: custom:hui-element
            card_type: media-control
            entity: media_player.mass_hass_media_player

  - type: custom:state-switch
    entity: deviceID #ISSUE not working  https://github.com/thomasloven/lovelace-state-switch/issues/90
    states:
      "844e8df7e589372a13ee7d6a638afb79": #"jlaptop_chrome_internal":
        type: custom:state-switch
        entity: template
        template: >
          {% if states('media_player.mass_jlaptop_chrome_internal') not in ['unknown','unavailable'] %}
            {% if states('sensor.jason_laptop_media_player_internal') in ['playing','paused','buffering','on'] %} player
            {% else %} entity
            {% endif %}
          {% endif %}
        states:
          entity:
            type: entities
            entities:
              - entity: media_player.mass_jlaptop_chrome_internal
          player:
            type: media-control
            entity: media_player.mass_jlaptop_chrome_internal

      "jlaptop_chrome_external":
        type: custom:state-switch
        entity: template
        template: >
          {% if states('media_player.mass_jlaptop_chrome_external') not in ['unknown','unavailable'] %}
            {% if states('sensor.jason_laptop_media_player_external') in ['playing','paused','buffering','on'] %} player
            {% else %} entity
            {% endif %}
          {% endif %}
        states:
          entity:
            type: entities
            entities:
              - entity: media_player.mass_jlaptop_chrome_external
          player:
            type: media-control
            entity: media_player.mass_jlaptop_chrome_external

      "jphone_app_internal":
        type: custom:state-switch
        entity: template
        template: >
          {% if states('media_player.mass_jphone_app_internal') not in ['unknown','unavailable'] %}
            {% if states('sensor.jason_phone_media_player_internal') in ['playing','paused','buffering','on'] %} player
            {% else %} entity
            {% endif %}
          {% endif %}
        states:
          entity:
            type: entities
            entities:
              - entity: media_player.mass_jphone_app_internal
          player:
            type: media-control
            entity: media_player.mass_jphone_app_internal

      "jphone_app_external":
        type: custom:state-switch
        entity: template
        template: >
          {% if states('media_player.mass_jphone_app_external') not in ['unknown','unavailable'] %}
            {% if states('sensor.jason_phone_media_player_external') in ['playing','paused','buffering','on'] %} player
            {% else %} entity
            {% endif %}
          {% endif %}
        states:
          entity:
            type: entities
            entities:
              - entity: media_player.mass_jphone_app_external
          player:
            type: media-control
            entity: media_player.mass_jphone_app_external
