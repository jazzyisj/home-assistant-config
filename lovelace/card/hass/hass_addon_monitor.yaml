###############################################################################
## Hass Addon Monitor
###############################################################################
type: entities
title: "Home Assistant Addons"
icon: mdi:home-assistant
entities:
  - type: custom:bar-card
    name: "CPU Use"
    entity: sensor.hass_addon_cpu_percent
    entity_row: true
    icon: mdi:cpu-32-bit
    positions:
      icon: outside
      name: outside
      indicator: inside
      value: outside
    direction: right
    height: 15px
    width: 60%
    decimal: 0
    min: 0
    max: 100
    severity: !include /config/lovelace/bar/include/processor_use_bar_color.yaml
    card_mod:
      style: | #BORDER
        ha-card {
          border: none !important;
        }
        bar-card-card {
          margin-left: 5px;
        }
        :host {
          --paper-item-icon-color:
            {% set cpu = states('sensor.hass_addon_cpu_percent')|int(-1) %}
            {% if cpu > 75 %} var(--entity-critical-color)
            {% elif cpu > 65  %} var(--entity-severe-color)
            {% elif cpu > 55 %} var(--entity-warning-color)
            {% elif cpu > 45 %} var(--entity-minor-color)
            {% else %} var(--state-icon-color)
            {% endif %}
          ;
        }

  - type: custom:bar-card
    name: "Memory Use"
    entity: sensor.hass_addon_memory_percent
    entity_row: true
    icon: mdi:thermometer
    positions:
      icon: outside
      name: outside
      indicator: inside
      value: outside
    direction: right
    height: 15px
    width: 60%
    decimal: 0
    min: 0
    max: 100
    severity: !include /config/lovelace/bar/include/memory_use_bar_color.yaml
    card_mod:
      style: | #BORDER
        ha-card {
          border: none !important;
        }
        bar-card-card {
          margin-left: 5px;
        }
        :host {
          --paper-item-icon-color:
            {% set mem = states('sensor.memory_use_status')|int(-1) %}
            {% if mem > 90 %} var(--entity-critical-color)
            {% elif mem > 80 %} var(--entity-severe-color)
            {% elif mem > 70 %} var(--entity-warning-color)
            {% elif mem > 60 %} var(--entity-minor-color)
            {% else %} var(--state-icon-color)
            {% endif %}
          ;
        }

  - !include /config/lovelace/card/hass/addons/chrony_stats.yaml
  - !include /config/lovelace/card/hass/addons/file_editor_stats.yaml
  - !include /config/lovelace/card/hass/addons/frigate_nvr_stats.yaml
  - !include /config/lovelace/card/hass/addons/glances_stats.yaml
  - !include /config/lovelace/card/hass/addons/grafana_stats.yaml
  - !include /config/lovelace/card/hass/addons/home_assistant_google_drive_backup_stats.yaml
  - !include /config/lovelace/card/hass/addons/influxdb_stats.yaml
  - !include /config/lovelace/card/hass/addons/log_viewer_stats.yaml
  - !include /config/lovelace/card/hass/addons/mariadb_stats.yaml
  - !include /config/lovelace/card/hass/addons/mosquitto_broker_stats.yaml
  - !include /config/lovelace/card/hass/addons/phpmyadmin_stats.yaml
  - !include /config/lovelace/card/hass/addons/rtsptoweb_webrtc_stats.yaml
  - !include /config/lovelace/card/hass/addons/samba_share_stats.yaml
  - !include /config/lovelace/card/hass/addons/sqlite_stats.yaml
  - !include /config/lovelace/card/hass/addons/ssh_web_terminal_stats.yaml
  - !include /config/lovelace/card/hass/addons/unifi_controller_stats.yaml
  - !include /config/lovelace/card/hass/addons/visual_studio_code_stats.yaml
  - !include /config/lovelace/card/hass/addons/vlc_stats.yaml
  - !include /config/lovelace/card/hass/addons/weatherflow_to_mqtt_stats.yaml
  - !include /config/lovelace/card/hass/addons/zwave_js_stats.yaml
  - !include /config/lovelace/card/hass/addons/z_wave_js_to_mqtt_stats.yaml
  - !include /config/lovelace/card/hass/addons/zerotier_one_stats.yaml
card_mod:
  class: basic_swipe
