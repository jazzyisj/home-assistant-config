###############################################################################
## Door Sensor Entities
###############################################################################
type: glance
title: Doors
show_state: false
state_color: true
columns: 5
entities:
  - entity: binary_sensor.back_door
    name: Back
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.back_door
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.back_door
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.back_door','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.back_door_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.back_door_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.back_door','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.front_door
    name: Front
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.front_door
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.front_door
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.front_door','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.front_door_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.front_door_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.front_door','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.garage_side_door
    name: Garage Side
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.garage_side_door
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.garage_side_door
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.garage_side_door','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.garage_side_door_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.garage_side_door_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.garage_side_door','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.patio_door
    name: Patio
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.patio_door
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.patio_door
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.patio_door','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.patio_door_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.patio_door_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.patio_door','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.side_door
    name: Side
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.side_door
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.side_door
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.side_door','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.side_door_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.side_door_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.side_door','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }
card_mod:
  class: basic
  style: |
    ha-card {
      font-size: 12px;
    }
