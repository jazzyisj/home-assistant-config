###############################################################################
## Window Sensors
###############################################################################
type: glance
title: 'Window Sensors'
show_state: false
state_color: true
columns: 4
entities:
  - entity: binary_sensor.bedroom_front_window
    name: 'Bedroom Front'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.bedroom_front_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.bedroom_front_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.bedroom_front_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.bedroom_front_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.bedroom_front_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.bedroom_front_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.bedroom_side_window
    name: 'Bedroom Side'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.bedroom_side_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.bedroom_side_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.bedroom_side_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.bedroom_side_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.bedroom_side_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.bedroom_side_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.downstairs_kitchen_window
    name: 'Kitchen Downstairs'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.downstairs_kitchen_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.downstairs_kitchen_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.downstairs_kitchen_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.downstairs_kitchen_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.downstairs_kitchen_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.downstairs_kitchen_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.kitchen_sink_window
    name: 'Kitchen Sink'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.kitchen_sink_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.kitchen_sink_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.kitchen_sink_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.kitchen_sink_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.kitchen_sink_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.kitchen_sink_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.kitchen_window
    name: 'Kitchen Upstairs'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.kitchen_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.kitchen_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.kitchen_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.kitchen_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.kitchen_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.kitchen_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.laundry_room_window
    name: 'Laundry Room'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.laundry_room_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.laundry_room_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.laundry_room_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.laundry_room_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.laundry_room_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.laundry_room_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.living_room_window_1
    name: 'Livingroom 1'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.living_room_window_1
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.living_room_window_1
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.living_room_window_1','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.living_room_window_1_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.living_room_window_1_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.living_room_window_1','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.living_room_window_2
    name: 'Livingroom 2'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.living_room_window_2
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.living_room_window_2
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.living_room_window_2','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.living_room_window_2_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.living_room_window_2_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.living_room_window_2','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.living_room_window_3
    name: 'Livingroom 3'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.living_room_window_3
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.living_room_window_3
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.living_room_window_3','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.living_room_window_3_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.living_room_window_3_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.living_room_window_3','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.living_room_window_4
    name: 'Livingroom 4'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.living_room_window_4
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.living_room_window_4
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.living_room_window_4','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.living_room_window_4_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.living_room_window_4_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.living_room_window_4','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.office_window
    name: 'Office'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.office_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.office_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.office_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.office_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.office_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.office_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.family_room_window
    name: 'Family Room'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.family_room_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.family_room_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.family_room_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.family_room_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.family_room_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.family_room_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.master_bathroom_window
    name: 'Master Bathroom'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.master_bathroom_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.master_bathroom_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.master_bathroom_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.master_bathroom_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.master_bathroom_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.master_bathroom_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }

  - entity: binary_sensor.master_bedroom_window
    name: 'Master Bedroom'
    tap_action:
      action: more-info
    double_tap_action:
      action: call-service
      service: virtual.toggle
      service_data:
        entity_id: binary_sensor.master_bedroom_window
    hold_action:
      action: call-service
      service: input_boolean.toggle
      service_data:
        entity_id: input_boolean.master_bedroom_window
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {%- if is_state('input_boolean.master_bedroom_window','off') %} var(--entity-minor-color)
            {%- else %} var(--state-icon-color)
            {%- endif -%}
          ;
          --paper-item-icon-active-color:
            {%- if is_state('binary_sensor.master_bedroom_window_open_alert','on')
                  and is_state('input_boolean.alarm_triggered','on') %} var(--entity-critical-color)
            {%- elif is_state('binary_sensor.master_bedroom_window_open_alert','on')
                  and not is_state('alert.hvac_window_door_open','idle') %} var(--entity-severe-color)
            {%- elif is_state('input_boolean.master_bedroom_window','off') %} var(--entity-warning-color)
            {%- else %} var(--state-icon-active-color)
            {%- endif -%}
          ;
        }
card_mod:
  class: basic
  style: |
    ha-card {
      font-size: 12px;
    }
