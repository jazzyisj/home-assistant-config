###############################################################################
## UV Allergy Asthma Card
###############################################################################
type: entities
entities:
  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.current_uv_level
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set level = states('sensor.uv_index')|float(0) %}
              {% if level < 2.5 %} var(--entity-ok-color)
              {% elif level < 4.9 %} var(--entity-minor-color)
              {% elif level < 7.3 %} var(--entity-warning-color)
              {% elif level < 9.7 %} var(--entity-severe-color)
              {% else %} var(--entity-critical-color)
              {% endif %}
            ;
          }
    entities:
      - entity: sensor.uv_index
        name: 'Current Index'

      - entity: sensor.max_uv_index
        name: 'Today Index'

      - entity: sensor.uv_risk_today
        name: 'Today Level'

      - entity: binary_sensor.protection_window
        name: 'Protection'

      - entity: sensor.current_ozone_level
        name: 'Current Ozone'

      - entity: sensor.skin_type_1_safe_exposure_time
        name: 'Skin Type 1'

      - entity: sensor.skin_type_2_safe_exposure_time
        name: 'Skin Type 2'

      - entity: sensor.skin_type_3_safe_exposure_time
        name: 'Skin Type 3'

      - entity: sensor.skin_type_4_safe_exposure_time
        name: 'Skin Type 4'

      - entity: sensor.skin_type_5_safe_exposure_time
        name: 'Skin Type 5'

      - entity: sensor.skin_type_6_safe_exposure_time
        name: 'Skin Type 6'

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.aqi_risk_level
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set level = states('sensor.air_quality_index')|float(0) %}
              {% if level < 50 %} var(--entity-ok-color)
              {% elif level < 100 %} var(--entity-minor-color)
              {% elif level < 150 %} var(--entity-warning-color)
              {% elif level < 300 %} var(--entity-severe-color)
              {% elif level >= 300 %} var(--entity-critical-color)
              {% else %} var(--state-icon-color);
              {% endif %}
            ;
          }
    entities:
      - entity: sensor.waqi_windsor
        name: 'East Side'
      - entity: sensor.waqi_windsor_downtown_ontario_canada
        name: 'Downtown'
      - entity: sensor.waqi_windsor_west_ontario_canada
        name: 'West Side'

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.allergy_risk_today
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set level = states('sensor.allergy_index_today')|float(0) %}
              {% if level < 2.5 %} var(--entity-ok-color)
              {% elif level < 4.9 %} var(--entity-minor-color)
              {% elif level < 7.3 %} var(--entity-warning-color)
              {% elif level < 9.7 %} var(--entity-severe-color)
              {% else %} var(--entity-critical-color)
              {% endif %}
            ;
          }
    entities:
      - entity: sensor.allergy_index_today
        name: 'Index Today'

      - entity: sensor.allergy_index_tomorrow
        name: 'Index Tomorrow'

      - entity: sensor.allergy_risk_tomorrow
        name: 'Risk Tomorrow'

      - entity: sensor.allergy_index_forecasted_average
        name: 'Forcasted Avg'

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.asthma_risk_today
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set level = states('sensor.asthma_risk_today')|float(0) %}
              {% if level < 2.5 %} var(--entity-ok-color)
              {% elif level < 4.9 %} var(--entity-minor-color)
              {% elif level < 7.3 %} var(--entity-warning-color)
              {% elif level < 9.7 %} var(--entity-severe-color)
              {% else %} var(--entity-critical-color)
              {% endif %}
            ;
          }
    entities:
      - entity: sensor.asthma_index_today
        name: 'Index Today'

      - entity: sensor.asthma_index_tomorrow
        name: 'Index Tomorrow'

      - entity: sensor.asthma_risk_tomorrow
        name: 'Risk Tomorrow'

      - entity: sensor.asthma_index_forecasted_average
        name: 'Forcasted Avg'

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.flu_risk_today
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set level = states('sensor.cold_flu_index_today')|float(0) %}
              {% if level < 2.5 %} var(--entity-ok-color)
              {% elif level < 4.9 %} var(--entity-minor-color)
              {% elif level < 7.3 %} var(--entity-warning-color)
              {% elif level < 9.7 %} var(--entity-severe-color)
              {% elif level >= 9.7 %} var(--entity-critical-color)
              {% else %} var(--state-icon-color);
              {% endif %}
            ;
          }
    entities:
      - entity: sensor.cold_flu_index_today
        name: 'Index Today'
        
      - entity: sensor.cold_flu_forecasted_average
        name: 'Forcasted Avg'
