###############################################################################
## Disk Use Entity
###############################################################################
type: custom:fold-entity-row
padding: 5
head:
  entity: sensor.disk_use_percent_home
  card_mod:
    style: |
      :host {
        --paper-item-icon-color:
          {% set status = states('sensor.disk_status') %}
          {% if status == 'critical' %} var(--entity-critical-color)
          {% elif status == 'severe' %} var(--entity-severe-color)
          {% elif status == 'warning' %} var(--entity-warning-color)
          {% elif status == 'minor' %} var(--entity-minor-color)
          {% else %} var(--entity-ok-color)
          {% endif %}
        ;
      }
entities:
  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.hassio_db
      name: 'Hassio Database'
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set status = states('sensor.hass_db_size_status') %}
              {% if status == 'critical' %} var(--entity-critical-color)
              {% elif status == 'severe' %} var(--entity-severe-color)
              {% elif status == 'warning' %} var(--entity-warning-color)
              {% elif status == 'minor' %} var(--entity-minor-color)
              {% else %} var(--entity-ok-color)
              {% endif %}
            ;
          }
    entities:
      - type: call-service
        service: script.purge_database
        name: 'Purge HASS Database'
        action_name: 'PURGE'

  - entity: sensor.home_assistant_log
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set status = states('sensor.hass_log_size_status') %}
            {% if status == 'critical' %} var(--entity-critical-color)
            {% elif status == 'severe' %} var(--entity-severe-color)
            {% elif status == 'warning' %} var(--entity-warning-color)
            {% elif status == 'minor' %} var(--entity-minor-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
          ;
        }

  - type: custom:template-entity-row
    name: 'Backup Disk Use'
    icon: mdi:folder-sync
    state: "{{ state_attr('sensor.backup_state','size_in_home_assistant') }}"
    card_mod:
      style: |
        :host {
          --paper-item-icon-color:
            {% set status = states('sensor.backup_size_status') %}
            {% if status == 'critical' %} var(--entity-critical-color)
            {% elif status == 'severe' %} var(--entity-severe-color)
            {% elif status == 'warning' %} var(--entity-warning-color)
            {% elif status == 'minor' %} var(--entity-minor-color)
            {% else %} var(--entity-ok-color)
            {% endif %}
          ;
        }

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.alarm_snapshots
      name: 'Alarm Snapshot Disk Use'
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set status = states('sensor.alarm_snapshots_size_status') %}
              {% if status == 'critical' %} var(--entity-critical-color)
              {% elif status == 'severe' %} var(--entity-severe-color)
              {% elif status == 'warning' %} var(--entity-warning-color)
              {% elif status == 'minor' %} var(--entity-minor-color)
              {% else %} var(--entity-ok-color)
              {% endif %}
            ;
          }
    entities:
      - type: call-service
        service: shell_command.alarm_snapshots_purge_all
        icon: mdi:database-sync
        name: 'Purge Motion Capture'
        action_name: 'PURGE'

  - type: custom:fold-entity-row
    padding: 5
    head:
      entity: sensor.tts
      name: 'TTS Cache Disk Use'
      card_mod:
        style: |
          :host {
            --paper-item-icon-color:
              {% set status = states('sensor.tts_size_status') %}
              {% if status == 'critical' %} var(--entity-critical-color)
              {% elif status == 'severe' %} var(--entity-severe-color)
              {% elif status == 'warning' %} var(--entity-warning-color)
              {% elif status == 'minor' %} var(--entity-minor-color)
              {% else %} var(--entity-ok-color)
              {% endif %}
            ;
          }
    entities:
      - type: call-service
        service: shell_command.tts_purge_all
        icon: mdi:database-sync
        name: 'Purge TTS Cache'
        action_name: 'PURGE'
