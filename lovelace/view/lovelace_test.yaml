###############################################################################
## Test View
###############################################################################
title: 'Test'
icon: mdi:ab-testing
path: test
cards:
  # - !include /config/lovelace/history/temp/weather_condition_history.yaml
  # - !include /config/lovelace/graph/temp/temperature_graph.yaml
  # - !include /config/lovelace/graph/temp/apparent_temperature_graph.yaml
  # - !include /config/lovelace/graph/temp/humidity_graph.yaml
  # - !include /config/lovelace/graph/temp/dew_point_graph.yaml
  # - !include /config/lovelace/graph/temp/visibility_graph.yaml
  # - !include /config/lovelace/graph/temp/cloud_cover_graph.yaml
  # - !include /config/lovelace/graph/temp/wind_graph.yaml
  # - !include /config/lovelace/graph/temp/pressure_graph.yaml
  # - !include /config/lovelace/graph/temp/precipitation_graph.yaml

  # - type: shopping-list #IDEA
  #   title: Shopping List

  # - type: entities
  #   entities:
  #     - entity: fan.bathroom_fan # for spinning icon test
  #     - number.multisensor_6_basic_2

  # - type: custom:roku-card
  #   entity: media_player.office_tv

  # - type: entities
  #   entities:
  #     - entity: media_player.radio
  #     - entity: media_player.spotify
  #     - entity: media_player.spotify_hassio
  #     - entity: media_player.spotify_jason
  #     - entity: media_player.spotify_jazzyisj
  #     - entity: media_player.spotify_sheri
  #     - entity: media_player.spotify_sherigagnon
  #     - entity: media_player.youtube
  #     - entity: media_player.ytube_music_player
  #     - entity: media_player.vlc_telnet

  # - !include /config/lovelace/button/weather/wind_bearing_button.yaml
  # - !include /config/lovelace/card/weather/weather_card.yaml

  - type: entities
    entities:
      - entity: variable.saved_messages
        name: 'Saved Messages'

      - type: buttons
        entities:
          - entity: script.play_saved_messages
            name: Play Messages
            tap_action:
              action: call-service
              service: script.play_saved_messages
              serivce_data:
                skip_none: false

          - entity: script.play_last_message
            name: Last Message
            tap_action:
              action: call-service
              service: script.play_last_message

          - entity: script.clear_saved_messages
            name: Delete Messages
            tap_action:
              action: call-service
              service: script.clear_saved_messages
        card_mod:
          style:
            hui-buttons-base $: |
              .ha-scrollbar {
                justify-content: center;
              }

  - type: markdown
    title: Saved Messages
    content: |
      {%- if states('variable.saved_messages')|int(0) > 0 %}
      {%- set msgnum = namespace(value=0) %}
      {%- for key,value in states.variable.saved_messages.attributes.items() %}
      {%- if loop.index % 2 == 1 %}
      {%- set msgnum.value = msgnum.value + 1 %}
      - **{{ value }}**
      <sup>{{ as_datetime(state_attr('variable.saved_messages','msg_time' ~ msgnum.value)).strftime('%A, %B %-d at %-I:%M %p') }}</sup>
      {% endif %}
      {% endfor %}
      {% else %} No messages.
      {% endif %}
