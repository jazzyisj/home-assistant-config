###############################################################################
## Package - ZWave
###############################################################################
homeassistant:
  customize_glob:
    "sensor.*_node_status":
      type: zwave_node_status

  customize:
    alert.zwave_network:
      icon: mdi:z-wave
      category: hass
    alert.zwave_device:
      icon: mdi:z-wave
      category: hass

    sensor.back_door_lock_node_status:
      node_id: 95
    sensor.back_house_potlights_node_status:
      node_id: 104
    sensor.back_yard_tree_lights_node_status:
      node_id: 122
    sensor.back_yard_garden_lights_node_status:
      node_id: 188
    sensor.bathroom_fan_node_status:
      node_id: 153
    sensor.bathroom_sensor_node_status:
      node_id: 24
    sensor.bathroom_shower_light_node_status:
      node_id: 158
    sensor.bathroom_vanity_light_node_status:
      node_id: 223
    sensor.bathroom_vanity_light_rgb_bulb_1_node_status:
      node_id: 224
    sensor.bathroom_vanity_light_rgb_bulb_2_node_status:
      node_id: 225
    sensor.bedroom_fan_node_status:
      node_id: 155
    sensor.bedroom_fan_light_node_status:
      node_id: 160
    sensor.bedroom_potlights_node_status:
      node_id: 192
    sensor.dining_room_light_node_status:
      node_id: 159
    sensor.dining_room_rgb_light_node_status:
      node_id: 7
    sensor.dining_room_potlights_node_status:
      node_id: 112
    sensor.fireplace_node_status:
      node_id: 161
    sensor.front_door_lock_node_status:
      node_id: 219
    sensor.front_house_potlights_node_status:
      node_id: 124
    sensor.front_porch_light_node_status:
      node_id: 123
    sensor.garage_door_lock_node_status:
      node_id: 212
    sensor.garage_sensor_node_status:
      node_id: 97
    sensor.hallway_potlights_node_status:
      node_id: 111
    sensor.kitchen_sink_light_node_status:
      node_id: 210
    sensor.kitchen_potlights_node_status:
      node_id: 113
    sensor.living_room_cove_light_node_status:
      node_id: 198
    sensor.living_room_fan_node_status:
      node_id: 226
    sensor.living_room_fan_light_node_status:
      node_id: 135
    sensor.living_room_potlights_node_status:
      node_id: 134
    sensor.master_bedroom_light_node_status:
      node_id: 228
    sensor.office_fan_node_status:
      node_id: 154
    sensor.office_fan_light_node_status:
      node_id: 147
    sensor.office_potlights_node_status:
      node_id: 152
    sensor.outside_garage_lights_node_status:
      node_id: 176
    sensor.side_door_lock_node_status:
      node_id: 227
    sensor.side_entrance_light_node_status:
      node_id: 120

alert:
  zwave_network:
    name: "ZWave Network"
    title: "ZWave Network Offline"
    message: "The Z-Wave network is offline."
    done_message: clear_notification
    entity_id: binary_sensor.zwave_network_alert
    state: "on"
    repeat: 60
    notifiers: jason
    data:
      tag: zwave_network
      group: Alert
      channel: Alert
      importance: max
      ttl: 0
      priority: high
      visibility: public
      notification_icon: mdi:z-wave
      icon_url: !secret ZWAVE_ICON
      ledColor: !secret SEVERE_COLOR
      color: !secret SEVERE_COLOR
      vibrationPattern: !secret ALERT_VIBRATION
      actions:
        - title: "Pause Alert"
          action: pause_alert_zwave_network

  zwave_device:
    name: "ZWave Device"
    title: "ZWave Device Offline"
    message: |
      {%- set sensors = states.sensor|selectattr('attributes.type','eq','zwave_node_status')
            |selectattr('state','ne','alive') %}
      {%- for item in sensors %}
          {%- if not loop.first -%}<br/>{%- endif %}
          {{- item.name|replace(': Node Status','')|title }}
      {%- endfor %}
    done_message: clear_notification
    entity_id: binary_sensor.zwave_device_alert
    state: "on"
    repeat: 60
    notifiers: jason
    data:
      tag: zwave_device
      group: Alert
      channel: Alert
      importance: max
      ttl: 0
      priority: high
      visibility: public
      notification_icon: mdi:z-wave
      icon_url: !secret ZWAVE_ICON
      ledColor: !secret SEVERE_COLOR
      color: !secret SEVERE_COLOR
      vibrationPattern: !secret ALERT_VIBRATION
      actions:
        - title: "Pause Alert"
          action: pause_alert_zwave_device
