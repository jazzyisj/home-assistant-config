###############################################################################
## Package - Notify
###############################################################################
notify:
  - name: jason_email
    platform: smtp
    server: smtp.gmail.com
    port: 587
    timeout: 15
    sender: !secret HASSIO_EMAIL
    encryption: starttls
    username: !secret HASSIO_EMAIL
    password: !secret HASSIO_EMAIL_PASSWORD
    recipient:
      - !secret J_GMAIL_EMAIL
    sender_name: "Home Assistant"

  - name: jason_email_work
    platform: smtp
    server: smtp.gmail.com
    port: 587
    timeout: 15
    sender: !secret HASSIO_EMAIL
    encryption: starttls
    username: !secret HASSIO_EMAIL
    password: !secret HASSIO_EMAIL_PASSWORD
    recipient:
      - !secret J_GMAIL_EMAIL
      - !secret J_WORK_EMAIL
    sender_name: "Home Assistant"

  - platform: html5
    name: "push"
    vapid_pub_key: !secret VAPID_PUBLIC_KEY
    vapid_prv_key: !secret VAPID_PRIVATE_KEY
    vapid_email: !secret J_GMAIL_EMAIL

  - platform: file
    name: "TTS History"
    filename: /config/www/tts_history.txt
    value_template: "{{ value_json }}"

  - platform: tts
    name: "Hass TTS"
    tts_service: tts.google_cloud_say
    media_player: media_player.hass_media_player

  - platform: tts
    name: "Kiosk TTS"
    tts_service: tts.cloud_say
    media_player: media_player.kiosk_internal_player

  - platform: group
    name: "jason"
    services:
      - service: mobile_app_jphone

  - platform: group
    name: "mobile"
    services:
      - service: jason

  - platform: group
    name: "tv"
    services:
      - service: living_room_tv
      - service: bedroom_tv

  - platform: syslog
    name: "log"

  - platform: rest
    name: persistent
    resource: "http://localhost:8123/api/services/persistent_notification/create"
    method: POST_JSON
    headers:
      authorization: !secret HASS_CONFIG
      content-type: "application/json"
      message_param_name: message
      title_param_name: title
      target_param_name: target

  - platform: group 
    name: alert
    services:
      - service: jason
      - service: persistent_notification
        data_template:
          message: "{{ message }}"
          title: "{{ title }}"
          target: "{{ notification_id }}"
