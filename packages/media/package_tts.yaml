###############################################################################
## TTS Announcements Package
## https://www.home-assistant.io/components/tts
###############################################################################
tts:
  # https://www.home-assistant.io/integrations/picotts/
  - platform: picotts

  # https://www.home-assistant.io/integrations/marytts/
  - platform: marytts
    host: !secret HASSIO_IP # http://localhost:59125/
    port: 59125
    codec: WAVE_FILE
    voice: cmu-slt-hsmm #ISSUE doesn't work dfki-poppy-hsmm
    language: en_GB # en_US

  # https://www.home-assistant.io/components/tts.amazon_polly/
  # https://aws.amazon.com/polly/
  # https://docs.aws.amazon.com/polly/latest/dg/supported-ssml.html
  - platform: amazon_polly
    aws_access_key_id: !secret AWS_ACCESS_KEY_ID
    aws_secret_access_key: !secret AWS_POLLY_ACCESS_KEY
    region_name: us-east-1 # eu-west-2
    text_type: text
    voice: Nicole
    output_format: mp3
    sample_rate: 22050
    engine: standard

  # https://www.home-assistant.io/integrations/google_translate/
  - platform: google_translate
    service_name: google_say

  # https://www.home-assistant.io/integrations/google_cloud/
  # https://cloud.google.com/text-to-speech/docs/voices
  - platform: google_cloud
    key_file: HASSIO-ba9d51703228.json
    encoding: mp3
    voice: en-IN-Wavenet-D
    speed: 0.95
    pitch: 1.0
    gain: 1.0
    profiles:
      - telephony-class-application
      - medium-bluetooth-speaker-class-device

variable:
  tts_saved_messages:
    value: 0
    attributes:
      friendly_name: 'Saved Messages'
      icon: mdi:account-voice
    restore: true

input_boolean:
  tts_enabled:
    name: 'TTS Announcements Enabled'
    icon: mdi:account-voice
  hass_tts_enabled:
    name: 'Hass TTS Enabled'
    icon: mdi:account-voice
  browser_tts_enabled:
    name: 'Browser TTS Enabled'
    icon: mdi:account-voice
  tts_alerts:
    name: 'TTS Alerts'
    icon: mdi:alert
  tts_playing:
    name: 'TTS Announcement Playing'
    icon: mdi:account-voice
    initial: false
  tts_muted:
    initial: false

input_text:
  tts_media_player:
  tts_media_player_quiet:
  tts_media_player_night:
  tts_media_player_alert:

input_select:
  tts_media_player:
    name: 'TTS Announcement Media Player'
    icon: mdi:speaker-wireless
    options:
      - None
  tts_media_player_quiet:
    name: 'TTS Announcement Media Player Quiet'
    icon: mdi:speaker-wireless
    options:
      - None
  tts_media_player_night:
    name: 'TTS Announcement Media Player Night'
    icon: mdi:speaker-wireless
    options:
      - None
  tts_media_player_alert:
    name: 'TTS Alert Media Player'
    icon: mdi:speaker-wireless
    options:
      - None
  tts_cloud_voice:
    name: 'Nabu Casa Cloud Voice'
    icon: mdi:account-voice
    options:
      - English (Australia) en-AU Female
      - English (Australia) en-AU Male
      - English (Canada) en-CA Female
      - English (India) en-IN Female
      - English (Ireland) en-IE Female
      - English (United Kingdom) en-GB Female
      - English (United Kingdom) en-GB Male
      - English (United States) en-US Male
      - English (United States) en-US Female
  tts_service:
    name: 'TTS Service'
    icon: mdi:account-voice
    options:
      - Nabu Casa
      - Mary TTS
      - Pico TTS
      - Google Translate
      - Google Cloud
      - Amazon Polly

input_number:
  tts_volume:
    name: 'Normal Volume'
    icon: mdi:volume-high
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
  tts_volume_quiet:
    name: 'Quiet Volume'
    icon: mdi:volume-medium
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
  tts_volume_night:
    name: 'Night Volume'
    icon: mdi:volume-low
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
  tts_volume_alert:
    name: 'Alert Volume'
    icon: mdi:volume-low
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'

group:
  tts_selected_players: # must be in same order as stored
    entities:
      - input_select.tts_media_player
      - input_select.tts_media_player_quiet
      - input_select.tts_media_player_night
      - input_select.tts_media_player_alert

  tts_stored_players: # must be in same order as selected
    entities:
      - input_text.tts_media_player
      - input_text.tts_media_player_quiet
      - input_text.tts_media_player_night
      - input_text.tts_media_player_alert

sensor:
  - platform: file
    name: 'TTS Last Message'
    file_path: /config/www/tts_history.txt
