#######################################################################################################################
## Hydrawise Sprinkler Package
#######################################################################################################################
homeassistant:
  customize:
    binary_sensor.sprinklers_status:
      friendly_name: Hydrawise Controller

    switch.back_garden_le_automatic_watering:
      friendly_name: Back Garden Left Auto Water
    switch.back_garden_le_manual_watering:
      friendly_name: Back Garden Left Manual Water
    sensor.back_garden_le_watering_time:
      friendly_name: Back Garden Left Watering Time
    sensor.back_garden_le_next_cycle:
      friendly_name: Back Garden Left Next Cycle
    binary_sensor.back_garden_le_watering:
      friendly_name: Back Garden Left Watering

    switch.back_garden_ri_automatic_watering:
      friendly_name: Back Garden Right Auto Water
    switch.back_garden_ri_manual_watering:
      friendly_name: Back Garden Right Manual Water
    sensor.back_garden_ri_watering_time:
      friendly_name: Back Garden Right Watering Time
    sensor.back_garden_ri_next_cycle:
      friendly_name: Back Garden Right Next Cycle
    binary_sensor.back_garden_ri_watering:
      friendly_name: Back Garden Right Watering

    switch.center_garden_automatic_watering:
      friendly_name: Center Garden Left Auto Water
    switch.center_garden_manual_watering:
      friendly_name: Center Garden Left Manual Water
    sensor.center_garden_watering_time:
      friendly_name: Center Garden Left Watering Time
    sensor.center_garden_next_cycle:
      friendly_name: Center Garden Left Next Cycle
    binary_sensor.center_garden_watering:
      friendly_name: Center Garden Left Watering

    switch.center_garden_automatic_watering_2:
      friendly_name: Center Garden Right Auto Water
    switch.center_garden_manual_watering_2:
      friendly_name: Center Garden Right Manual Water
    sensor.center_garden_watering_time_2:
      friendly_name: Center Garden Right Watering Time
    sensor.center_garden_next_cycle_2:
      friendly_name: Center Garden Right Next Cycle
    binary_sensor.center_garden_watering_2:
      friendly_name: Center Garden Right Watering

#######################################################################################################################
## Hydrawise Integration
#######################################################################################################################
hydrawise:
  access_token: !secret HYRDRAWISE_API

binary_sensor:
#######################################################################################################################
## Hydrawise Platform Binary Sensors
#######################################################################################################################
  - platform: hydrawise

#######################################################################################################################
## Template Binary Sensors
#######################################################################################################################
  - platform: template
    sensors:
#######################################################################################################################
## Hydrawise Controller Connected - sprinkler_status unknown when not conneted
#######################################################################################################################
      hyrdrawise_connected:
        friendly_name: Hyrdawise Connected
        unique_id: hyrdrawise_connected
        device_class: connectivity
        icon_template: "{{ 'mdi:sprinkler-variant' if is_state('binary_sensor.hyrdrawise_connected','on') else 'mdi:alert-circle' }}"
        value_template: "{{ not states('binary_sensor.sprinklers_status') in ['unknown','unavailable','none'] }}"

      hyrdrawise_connected_alert:
        friendly_name: Hyrdwawise
        unique_id: hyrdrawise_connected_alert
        icon_template: mdi:sprinkler-variant
        value_template: "{{ is_state('binary_sensor.hyrdrawise_connected','off') }}"

switch:
#######################################################################################################################
## Hydrawise Platform Switches
#######################################################################################################################
  - platform: hydrawise
    monitored_conditions:
      - auto_watering
      - manual_watering
    # watering_minutes: 20 #BUG does not work contrary to docs

sensor:
#######################################################################################################################
## Hydrawise Platform Sensors
#######################################################################################################################
  - platform: hydrawise

group:
#######################################################################################################################
## Sprinkler Zone Groups
#######################################################################################################################

  sprinker1:
    name: Front Boulevard
    icon: mdi:fountain
    entities:
      - switch.front_boulevard_manual_watering
      - switch.front_boulevard_automatic_watering
      - binary_sensor.front_boulevard_watering
      - sensor.front_boulevard_watering_time
      - sensor.front_boulevard_next_cycle

  sprinker2:
    name: Front Sidewalk
    icon: mdi:fountain
    entities:
      - switch.front_sidewalk_manual_watering
      - switch.front_sidewalk_automatic_watering
      - binary_sensor.front_sidewalk_watering
      - sensor.front_sidewalk_watering_time
      - sensor.front_sidewalk_next_cycle

  sprinker3:
    name: Front House
    icon: mdi:fountain
    entities:
      - switch.front_house_manual_watering
      - switch.front_house_automatic_watering
      - binary_sensor.front_house_watering
      - sensor.front_house_watering_time
      - sensor.front_house_next_cycle

  sprinker4:
    name: Front Garden
    icon: mdi:fountain
    entities:
      - switch.front_garden_manual_watering
      - switch.front_garden_automatic_watering
      - binary_sensor.front_garden_watering
      - sensor.front_garden_watering_time
      - sensor.front_garden_next_cycle

  sprinker5:
    name: Side Garden
    icon: mdi:fountain
    entities:
      - switch.side_garden_manual_watering
      - switch.side_garden_automatic_watering
      - binary_sensor.side_garden_watering
      - sensor.side_garden_watering_time
      - sensor.side_garden_next_cycle

  sprinker6:
    name: Center Garden Left
    icon: mdi:fountain
    entities:
      - switch.center_garden_manual_watering
      - switch.center_garden_automatic_watering
      - binary_sensor.center_garden_watering
      - sensor.center_garden_watering_time
      - sensor.center_garden_next_cycle

  sprinker7:
    name: Center Garden Right
    icon: mdi:fountain
    entities:
      - switch.center_garden_manual_watering_2
      - switch.center_garden_automatic_watering_2
      - binary_sensor.center_garden_watering_2
      - sensor.center_garden_watering_time_2
      - sensor.center_garden_next_cycle_2

  sprinker8:
    name: Back Grass Left
    icon: mdi:fountain
    entities:
      - switch.back_grass_lef_manual_watering
      - switch.back_grass_lef_automatic_watering
      - binary_sensor.back_grass_lef_watering
      - sensor.back_grass_lef_watering_time
      - sensor.back_grass_lef_next_cycle

  sprinker9:
    name: Back Grass Right
    icon: mdi:fountain
    entities:
      - switch.back_grass_rig_manual_watering
      - switch.back_grass_rig_automatic_watering
      - binary_sensor.back_grass_rig_watering
      - sensor.back_grass_rig_watering_time
      - sensor.back_grass_rig_next_cycle

  sprinker10:
    name: Back Grass Right
    icon: mdi:fountain
    entities:
      - switch.back_grass_rig_manual_watering
      - switch.back_grass_rig_automatic_watering
      - binary_sensor.back_grass_rig_watering
      - sensor.back_grass_rig_watering_time
      - sensor.back_grass_rig_next_cycle

  sprinker11:
    name: Back Garden Right
    icon: mdi:fountain
    entities:
      - switch.back_garden_ri_manual_watering
      - switch.back_garden_ri_automatic_watering
      - binary_sensor.back_garden_ri_watering
      - sensor.back_garden_ri_watering_time
      - sensor.back_garden_ri_next_cycle

  sprinker12:
    name: Back Garden Left
    icon: mdi:fountain
    entities:
      - switch.back_garden_le_manual_watering
      - switch.back_garden_le_automatic_watering
      - binary_sensor.back_garden_le_watering
      - sensor.back_garden_le_watering_time
      - sensor.back_garden_le_next_cycle