###############################################################################
## Package - IQVIA
###############################################################################
homeassistant:
  customize:
    alert.iqvia_connected:
      icon: mdi:virus
      category: weather

    alert.allergy_risk:
      icon: mdi:flower
      category: weather

    alert.asthma_risk:
      icon: mdi:lungs
      category: weather

    alert.flu_risk:
      icon: mdi:virus
      category: weather

    binary_sensor.asthma_risk_alert:
      icon: mdi:lungs
    sensor.asthma_index_today:
      icon: mdi:lungs
    sensor.asthma_index_tomorrow:
      icon: mdi:lungs
    sensor.asthma_index_forecasted_avg:
      icon: mdi:lungs
    binary_sensor.allergy_risk_alert:
      icon: mdi:lungs
    sensor.allergy_index_today:
      icon: mdi:lungs
    sensor.allergy_index_tomorrow:
      icon: mdi:lungs
    sensor.allergy_index_forecasted_avg:
      icon: mdi:lungs
    sensor.cold_flu_index_today:
      icon: mdi:virus

alert:
  allergy_risk:
    name: 'Allergy Risk'
    title: 'Allergy Risk Alert'
    message: "Allergy Risk Risk Level: {{ states('sensor.allergy_risk_today') }}"
    done_message: clear_notification
    entity_id: binary_sensor.allergy_risk_alert
    state: 'on'
    skip_first: true
    repeat: 10800
    notifiers: jason
    data:
      tag: allergy_risk
      group: General
      channel: Alert
      importance: max
      ttl: 0
      priority: high
      notification_icon: mdi:flower
      icon_url: !secret ALLERGY_ICON
      ledColor: !secret MINOR_COLOR
      color: !secret MINOR_COLOR
      vibrationPattern: !secret ALERT_VIBRATION
      clickAction: !secret POLLEN_FORECAST
      actions:
        - action: pause_allergy_risk
          title: 'Pause Alert'

  asthma_risk:
    name: 'Asthma Risk'
    title: 'Asthma Risk Alert'
    message: "Asthma Risk Risk Level: {{ states('sensor.asthma_risk_today') }}"
    done_message: clear_notification
    entity_id: binary_sensor.asthma_risk_alert
    state: 'on'
    skip_first: true
    repeat: 10800
    notifiers: jason
    data:
      tag: asthma_risk
      group: General
      channel: Alert
      importance: max
      ttl: 0
      priority: high
      notification_icon: mdi:lungs
      icon_url: !secret ASTHMA_ICON
      ledColor: !secret MINOR_COLOR
      color: !secret MINOR_COLOR
      vibrationPattern: !secret ALERT_VIBRATION
      clickAction: !secret ASTHMA_FORECAST
      actions:
        - action: pause_asthma_risk
          title: 'Pause Alert'

  flu_risk:
    name: 'Flu Risk'
    title: 'Flu Risk Alert'
    message: "Flu Risk Risk Level: {{ states('sensor.flu_risk_today')|title }}"
    done_message: clear_notification
    entity_id: binary_sensor.flu_risk_alert
    state: 'on'
    skip_first: true
    repeat: 10800
    notifiers: jason
    data:
      tag: flu_risk
      group: General
      channel: Alert
      importance: max
      ttl: 0
      priority: high
      notification_icon: mdi:virus
      icon_url: !secret FLU_ICON
      ledColor: !secret MINOR_COLOR
      color: !secret MINOR_COLOR
      vibrationPattern: !secret ALERT_VIBRATION
      clickAction: !secret FLU_FORECAST
      actions:
        - action: pause_flu_risk
          title: 'Pause Alert'

  iqvia_connected:
    name: 'IQVIA Connected'
    entity_id: binary_sensor.iqvia_connected_alert
    state: 'on'
    notifiers: log
    skip_first: false
    repeat: 999999
    data:
      tag: iqvia_connected
