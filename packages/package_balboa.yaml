#######################################################################################################################
## Package - Balboa Spa
#######################################################################################################################
binary_sensor:
  - platform: template
    sensors:
      balboa_connected:
        friendly_name: Balboa Spa
        unique_id: balboa_connected
        icon_template: "{{ 'mdi:spa' if is_state('binary_sensor.balboa_connected','on') else 'mdi:spa-outline' }}"
        device_class: connectivity
        delay_off:
          minutes: 30
        value_template: "{{ not states('climate.spa')|lower in ['unknown','unavailable','none'] }}"

      balboa_connected_alert:
        friendly_name: Balboa Spa
        unique_id: balboa_connected_alert
        icon_template: mdi:spa
        value_template: "{{ is_state('binary_sensor.balboa_connected','off') and is_state('binary_sensor.alerts_enabled','on') }}"


sensor:
  - platform: template
    sensors:
      spa_temperature:
        friendly_name: Spa Temperature
        unique_id: spa_temperature
        icon_template: mdi:thermometer
        unit_of_measurement: '°'
        value_template: "{{ state_attr('climate.spa','current_temperature') }}"


  - platform: template
    sensors:
      spa_target_temperature:
        friendly_name: Spa Target Temperature
        unique_id: spa_target_temperature
        icon_template: mdi:thermometer
        unit_of_measurement: '°'
        value_template: "{{state_attr('climate.spa','temperature') }}"
