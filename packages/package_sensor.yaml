###############################################################################
## Package - Sensor
###############################################################################
input_boolean:
  sensor_alerts:
    name: 'Sensor Alerts'
    icon: mdi:alert

  sensor_automation:
    name: 'Sensor Automation'
    icon: mdi:sync-alert

sensor:
  - platform: history_stats # https://www.home-assistant.io/integrations/history_stats/
    name: 'Indoor Sump Count'
    entity_id: binary_sensor.indoor_sump
    state: 'on'
    type: count
    start: "{{ today_at(states('input_datetime.day_reset')) }}"
    duration:
      hours: 24

  - platform: history_stats
    name: 'Indoor Sump Hours'
    entity_id: binary_sensor.indoor_sump
    state: 'on'
    type: time
    #ISSUE error on template reload
    #ERROR (MainThread) [homeassistant.helpers.entity] Update for sensor.indoor_sump_hours fails
    #TypeError: float() argument must be a string or a number, not 'NoneType'
    start: "{{ states('button.indoor_sump_hours_reset')|as_datetime }}"
    end: "{{ states('button.indoor_sump_hours_reset')|as_datetime + timedelta(days=30) }}"

  - platform: history_stats
    name: 'Outdoor Sump Count'
    entity_id: binary_sensor.outdoor_sump
    state: 'on'
    type: count
    start: "{{ today_at(states('input_datetime.day_reset')) }}"
    duration:
      hours: 24

  - platform: history_stats
    name: 'Outdoor Sump Hours'
    entity_id: binary_sensor.outdoor_sump
    state: 'on'
    type: time
    start: "{{ states('button.outdoor_sump_hours_reset')|as_datetime }}"
    end: "{{ states('button.outdoor_sump_hours_reset')|as_datetime + timedelta(days=30) }}"
