###############################################################################
## Package - Lights
###############################################################################
homeassistant:
  customize:
    sensor.garage_sensor_illuminance:
      device_class: illuminance
    sensor.bathroom_sensor_illuminance:
      device_class: illuminance

    # group lights
    light.upstairs_potlights:
      type: group
    light.garage_lights:
      type: group

    # rgb lights (master = single/group controller, slave = group member)
    light.dining_room_rgb_light:
      type: bulb
      rgb_light: master
    light.bathroom_vanity_rgb_light:
      type: bulb
      rgb_light: master
    light.bathroom_vanity_light_rgb_bulb_1:
      type: bulb
      rgb_light: slave
    light.bathroom_vanity_light_rgb_bulb_2:
      type: bulb
      rgb_light: slave

    # switch lights
    switch.back_yard_garden_light:
      led_notify: true
      led_presence: true
      led_garage: true
      led_reminder: true

    switch.kitchen_sink_light:
      led_notify: true
      led_presence: true
      led_scene: true
      led_reminder: true

    light.back_yard_garden_light:
      type: switch
    light.kitchen_sink_light:
      type: switch

    # dimmer lights
    light.back_house_potlights:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true
      led_scene: true

    light.back_yard_tree_lights:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_scene: true

    light.bathroom_vanity_light:
      type: dimmer
      rgb_light: control
      led_notify: true
      led_alarm: true

    light.bathroom_shower_light:
      type: dimmer
      led_notify: true
      led_presence: true
      led_shower: true

    light.bedroom_fan_light:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    light.bedroom_potlights:
      type: dimmer
      led_notify: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.dining_room_light:
      type: dimmer
      rgb_light: control
      led_notify: true
      led_alarm_clock: true
      led_reminder: true
      led_scene: true
      led_weather: true

    light.dining_room_potlights:
      type: dimmer
      led_notify: true
      led_hass: true
      led_media: true

    light.front_house_potlights:
      type: dimmer
      led_notify: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.front_porch_light:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    light.hallway_potlights:
      type: dimmer
      led_notify: true
      led_presence: true

    light.kitchen_potlights:
      type: dimmer
      led_notify: true
      led_alarm: true

    light.living_room_cove_light:
      type: dimmer
      led_notify: true
      led_alarm_clock: true
      led_hass: true
      led_presence: true
      led_reminder: true
      led_weather: true

    light.living_room_fan_light:
      type: dimmer
      led_notify: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.living_room_potlights:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    light.master_bedroom_light:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_alarm_clock: true
      led_reminder: true
      led_scene: true

    light.office_fan_light:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    light.office_potlights:
      type: dimmer
      led_notify: true
      led_alarm_clock: true
      led_hass: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.outside_garage_lights:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    light.side_entrance_light:
      type: dimmer
      led_notify: true
      led_alarm: true
      led_garage: true

    timer.back_garden_light:
      type: light
    timer.bathroom_shower_light:
      type: light
    timer.bathroom_vanity_light:
      type: light
    timer.back_house_potlights:
      type: light
    timer.back_yard_tree_lights:
      type: light
    timer.bedroom_fan_light:
      type: light
    timer.bedroom_potlights:
      type: light
    timer.dining_room_light:
      type: light
    timer.dining_room_potlights:
      type: light
    timer.front_house_potlights:
      type: light
    timer.front_porch_light:
      type: light
    timer.hallway_potlights:
      type: light
    timer.kitchen_potlights:
      type: light
    timer.kitchen_sink_light:
      type: light
    timer.living_room_fan_light:
      type: light
    timer.living_room_potlights:
      type: light
    timer.master_bedroom_light:
      type: light
    timer.office_fan_light:
      type: light
    timer.office_potlights:
      type: light
    timer.outside_garage_lights:
      type: light
    timer.side_entrance_light:
      type: light

color_extractor:

light:
  #ZWAVE - platform: switch
  #   name: 'Back Yard Garden Light'
  #   entity_id: switch.back_yard_garden_light

  - platform: switch
    name: 'Kitchen Sink Light'
    entity_id: switch.kitchen_sink_light

  - platform: group
    name: 'Bathroom Vanity RGB Light'
    unique_id: bathroom_vanity_rgb_light
    entities:
      - light.bathroom_vanity_light_rgb_bulb_1
      - light.bathroom_vanity_light_rgb_bulb_2

  - platform: group
    name: 'Garage Lights'
    unique_id: garage_lights
    entities:
      - light.side_entrance_light

  - platform: group
    name: 'Upstairs Potlights'
    unique_id: upstairs_potlights
    entities:
      - light.dining_room_potlights
      - light.hallway_potlights
      - light.kitchen_potlights

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Bathroom Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Bathroom Vanity Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Dining Room Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Hallway Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Kitchen Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Laundry Room Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Family Room Potlights'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Shower Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Vanity Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bedroom Closet Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bedroom Hallway Light'

input_boolean:
  day_lights_enabled:
    name: 'Day Lights Enabled'
    icon: mdi:brightness-5

  light_alerts:
    name: 'Light Alerts'
    icon: mdi:alert

  light_automation:
    name: 'Light Automation'
    icon: mdi:sync-alert

  night_lights_enabled:
    name: 'Night Lights Enabled'
    icon: mdi:brightness-auto

  night_lights_override:
    name: 'Night Lights Override'
    icon: mdi:brightness-4
    initial: false

input_number:
  bathroom_illuminance_threshold:
    name: 'Bathroom Illluminance Threshold'
    icon: mdi:brightness-5
    unit_of_measurement: lx
    min: 0
    max: 500
    step: 10

  day_illuminance_threshold:
    name: 'Day Illluminance Threshold'
    icon: mdi:brightness-5
    unit_of_measurement: lx
    min: 0
    max: 100000
    step: 100

  night_illuminance_threshold:
    name: 'Night Illluminance Threshold'
    icon: mdi:brightness-3
    unit_of_measurement: lx
    min: 0
    max: 100000
    step: 100

  lights_off_sun_elevation:
    name: 'Lights Off Sun Elevation'
    icon: mdi:weather-sunset-up
    unit_of_measurement: '°'
    min: -20
    max: 20
    step: 1

  lights_on_sun_elevation:
    name: 'Lights On Sun Elevation'
    icon: mdi:weather-sunset-down
    unit_of_measurement: '°'
    min: -20
    max: 20
    step: 1

timer:
  arrive_home_lights:
    name: 'Arrive Home Lights'
    icon: mdi:progress-clock
    duration:
      minutes: 10

  back_garden_light:
    name: 'Back Garden Light'
    icon: mdi:progress-clock
    duration:
      minutes: 30

  back_house_potlights:
    name: 'Back House Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  back_yard_tree_lights:
    name: 'Back Yard Tree Lights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  bathroom_shower_light:
    name: 'Bathroom Shower Light'
    icon: mdi:progress-clock
    duration:
      minutes: 30

  bathroom_vanity_light:
    name: 'Bathroom Vanity Light'
    icon: mdi:progress-clock
    duration:
      minutes: 15

  bedroom_fan_light:
    name: 'Bedroom Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  bedroom_potlights:
    name: 'Bedroom Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  dining_room_light:
    name: 'Dining Room Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  dining_room_potlights:
    name: 'Dining Room Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  front_house_potlights:
    name: 'Front House Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  front_porch_light:
    name: 'Front Porch Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  hallway_potlights:
    name: 'Hallway Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  kitchen_potlights:
    name: 'Kitchen Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  kitchen_sink_light:
    name: 'Kitchen Sink Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  living_room_fan_light:
    name: 'Living Room Fan Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  living_room_potlights:
    name: 'Living Room Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 4

  master_bedroom_light:
    name: 'Master Bedroom Light'
    icon: mdi:progress-clock
    duration:
      hours: 2
  office_fan_light:
    name: 'Office Fan Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  office_potlights:
    name: 'Office Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  outside_garage_lights:
    name: 'Outside Garage Lights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  side_entrance_light:
    name: 'Side Entrance Light'
    icon: mdi:progress-clock
    duration:
      minutes: 15
group:
  light_in_use_automations:
    entities:
      - automation.light_back_house_potlights_in_use
      - automation.light_back_yard_garden_light_in_use
      - automation.light_back_yard_tree_lights_in_use
      - automation.light_bathroom_shower_light_in_use
      - automation.light_bathroom_vanity_light_in_use
      - automation.light_bedroom_fan_light_in_use
      - automation.light_bedroom_potlights_in_use
      - automation.light_dining_room_light_in_use
      - automation.light_dining_room_potlights_in_use
      - automation.light_front_house_potlights_in_use
      - automation.light_front_porch_light_in_use
      - automation.light_hallway_potlights_in_use
      - automation.light_kitchen_potlights_in_use
      - automation.light_kitchen_sink_light_in_use
      - automation.light_living_room_fan_light_in_use
      - automation.light_living_room_potlights_in_use
      - automation.light_master_bedroom_light_in_use
      - automation.light_office_fan_light_in_use
      - automation.light_office_potlights_in_use
      - automation.light_outside_garage_lights_in_use
      - automation.light_side_entrance_light_in_use

  adaptive_lighting_switches:
    entities:
      - switch.adaptive_lighting_bedroom_lights
      - switch.adaptive_lighting_main_lights
      - switch.adaptive_lighting_outside_lights
      - switch.adaptive_lighting_rgb_lights

  adaptive_lighting_sleep_switches:
    entities:
      - switch.adaptive_lighting_sleep_mode_bedroom_lights
      - switch.adaptive_lighting_sleep_mode_main_lights
      - switch.adaptive_lighting_sleep_mode_rgb_lights

switch:
  - platform: template
    switches:
      adaptive_lighting:
        friendly_name: 'Adaptive Lighting'
        value_template: >
          {{ is_state('switch.adaptive_lighting_bedroom_lights','on')
              and is_state('switch.adaptive_lighting_main_lights','on')
              and is_state('switch.adaptive_lighting_outside_lights','on')
              and is_state('switch.adaptive_lighting_rgb_lights','on') }}
        turn_on:
          - service: switch.turn_on
            target:
              entity_id: group.adaptive_lighting_switches

        turn_off:
          - service: switch.turn_off
            target:
              entity_id: group.adaptive_lighting_switches
