###############################################################################
## Package - Lights
###############################################################################
homeassistant:
  customize:
    sensor.garage_sensor_illuminance:
      device_class: illuminance
    sensor.bathroom_sensor_illuminance:
      device_class: illuminance

    switch.light_flux_dining_room:
      icon: mdi:google-nearby
    switch.light_flux_bathroom:
      icon: mdi:google-nearby
    switch.light_flux_bedroom:
      icon: mdi:google-nearby

    # group lights
    light.upstairs_potlights:
      light_group: true
    light.garage_lights:
      light_group: true

    # rgb lights (master = single/group controller, slave = group member)
    light.dining_room_rgb_light:
      rgb_light: master
    light.bathroom_vanity_rgb_light:
      rgb_light: master
    light.bathroom_vanity_light_rgb_bulb_1:
      rgb_light: slave
    light.bathroom_vanity_light_rgb_bulb_2:
      rgb_light: slave
    light.bedroom_rgb_light:
      rgb_light: master
    light.bedroom_light_rgb_bulb_1:
      rgb_light: slave
    light.bedroom_light_rgb_bulb_2:
      rgb_light: slave

    # switch lights
    switch.back_yard_garden_light:
      friendly_name: Back Garden
      notify_led: true
      led_presence: true
      led_garage: true
      led_reminder: true

    switch.kitchen_sink_light:
      friendly_name: Kitchen Sink
      notify_led: true
      led_presence: true
      led_scene: true
      led_reminder: true

    light.back_yard_garden_light:
      type: switch
    light.kitchen_sink_light:
      type: switch

    # dimmer lights
    light.back_house_potlights:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true
      led_scene: true

    light.back_yard_tree_lights:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_scene: true

    light.bathroom_vanity_light:
      type: dimmer
      rgb_light: control
      notify_led: true
      led_alarm: true

    light.bathroom_shower_light:
      type: dimmer
      notify_led: true
      led_presence: true
      led_shower: true

    light.bedroom_light:
      type: dimmer
      rgb_light: control
      notify_led: true
      led_alarm: true
      led_garage: true

    light.bedroom_potlights:
      type: dimmer
      notify_led: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.dining_room_light:
      type: dimmer
      rgb_light: control
      notify_led: true
      led_alarm_clock: true
      led_reminder: true
      led_scene: true
      led_weather: true

    light.dining_room_potlights:
      type: dimmer
      notify_led: true
      led_hass: true
      led_media: true

    light.front_house_potlights:
      type: dimmer
      notify_led: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.front_porch_light:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true

    light.hallway_potlights:
      type: dimmer
      notify_led: true
      led_presence: true

    light.kitchen_potlights:
      type: dimmer
      notify_led: true
      led_alarm: true

    light.living_room_cove_light:
      type: dimmer
      notify_led: true
      led_alarm_clock: true
      led_hass: true
      led_presence: true
      led_reminder: true
      led_weather: true

    light.living_room_light:
      type: dimmer
      notify_led: true
      led_alarm_clock: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.living_room_potlights:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true

    light.master_bedroom_light:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_alarm_clock: true
      led_reminder: true
      led_scene: true

    light.office_light:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true

    light.office_potlights:
      type: dimmer
      notify_led: true
      led_alarm_clock: true
      led_hass: true
      led_presence: true
      led_reminder: true
      led_scene: true

    light.outside_garage_lights:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true

    light.side_entrance_light:
      type: dimmer
      notify_led: true
      led_alarm: true
      led_garage: true

    timer.side_entrance_light:
      type: light
    timer.kitchen_potlights:
      type: light
    timer.kitchen_sink_light:
      type: light
    timer.dining_room_light:
      type: light
    timer.dining_room_potlights:
      type: light
    timer.living_room_light:
      type: light
    timer.living_room_potlights:
      type: light
    timer.hallway_potlights:
      type: light
    timer.bathroom_vanity_light:
      type: light
    timer.bathroom_shower_light:
      type: light
    timer.office_light:
      type: light
    timer.office_potlights:
      type: light
    timer.bedroom_light:
      type: light
    timer.bedroom_potlights:
      type: light
    timer.master_bedroom_light:
      type: light

color_extractor:

light:
  - platform: switch
    name: 'Back Yard Garden Light'
    entity_id: switch.back_yard_garden_light

  - platform: switch
    name: 'Kitchen Sink Light'
    entity_id: switch.kitchen_sink_light

  - platform: group
    name: 'Garage Lights'
    unique_id: garage_lights
    entities:
      - light.side_entrance_light

  - platform: group
    name: 'Bathroom Vanity RGB Light'
    unique_id: bathroom_vanity_rgb_light
    entities:
      - light.bathroom_vanity_light_rgb_bulb_1
      - light.bathroom_vanity_light_rgb_bulb_2

  - platform: group
    name: 'Bedroom RGB Light'
    unique_id: bedroom_rgb_light
    entities:
      - light.bedroom_light_rgb_bulb_1
      - light.bedroom_light_rgb_bulb_2

  # https://www.home-assistant.io/components/light.group/
  - platform: group
    name: 'Upstairs Potlights'
    unique_id: upstairs_potlights
    entities:
      - light.kitchen_potlights
      - light.dining_room_potlights
      - light.hallway_potlights

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Bathroom Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Bathroom Vanity Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Dining Room Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Hallway Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Kitchen Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Downstairs Laundry Room Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Shower Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Vanity Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bathroom Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Family Room Potlights'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bedroom Closet Light'

  - platform: virtual
    initial_value: 'off'
    name: 'Master Bedroom Hallway Light'

switch:
  - platform: flux
    lights: light.dining_room_rgb_light
    name: 'Light Flux Dining Room'
    start_time: '05:00'
    stop_time: '01:00'
    start_colortemp: 1800
    sunset_colortemp: 2700
    stop_colortemp: 1800
    disable_brightness_adjust: true
    mode: xy
    transition: 30
    interval: 30

  # https://www.home-assistant.io/integrations/flux/
  - platform: flux
    lights: light.bathroom_vanity_rgb_light
    name: 'Light Flux Bathroom'
    start_time: '05:00'
    stop_time: '01:00'
    start_colortemp: 1800
    sunset_colortemp: 2700
    stop_colortemp: 1800
    disable_brightness_adjust: true
    mode: xy
    transition: 30
    interval: 30

  - platform: flux
    lights: light.bedroom_rgb_light
    name: 'Light Flux Bedroom'
    start_time: '05:00'
    stop_time: '01:00'
    start_colortemp: 1800
    sunset_colortemp: 2700
    stop_colortemp: 1800
    disable_brightness_adjust: true
    mode: xy
    transition: 30
    interval: 30

input_boolean:
  auto_light_enabled:
    name: 'Auto Light Enabled'
    icon: mdi:brightness-auto
  auto_light_override:
    name: 'Auto Light Override'
    icon: mdi:brightness-4
    initial: false
  illuminance_light_enabled:
    name: 'Illuminance Light Enabled'
    icon: mdi:brightness-5
  light_alerts:
    name: 'Light Alerts'
    icon: mdi:alert
  light_automation:
    name: 'Light Automation'
    icon: mdi:sync-alert

input_number:
  bathroom_illuminance_threshold:
    name: 'Bathroom Illluminance Threshold'
    icon: mdi:brightness-5
    unit_of_measurement: lux
    min: 0
    max: 500
    step: 10

  illuminance_threshold:
    name: 'Illluminance Threshold'
    icon: mdi:brightness-5
    unit_of_measurement: lux
    min: 0
    max: 20000
    step: 100

  lighting_off_sun_elevation:
    name: 'Lights Off Sun Elevation'
    icon: mdi:weather-sunset-up
    unit_of_measurement: '°'
    min: -20
    max: 20
    step: 1

  lighting_on_sun_elevation:
    name: 'Lights On Sun Elevation'
    icon: mdi:weather-sunset-down
    unit_of_measurement: '°'
    min: -20
    max: 20
    step: 1

timer:
  arrive_home_lights:
    name: 'Arrive Home Lights'
    icon: mdi:progress-clock
    duration:
      minutes: 10

  dining_room_light:
    name: 'Dining Room Light'
    icon: mdi:progress-clock
    duration:
      hours: 4

  dining_room_potlights:
    name: 'Dining Room Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  kitchen_potlights:
    name: 'Kitchen Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 2

  kitchen_sink_light:
    name: 'Kitchen Sink Light'
    icon: mdi:progress-clock
    duration:
      hours: 2

  living_room_light:
    name: 'Living Room Light'
    icon: mdi:progress-clock
    duration:
      hours: 4

  living_room_potlights:
    name: 'Living Room Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 4

  office_light:
    name: 'Office Light'
    icon: mdi:progress-clock
    duration:
      minutes: 60

  office_potlights:
    name: 'Office Potlights'
    icon: mdi:progress-clock
    duration:
      minutes: 60

  side_entrance_light:
    name: 'Side Entrance'
    icon: mdi:progress-clock
    duration:
      minutes: 15

  master_bedroom_light:
    name: 'Master Bedroom Light'
    icon: mdi:progress-clock
    duration:
      minutes: 90

  bathroom_shower_light:
    name: 'Bathroom Shower'
    icon: mdi:progress-clock
    duration:
      minutes: 30

  bathroom_vanity_light:
    name: 'Bathroom Vanity Light'
    icon: mdi:progress-clock
    duration:
      minutes: 15

  bedroom_light:
    name: 'Bedroom Light'
    icon: mdi:progress-clock
    duration:
      minutes: 90

  bedroom_potlights:
    name: 'Bedroom Potlights'
    icon: mdi:progress-clock
    duration:
      minutes: 90

  hallway_potlights:
    name: 'Hallway Potlights'
    icon: mdi:progress-clock
    duration:
      hours: 1

sensor:
  # https://github.com/pnbruckner/ha-sun2
  - platform: sun2
    entity_namespace: Windsor
    latitude: !secret HOME_LAT
    longitude: !secret HOME_LONG
    time_zone: America/Toronto
    elevation: 190
    monitored_conditions:
      - solar_midnight
      - astronomical_dawn
      - nautical_dawn
      - dawn
      - sunrise
      - solar_noon
      - sunset
      - dusk
      - nautical_dusk
      - astronomical_dusk
      - daylight
      - civil_daylight
      - nautical_daylight
      - astronomical_daylight
      - night
      - civil_night
      - nautical_night
      - astronomical_night
      - elevation
      - min_elevation
      - max_elevation
