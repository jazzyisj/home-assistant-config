###############################################################################
## Package - Lights
###############################################################################
homeassistant:
  customize:
    sensor.garage_sensor_illuminance:
      device_class: illuminance
    sensor.bathroom_sensor_illuminance:
      device_class: illuminance

    switch.adaptive_lighting:
      assumed_state: false

    # group lights
    light.upstairs_potlights:
      type: group
    light.garage_lights:
      type: group

    # rgb lights (master = single/group controller, slave = group member)
    light.dining_room_rgb_light:
      type: bulb
      rgb_light: master

    light.bathroom_vanity_rgb_light:
      type: bulb
      rgb_light: master
    light.bathroom_vanity_light_rgb_bulb_1:
      type: bulb
      rgb_light: slave
    light.bathroom_vanity_light_rgb_bulb_2:
      type: bulb
      rgb_light: slave

    # switch lights
    switch.back_yard_garden_lights:
      notify_led: true
      presence_led: true
      garage_led: true
      reminder_led: true

    switch.kitchen_sink_light:
      notify_led: true
      presence_led: true
      scene_led: true
      reminder_led: true

    switch.living_room_cove_light:
      notify_led: true
      led_hass: true
      weather_led: true

    #ZWAVE switch_as_x
    light.back_yard_garden_lights:
      type: switch

    light.kitchen_sink_light:
      type: switch

    light.living_room_cove_light:
      type: switch

    # dimmer lights
    light.back_house_potlights:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.back_yard_tree_lights:
      type: dimmer
      notify_led: true
      alarm_led: true
      scene_led: true

    light.bathroom_vanity_light:
      type: dimmer
      rgb_light: control
      notify_led: true
      alarm_led: true

    light.bathroom_shower_light:
      type: dimmer
      notify_led: true
      presence_led: true
      shower_led: true

    light.bedroom_fan_light:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.bedroom_potlights:
      type: dimmer
      notify_led: true
      alarm_clock_led: true
      presence_led: true
      reminder_led: true
      scene_led: true

    light.dining_room_light:
      type: dimmer
      rgb_light: control
      notify_led: true
      alarm_clock_led: true
      reminder_led: true
      scene_led: true
      weather_led: true

    light.dining_room_potlights:
      type: dimmer
      notify_led: true
      led_hass: true
      media_led: true
      startup_led: true

    light.front_house_potlights:
      type: dimmer
      notify_led: true
      alarm_clock_led: true
      presence_led: true
      reminder_led: true
      scene_led: true

    light.front_porch_light:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.hallway_potlights:
      type: dimmer
      notify_led: true
      presence_led: true

    light.kitchen_potlights:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.living_room_fan_light:
      type: dimmer
      notify_led: true
      alarm_clock_led: true
      presence_led: true
      reminder_led: true
      scene_led: true

    light.living_room_potlights:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.master_bedroom_light:
      type: dimmer
      notify_led: true
      alarm_led: true
      alarm_clock_led: true
      reminder_led: true
      scene_led: true

    light.office_fan_light:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.office_potlights:
      type: dimmer
      notify_led: true
      alarm_clock_led: true
      led_hass: true
      presence_led: true
      reminder_led: true
      scene_led: true

    light.outside_garage_lights:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    light.side_entrance_light:
      type: dimmer
      notify_led: true
      alarm_led: true
      garage_led: true

    timer.back_yard_garden_lights:
      type: light
    timer.bathroom_shower_light:
      type: light
    timer.bathroom_vanity_light:
      type: light
    timer.back_house_potlights:
      type: light
    timer.back_yard_tree_lights:
      type: light
    timer.bedroom_fan_light:
      type: light
    timer.bedroom_potlights:
      type: light
    timer.dining_room_light:
      type: light
    timer.dining_room_potlights:
      type: light
    timer.front_house_potlights:
      type: light
    timer.front_porch_light:
      type: light
    timer.hallway_potlights:
      type: light
    timer.kitchen_potlights:
      type: light
    timer.kitchen_sink_light:
      type: light
    timer.living_room_cove_light:
      type: light
    timer.living_room_fan_light:
      type: light
    timer.living_room_potlights:
      type: light
    timer.master_bedroom_light:
      type: light
    timer.office_fan_light:
      type: light
    timer.office_potlights:
      type: light
    timer.outside_garage_lights:
      type: light
    timer.side_entrance_light:
      type: light

color_extractor:

light:
  - platform: virtual
    initial_value: "off"
    name: "Downstairs Bathroom Light"

  - platform: virtual
    initial_value: "off"
    name: "Downstairs Bathroom Vanity Light"

  - platform: virtual
    initial_value: "off"
    name: "Downstairs Dining Room Light"

  - platform: virtual
    initial_value: "off"
    name: "Downstairs Hallway Light"

  - platform: virtual
    initial_value: "off"
    name: "Downstairs Kitchen Light"

  - platform: virtual
    initial_value: "off"
    name: "Downstairs Laundry Room Light"

  - platform: virtual
    initial_value: "off"
    name: "Family Room Potlights"

  - platform: virtual
    initial_value: "off"
    name: "Master Bathroom Light"

  - platform: virtual
    initial_value: "off"
    name: "Master Bathroom Shower Light"

  - platform: virtual
    initial_value: "off"
    name: "Master Bathroom Vanity Light"

  - platform: virtual
    initial_value: "off"
    name: "Master Bedroom Closet Light"

  - platform: virtual
    initial_value: "off"
    name: "Master Bedroom Hallway Light"

input_boolean:
  day_lights_enabled:
    name: "Day Lights Enabled"
    icon: mdi:brightness-5

  light_alerts:
    name: "Light Alerts"
    icon: mdi:alert

  night_lights_enabled:
    name: "Night Lights Enabled"
    icon: mdi:brightness-auto

  night_lights_override:
    name: "Night Lights Override"
    icon: mdi:brightness-4
    initial: false

input_number:
  bathroom_illuminance_threshold:
    name: "Bathroom Illluminance Threshold"
    icon: mdi:brightness-5
    unit_of_measurement: lx
    min: 0
    max: 250
    step: 10

  day_illuminance_threshold:
    name: "Day Illluminance Threshold"
    icon: mdi:brightness-5
    unit_of_measurement: lx
    min: 0
    max: 10000
    step: 100

  night_illuminance_threshold:
    name: "Night Illluminance Threshold"
    icon: mdi:brightness-3
    unit_of_measurement: lx
    min: 0
    max: 10000
    step: 100

  lights_off_sun_elevation:
    name: "Lights Off Sun Elevation"
    icon: mdi:weather-sunset-up
    unit_of_measurement: "°"
    min: -20
    max: 20
    step: 1

  lights_on_sun_elevation:
    name: "Lights On Sun Elevation"
    icon: mdi:weather-sunset-down
    unit_of_measurement: "°"
    min: -20
    max: 20
    step: 1

timer:
  arrive_home_lights:
    name: "Arrive Home Lights"
    icon: mdi:progress-clock
    duration:
      minutes: 10
    restore: true

  back_garden_light:
    name: "Back Garden Lights"
    icon: mdi:progress-clock
    duration:
      minutes: 30
    restore: true

  back_house_potlights:
    name: "Back House Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  back_yard_tree_lights:
    name: "Back Yard Tree Lights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  bathroom_shower_light:
    name: "Bathroom Shower Light"
    icon: mdi:progress-clock
    duration:
      minutes: 30
    restore: true

  bathroom_vanity_light:
    name: "Bathroom Vanity Light"
    icon: mdi:progress-clock
    duration:
      minutes: 15
    restore: true

  bedroom_fan_light:
    name: "Bedroom Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  bedroom_potlights:
    name: "Bedroom Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  dining_room_light:
    name: "Dining Room Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  dining_room_potlights:
    name: "Dining Room Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  front_house_potlights:
    name: "Front House Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  front_porch_light:
    name: "Front Porch Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  hallway_potlights:
    name: "Hallway Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  kitchen_potlights:
    name: "Kitchen Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  kitchen_sink_light:
    name: "Kitchen Sink Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  living_room_cove_light:
    name: "Living Room Cove Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  living_room_fan_light:
    name: "Living Room Fan Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  living_room_potlights:
    name: "Living Room Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 4
    restore: true

  master_bedroom_light:
    name: "Master Bedroom Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  office_fan_light:
    name: "Office Fan Light"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  office_potlights:
    name: "Office Potlights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  outside_garage_lights:
    name: "Outside Garage Lights"
    icon: mdi:progress-clock
    duration:
      hours: 2
    restore: true

  side_entrance_light:
    name: "Side Entrance Light"
    icon: mdi:progress-clock
    duration:
      minutes: 15
    restore: true

group:
  light_in_use_automations:
    entities:
      - automation.light_back_house_potlights_in_use
      - automation.light_back_yard_garden_lights_in_use
      - automation.light_back_yard_tree_lights_in_use
      - automation.light_bathroom_shower_light_in_use
      - automation.light_bathroom_vanity_light_in_use
      - automation.light_bedroom_fan_light_in_use
      - automation.light_bedroom_potlights_in_use
      - automation.light_dining_room_light_in_use
      - automation.light_dining_room_potlights_in_use
      - automation.light_front_house_potlights_in_use
      - automation.light_front_porch_light_in_use
      - automation.light_hallway_potlights_in_use
      - automation.light_kitchen_potlights_in_use
      - automation.light_kitchen_sink_light_in_use
      - automation.light_living_room_fan_light_in_use
      - automation.light_living_room_potlights_in_use
      - automation.light_master_bedroom_light_in_use
      - automation.light_office_fan_light_in_use
      - automation.light_office_potlights_in_use
      - automation.light_outside_garage_lights_in_use
      - automation.light_side_entrance_light_in_use

  adaptive_lighting_switches:
    entities:
      - switch.adaptive_lighting_bedroom_lights
      - switch.adaptive_lighting_main_lights
      - switch.adaptive_lighting_outside_lights
      - switch.adaptive_lighting_rgb_lights
      - switch.adaptive_lighting_bathroom_lights

  adaptive_lighting_sleep_switches:
    entities:
      - switch.adaptive_lighting_sleep_mode_bedroom_lights
      - switch.adaptive_lighting_sleep_mode_main_lights
      - switch.adaptive_lighting_sleep_mode_rgb_lights
      - switch.adaptive_lighting_outside_lights

switch:
  - platform: template
    switches:
      adaptive_lighting:
        friendly_name: "Adaptive Lighting"
        icon_template: mdi:theme-light-dark
        turn_on:
          - service: switch.turn_on
            target:
              entity_id: group.adaptive_lighting_switches

        turn_off:
          - service: switch.turn_off
            target:
              entity_id: group.adaptive_lighting_switches
