###############################################################################
## Templates - Motion
###############################################################################
- binary_sensor:
    - name: "Motion On"
      unique_id: motion_on
      icon: mdi:motion-sensor
      state: >
        {% set entities = state_attr(this.entity_id,'entity_id') %}
        {{ false if entities == none else entities|count > 0 }}
      attributes:
        entity_id: >
          {{ expand('group.motion_sensors')
              |rejectattr('entity_id','eq','binary_sensor.jlaptop_chrome_internal')
              |selectattr('state','eq','on')
              |map(attribute='entity_id')|list }}

    - name: "Unavailable Motion"
      unique_id: unavailable_motion
      icon: mdi:motion-sensor
      device_class: problem
      state: >
        {% if state_attr(this.entity_id,'entity_id') != none %}
          {{ state_attr(this.entity_id,'entity_id')|count > 0  }}
        {% endif %}
      attributes:
        entity_id: >
          {{ expand('group.motion_sensors')
              |selectattr('state','in',['unknown','unavailable'])
              |selectattr('state','in',['unknown','unavailable'])
              |map(attribute='entity_id')|list }}
