###############################################################################
## Templates - Camera
###############################################################################
- binary_sensor:
    - name: 'NVR Connected'
      unique_id: nvr_connected
      icon: mdi:cctv
      device_class: connectivity
      state: "{{ is_state('device_tracker.lorex_nvr','home') }}"

    - name: 'NVR Connected Alert'
      unique_id: nvr_connected_alert
      icon: mdi:cctv
      delay_on: 60
      state: >
        {{ is_state('binary_sensor.nvr_connected','off')
            and is_state('input_boolean.alarm_alerts','on')
            and is_state('input_boolean.startup_pending','off') }}

    - name: 'Camera Person TTS Alerts'
      unique_id: camera_person_tts_alerts
      icon: mdi:cctv
      state: >
        {% if is_state('binary_sensor.someone_home','on') %}
          {% if camera in ['front door','side door'] %}
            {{ states('alarm_control_panel.master') in ['arming','pending','armed_home','armed_night','armed_away'] }}
          {% else %}
            {{ is_state('binary_sensor.camera_person_tod','on')
                or states('alarm_control_panel.master') in ['arming','pending','armed_home','armed_night','armed_away'] }}
          {% endif %}
        {% else %} false
        {% endif %}

- sensor:
    - name: 'Frigate Clips Size Status'
      unique_id: frigate_clips_size_status
      icon: mdi:account-voice
      state: >
        {% set size = states('sensor.clips')|int(-1) %}
        {% if size > 150 %} critical
        {% elif size > 100 %} severe
        {% elif size > 75 %} warning
        {% elif size > 50 %} minor
        {% else %} ok
        {% endif %}
