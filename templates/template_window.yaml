###############################################################################
## Templates - Window
###############################################################################
- binary_sensor:
    - name: 'Window Open'
      unique_id: window_open
      icon: >
        {{ 'mdi:window-open-variant' if is_state('binary_sensor.window_open','on')
            else 'mdi:window-closed-variant' }}
      state: >
        {% if state_attr('binary_sensor.window_open','entity_id')|lower not in ['unknown','unavailable','none'] %}
          {{ state_attr('binary_sensor.window_open','entity_id')|count > 0 }}
        {% endif %}
      attributes:
        entity_id: >
          {{ expand('group.windows')|selectattr('state','eq','on')
              |map(attribute='entity_id')|list }}

    - name: 'Bedroom Front Window Open Alert'
      unique_id: bedroom_front_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.bedroom_front_window','on') and is_state('input_boolean.bedroom_front_window','on') }}"

    - name: 'Bedroom Side Window Open Alert'
      unique_id: bedroom_side_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.bedroom_side_window','on') and is_state('input_boolean.bedroom_side_window','on') }}"

    - name: 'Downstairs Kitchen Window Open Alert'
      unique_id: downstairs_kitchen_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.downstairs_kitchen_window','on') and is_state('input_boolean.downstairs_kitchen_window','on') }}"

    - name: 'Kitchen Sink Window Open Alert'
      unique_id: kitchen_sink_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.kitchen_sink_window','on') and is_state('input_boolean.kitchen_sink_window','on') }}"

    - name: 'Kitchen Window Open Alert'
      unique_id: kitchen_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.kitchen_window','on') and is_state('input_boolean.kitchen_window','on') }}"

    - name: 'Family Room Window Open Alert'
      unique_id: family_room_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.family_room_window','on') and is_state('input_boolean.family_room_window','on') }}"

    - name: 'Laundry Room Window Open Alert'
      unique_id: laundry_room_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.laundry_room_window','on') and is_state('input_boolean.laundry_room_window','on') }}"

    - name: 'Living Room Window 1 Open Alert'
      unique_id: living_room_window_1_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.living_room_window_1','on') and is_state('input_boolean.living_room_window_1','on') }}"

    - name: 'Living Room Window 2 Open Alert'
      unique_id: living_room_window_2_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.living_room_window_2','on') and is_state('input_boolean.living_room_window_2','on') }}"

    - name: 'Living Room Window 3 Open Alert'
      unique_id: living_room_window_3_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.living_room_window_3','on') and is_state('input_boolean.living_room_window_3','on') }}"

    - name: 'Living Room Window 4 Open Alert'
      unique_id: living_room_window_4_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.living_room_window_3','on') and is_state('input_boolean.living_room_window_3','on') }}"

    - name: 'Master Bathroom Window Open Alert'
      unique_id: master_bathroom_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.master_bathroom_window','on') and is_state('input_boolean.master_bathroom_window','on') }}"

    - name: 'Master Bedroom Window Open Alert'
      unique_id: master_bedroom_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.master_bedroom_window','on') and is_state('input_boolean.master_bedroom_window','on') }}"

    - name: 'Office Window Open Alert'
      unique_id: office_window_open_alert
      device_class: tamper
      state: "{{ is_state('binary_sensor.office_window','on') and is_state('input_boolean.office_window','on') }}"
