###############################################################################
## Templates - Door
###############################################################################
- binary_sensor:
    - name: "Door Open"
      unique_id: door_open
      icon: "{{ 'mdi:door-open' if is_state('binary_sensor.door_open','on') else 'mdi:door' }}"
      state: >
        {% if state_attr('binary_sensor.door_open','entities')|lower not in ['unknown','unavailable','none'] %}
          {{ state_attr('binary_sensor.door_open','entities')|count > 0 }}
        {% endif %}
      attributes:
        entities: >
          {{ states.binary_sensor|selectattr('attributes.device_class','eq','door')
            |selectattr('state','eq','on')|map(attribute='entity_id')|list }}