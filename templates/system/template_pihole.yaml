###############################################################################
## Templates - PiHole
###############################################################################
- binary_sensor:
    - name: 'PiHole Disconnected Alert'
      unique_id: pihole_disconnected_alert
      icon: mdi:pi-hole
      delay_on: "{{ 0 if is_state('binary_sensor.pihole_disconnected_alert','unknown') else 300 }}"
      state: >
        {{ (not is_state('binary_sensor.pi_hole','on')
            or is_state('device_tracker.pi_hole','away'))
            and is_state('input_boolean.network_alerts','on')
            and is_state('input_boolean.startup_pending','off') }}

    - name: 'PiHole Disabled Alert'
      unique_id: pihole_disabled_alert
      icon: mdi:pi-hole
      delay_on: "{{ 0 if is_state('binary_sensor.pihole_disabled_alert','unknown') else 3600 }}"
      state: >
        {{ is_state('sensor.pi_hole_status','Disabled')
          and is_state('input_boolean.network_alerts','on')
          and is_state('input_boolean.startup_pending','off') }}
