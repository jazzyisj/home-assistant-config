#######################################################################################################################
## Morning Lights
#######################################################################################################################
morning_lights:
  alias: "Morning Lights"
  description: "Adjust lighting to morning settings."
  icon: mdi:home-lightbulb-outline
  sequence:
    - condition: state
      entity_id:
        - input_boolean.light_automation
        - binary_sensor.nighttime_auto_light
      state: 'on'

    - condition: state
      entity_id: input_boolean.alarm_triggered
      state: 'off'

    - choose: # turn lights on minimum so we can transition up
        - conditions:
            - condition: state
              entity_id: timer.dining_room_light
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.dining_room_rgb_light
              data:
                brightness: 10
                transition: 0

    - choose:
        - conditions:
            - condition: state
              entity_id: timer.living_room_pot_lights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.living_room_pot_lights
              data:
                brightness: 10
                transition: 0

    - choose:
        - conditions:
            - condition: state
              entity_id: timer.kitchen_potlights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.kitchen_potlights
              data:
                brightness: 5
                transition: 0

        - conditions:
            - condition: state
              entity_id: timer.upstairs_hallway_potlights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.upstairs_hallway_potlights
              data:
                brightness: 5
                transition: 0

    - delay: # delay to let lights turn on to min brightness
        seconds: 5

    - choose: # start first lighting stage
        - conditions:
            - condition: state
              entity_id: timer.living_room_pot_lights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.living_room_pot_lights
              data:
                brightness: 20
                transition: 900

        - conditions:
            - condition: state
              entity_id: timer.dining_room_light
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.dining_room_rgb_light
              data:
                brightness: 75
                transition: 900

        - conditions:
            - condition: state
              entity_id: timer.kitchen_potlights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.kitchen_potlights
              data:
                brightness: 60
                transition: 900

    - choose:
        - conditions:
            - condition: state
              entity_id: timer.upstairs_hallway_potlights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.upstairs_hallway_potlights
              data:
                brightness: 60
                transition: 900

    - delay: # delay for transitions before next lighting sequence
        seconds: 900

    - choose:
        - conditions:
            - condition: state
              entity_id: timer.upstairs_bedroom_light
              state: idle
          sequence:
            - service: light.turn_on # turn lights on low so we can transition up
              target:
                entity_id: light.upstairs_bedroom_rgb_light
              data:
                brightness: 5
                transition: 0

            - delay: # delay to allow lights to change state
                seconds: 5

            - service: light.turn_on
              target:
                entity_id: light.upstairs_bedroom_rgb_light
              data:
                brightness: 50
                transition: 600

    - choose:
        - conditions:
            - condition: state
              entity_id: timer.office_potlights
              state: idle
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.office_potlights
              data:
                brightness: 255
                transition: 0

    - service: light.turn_on
      target:
        entity_id: light.kitchen_sink_light

    - delay: # wait for a bit before turning off
        minutes: 15
