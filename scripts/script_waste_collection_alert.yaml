#######################################################################################################################
## Waste Collection Alert
## - do not dismiss on all devices when closed - everyone must see it
#######################################################################################################################
waste_collection_alert:
  alias: "Waste Collection Alert"
  description: "Send waste collection day notification."
  icon: mdi:trash-can
  fields:
    pickup_type:
      description: "Waste type (garbage,recycle,yardwaste)."
      example: 'garbage'
  mode: queued
  sequence:
    # send notifications
    - service: notify.everyone
      data:
        title: "{{ pickup_type }} Day"
        message: "{{ pickup_type }} Day is tomorrow!."
        data:
          actions:
            - action: close_waste_collection_alert
              title: Close
          tag: waste_collection
          timestamp: "{{ as_timestamp(now()) }}" #push
          priority: high
          renotify: false #push
          ttl: 43200
          requireInteraction: false #push
          silent: true #push
          sticky: false #app
          url: /lovelace/schedule #push
          clickAction: /lovelace/schedule #app
          color: !secret NOTIFY_COLOR #app
          icon: !secret WASTE_ICON_TEMPLATE #push
          image: !secret WASTE_IMAGE_TEMPLATE
          badge: !secret WASTE_BADGE_TEMPLATE #push
