#######################################################################################################################
## Disarm Alarm Temp
#######################################################################################################################
disarm_alarm_temp:
  alias: Disarm Alarm Temp
  description: Disarm alarm so it can be rearmed in a different mode.
  icon: mdi:alarm-bell
  mode: single
  sequence:
    - condition: state
      entity_id: alarm_control_panel.house
      state:
        - armed_home
        - armed_night
        - armed_away
        - pending

    # set override to bypass automation check
    - service: input_boolean.turn_on
      entity_id: input_boolean.alarm_temp_override

    # turn off disarmed automation to prevent trigger
    - service: automation.turn_off
      entity_id: automation.alarm_disarmed

    - service: alarm_control_panel.alarm_disarm
      entity_id: alarm_control_panel.house
      data:
        code: !secret ALARM_HASSIO

    - service: automation.turn_on
      entity_id: automation.alarm_disarmed

    - service: input_boolean.turn_off
      entity_id: input_boolean.alarm_temp_override