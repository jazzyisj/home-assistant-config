###############################################################################
## Media Players Resume
###############################################################################
media_players_resume:
  alias: 'Media Players Resume'
  description: 'Resume paused media players.'
  icon: mdi:play-box-multiple-outline
  mode: restart
  fields:
    media_player:
      description: 'Media players to resume'
      example: media_player.dining_room_hub
  variables:
    media_players: >
      {% set media_players = media_players|default(state_attr('group.single_media_players','entity_id')) %}
      {% if not (media_players is iterable and (media_players is not string and media_players is not mapping)) %}
        {% set media_players = [media_players] %}
      {% endif %}
      {{ expand(media_players)|selectattr('state','eq','paused')|map(attribute='entity_id')|list }}
  sequence:
    - condition: template
      value_template: '{{ media_players|count > 0 }}'

    - service: media_player.media_play
      target:
        entity_id: '{{ media_players }}'
