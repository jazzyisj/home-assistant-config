##################################################################################################
## LED Reset
##################################################################################################
led_reset:
  alias: "ZWave LED Reset"
  description: "Clear LED notifications."
  icon: mdi:home-lightbulb-outline
  mode: restart
  variables:
    lights: "{{ state_attr('group.zwave_led_lights','entity_id') }}"
    switches: "{{ state_attr('group.zwave_switch_lights','entity_id') }}"
  sequence:
    - repeat:
        while:
          - condition: template
            value_template: "{{ repeat.index <= lights|count }}"

        sequence:
          - service: zwave.set_config_parameter
            data:
              node_id: "{{ state_attr(lights[repeat.index-1],'node_id')|int }}"
              parameter: "{{ 8 if lights[repeat.index-1] in switches else 16 }}" # switch 8, dimmer 16
              size: 4
              value: 16714241 # clear notification