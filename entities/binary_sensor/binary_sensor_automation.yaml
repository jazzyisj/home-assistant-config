#######################################################################################################################
## Automation Binary Sensors
#######################################################################################################################

- platform: template
  sensors:
#######################################################################################################################
## Startup Complete
## sensor used so we can reverse boolean logic (required to allow startup boolean in glance menus)
#######################################################################################################################
    startup_complete:
      unique_id: startup_complete
      value_template: "{{ is_state('input_boolean.startup_pending','off') }}"

#######################################################################################################################
## Automation Disabled
#######################################################################################################################
    automation_disabled:
      friendly_name: Automation
      unique_id: automation_disabled
      icon_template: mdi:sync-alert
      value_template: "{{ states('group.automation_controls') == 'off' }}"

#######################################################################################################################
## Alert Disabled
#######################################################################################################################
    alert_disabled:
      friendly_name: Alert
      unique_id: alert_disabled
      icon_template: mdi:alert
      value_template: "{{ states.alert|selectattr('state','eq','off')|list|count > 0 }}"

#######################################################################################################################
## Alert Enabled - used in conditions/sensors to prevent tts / mobile app / push alerts
#NOTE all alerts/notifications disabled until startup complete to prevent false triggers
#NOTE  disables alerts in glance menus in lovelace
#######################################################################################################################
    alerts_enabled:
      unique_id: alerts_enabled
      value_template: "{{ is_state('input_boolean.alerts_enabled','on') and is_state('binary_sensor.startup_complete','on') }}"