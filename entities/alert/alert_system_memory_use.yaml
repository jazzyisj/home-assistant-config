#######################################################################################################################
## Alert - Memory Use
#######################################################################################################################
system_memory_use:
  name: "Memory Use"
  title: "Memory Use Alert"
  message: "Memory Use - {{ states('sensor.memory_use_percent') }}%"
  entity_id: binary_sensor.memory_use_alert
  state: 'on'
  repeat: 60
  can_acknowledge: true
  skip_first: false
  notifiers: jason
  data:
    tag: memory_use
    group: System
    channel: Alert
    importance: high
    vibrationPattern: '200, 200, 200, 200, 200, 200, 200'
    ledColor: !secret WARNING_COLOR
    priority: high
    ttl: 0
    timeout: 3600
    persistent: false
    sticky: false
    clickAction: /lovelace/system
    color: !secret WARNING_COLOR
    icon_url: !secret MEMORY_ICON 
    image: !secret MEMORY_IMAGE
    actions:
      - action: reboot_server
        title: Reboot
      - action: pause_memory_use
        title: Pause
      - action: close_memory_use
        title: Close

    # additional parameters for html5 push
    timestamp: "{{ as_timestamp(now()) }}"
    renotify: true
    silent: true
    requireInteraction: false
    url: /lovelace/system
    icon: !secret MEMORY_ICON 
    badge: !secret MEMORY_BADGE 

