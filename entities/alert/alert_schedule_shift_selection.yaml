#######################################################################################################################
## Alert - Shift Selection
#######################################################################################################################
schedule_shift_selection:
  name: "Shift Selection"
  title: "Shift Selection Alert"
  message: >-
    {% if is_state('binary_sensor.google_calendar_connected','off') %} Google Calendar is not connected. {{'\n'}}{% endif %}
    {%- if is_state('input_boolean.shift_override','on') -%} The shift override is on {%- endif -%}
    {{ ', and the' if is_state('input_boolean.shift_override','on') else '\nThe' }} current shift is {{ states('sensor.current_shift') }}.
  entity_id: binary_sensor.shift_selection_alert
  state: 'on'
  repeat: 1440
  can_acknowledge: true
  skip_first: false
  notifiers: jason
  data:
    tag: shift_selection
    group: Alert
    channel: Alert
    importance: high
    vibrationPattern: '200, 200, 200, 200, 200, 200, 200'
    ledColor: !secret WARNING_COLOR
    priority: high
    ttl: 0
    timeout: 1440
    persistent: false
    sticky: false
    clickAction: /lovelace/schedule
    color: !secret WARNING_COLOR
    icon_url: !secret WORK_ICON
    image: !secret WORK_IMAGE
    actions:
      - action: turn_off_shift_override
        title: Override Off
      - action: pause_shift_selection
        title: Pause
      - action: close_shift_selection
        title: Close

    # additional parameters for html5 push
    timestamp: "{{ as_timestamp(now()) }}"
    renotify: true
    silent: true
    requireInteraction: false
    url: /lovelace/schedule
    icon: !secret WORK_ICON
    badge: !secret WORK_BADGE