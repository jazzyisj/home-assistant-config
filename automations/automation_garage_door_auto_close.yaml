#######################################################################################################################
## Garage Door - Auto Close
## - opener automatically closes after 10 min
## - don't override user hold in garage is on so no time based close trigger here
#######################################################################################################################
- id: garage_door_auto_close
  alias: "[Garage Door] Auto Close"
  description: "Automatically close garage door when conditions met."
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: input_select.occupancy_mode
      to:
        - Night
        - Away
        - Vacation
      for:
        seconds: 10

  condition:
    - condition: state
      entity_id:
        - input_boolean.garage_door_automation
        - input_boolean.presence_automation
        - binary_sensor.garage_door_open
      state: 'on'

  action:
    - service: cover.close_cover
      entity_id: cover.garage_door_opener