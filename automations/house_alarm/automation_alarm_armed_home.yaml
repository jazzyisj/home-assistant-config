#######################################################################################################################
## Alarm - Armed Home
#######################################################################################################################
- id: alarm_armed_home
  alias: "[Alarm] Armed Home"
  description: Select home occupancy mode.
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: alarm_control_panel.house
      to: armed_home

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.previous_alarm_state
        option: "{{ trigger.from_state.state }}"

    - choose:
        conditions:
          - condition: state
            entity_id: input_boolean.alarm_auto_arming
            state: 'on'

          - condition: state
            entity_id: input_boolean.alarm_automation
            state: 'on'

        sequence:
          - service: input_select.select_option
            data:
              entity_id: input_select.occupancy_mode
              option: "{{ 'Home' if is_state('binary_sensor.owner_home','on') else 'Guest' }}"