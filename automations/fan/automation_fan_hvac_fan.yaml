###############################################################################
## Fan - HVAC Fan Auto On
###############################################################################
- id: fan_hvac_fan_auto_on
  alias: "[Fan] HVAC Fan Auto On"
  description: "Turn HVAC fan on."
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: binary_sensor.schedule_fan
      to: "on"
      from: "off"
  condition:
    - condition: state
      entity_id:
        - fan.hvac_fan
      state: "off"

    - not:
        - condition: state
          entity_id: input_select.hvac_mode
          state: "off"
  action:
    - service: fan.turn_on
      target:
        entity_id: fan.hvac_fan

###############################################################################
## Fan - HVAC Fan Auto Off
###############################################################################
- id: fan_hvac_fan_auto_off
  alias: "[Fan] HVAC Fan Auto Off"
  description: "Turn HVAC fan off."
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: binary_sensor.schedule_fan
      to: "off"
      from: "on"
  condition:
    - condition: state
      entity_id: fan.hvac_fan
      state: "on"
  action:
    - service: fan.turn_off
      entity_id: fan.hvac_fan
