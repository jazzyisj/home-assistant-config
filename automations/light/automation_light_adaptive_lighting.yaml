###############################################################################
## Light - Adaptive Lighting On
###############################################################################
- id: light_adaptive_lighting_on
  alias: '[Light] Adaptive Lighting On'
  description: 'Turn on adaptive lighting.'
  trigger:
    - platform: state
      entity_id: input_boolean.alarm_triggered
      to: 'off'
      for: 300
  condition:
    - condition: state
      entity_id: input_boolean.light_automation
      state: 'on'
  action:
    - service: switch.turn_on
      target:
        entity_id:
          - switch.adaptive_lighting_bedroom_lights
          - switch.adaptive_lighting_main_lights
          - switch.adaptive_lighting_outside_lights
          - switch.adaptive_lighting_rgb_lights

    - choose:
        - conditions:
            - condition: state
              entity_id: input_select.occupancy_mode
              state: Night
          sequence:
            - delay: 300

            - service: switch.turn_on
              target:
                entity_id:
                  - switch.adaptive_lighting_sleep_mode_bedroom_lights
                  - switch.adaptive_lighting_sleep_mode_main_lights
                  - switch.adaptive_lighting_sleep_mode_rgb_lights

###############################################################################
## Light - Adaptive Lighting Off
###############################################################################
- id: light_adaptive_lighting_off
  alias: '[Light] Adaptive Lighting Off'
  description: 'Turn off adaptive lighting.'
  trigger:
    - platform: state
      entity_id: input_boolean.alarm_triggered
      to: 'on'
  condition:
    - condition: state
      entity_id: input_boolean.light_automation
      state: 'on'
  action:
    - service: switch.turn_off
      target:
        entity_id:
          - switch.adaptive_lighting_bedroom_lights
          - switch.adaptive_lighting_main_lights
          - switch.adaptive_lighting_outside_lights
          - switch.adaptive_lighting_rgb_lights
          - switch.adaptive_lighting_sleep_mode_bedroom_lights
          - switch.adaptive_lighting_sleep_mode_main_lights
          - switch.adaptive_lighting_sleep_mode_rgb_lights
