###############################################################################
## Light - In Use Timer
###############################################################################
- id: light_in_use_timer
  alias: "[Light] In Use Timer"
  description: "Turn in use timer on/off when device state changes."
  mode: parallel
  max: 50
  variables:
    timer: "timer.{{ trigger.entity_id.split('.')[1] }}"
  trigger:
    - platform: state
      entity_id:
        - light.bathroom_vanity_rgb_light
        - light.bathroom_shower_light
        - light.side_entrance_light
      to: ~

    - platform: state
      entity_id:
        - light.back_house_potlights
        - light.back_yard_tree_lights
        - light.bathroom_shower_light
        - light.bedroom_fan_light
        - light.bedroom_potlights
        - light.dining_room_rgb_light
        - light.dining_room_potlights
        - light.front_house_potlights
        - light.front_porch_light
        - light.kitchen_sink_light
        - light.kitchen_potlights
        - light.living_room_cove_light
        - light.living_room_fan_light
        - light.living_room_potlights
        - light.master_bedroom_light
        - light.office_fan_light
        - light.office_potlights
        - light.outside_garage_lights
      to: "off"
  action:
    - if: "{{ is_state(trigger.entity_id,'on') }}"
      then:
        - service: timer.start
          target:
            entity_id: "{{ timer }}"
      else:
        - service: timer.cancel
          target:
            entity_id: "{{ timer }}"
