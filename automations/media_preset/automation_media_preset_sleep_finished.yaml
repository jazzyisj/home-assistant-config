#######################################################################################################################
## Media Preset - Sleep Finished
#######################################################################################################################
- id: media_preset_sleep_finished
  alias: "[Media Preset] Sleep Timer Finished"
  description: Turn off booleans.
  max_exceeded: silent
  trigger:
    - platform: event
      event_type: timer.finished
      event_data:
        entity_id: timer.media_preset_sleep

    - platform: event
      event_type: timer.cancelled
      event_data:
        entity_id: timer.media_preset_sleep

  condition:
    - condition: state
      entity_id:
        - script.media_preset_play
        - script.media_preset_stop
      state: 'off'

  action:
    - service: timer.cancel
      entity_id: timer.media_preset_sleep

    - service: input_boolean.turn_off
      data:
        entity_id: "input_boolean.{{ states('input_select.media_preset_type_sleep')|lower }}"