###############################################################################
## Notify - Alarm LED Notification
###############################################################################
- id: notify_alarm_led_notification
  alias: "[Notify] Alarm LED Notification"
  description: "Set LED notification."
  mode: queued
  trigger:
    - platform: state
      entity_id:
        - input_boolean.alarm_enabled
        - input_boolean.alarm_triggered
        - alert.door_lock_malfunction
        - alert.door_lock_failed
        - alert.alarmo_connected
        - binary_sensor.alarm_zone_sync
        - binary_sensor.alarm_open_sensor_alert
        - binary_sensor.alarm_bypassed_sensor_alert
      to: ~

    - platform: state
      entity_id: alarm_control_panel.master
      to: # triggered = input_boolean.alarm_triggered
        - armed_home
        - armed_night
        - armed_away
        - arming
        - pending
        - disarmed
      for: 2 # avoid triggering on temporary state changes, allow open/bypass sensor to set
  action:
    - service: script.alarm_led
