###############################################################################
## Camera - Indoor Camera Control
###############################################################################
- id: camera_indoor_camera_control
  alias: "[Camera] Indoor Camera Control"
  description: "Turn indoor cameras on and off."
  max_exceeded: silent
  trigger:
    - platform: homeassistant
      event: start

    - platform: state
      entity_id: binary_sensor.wyze_connected
      to:
        - "on"
        - "off"
      not_from:
        - unknown
        - unavailable

    - platform: state
      entity_id: binary_sensor.someone_home
      to:
        - "on"
        - "off"
      not_from:
        - unknown
        - unavailable
  action:
    - if: "{{ is_state('binary_sensor.someone_home','on') }}"
      then:
        - if:
            - condition: state
              entity_id: switch.charlie_crate_camera_power
              state: "on"
          then:
            - service: switch.turn_off
              target:
                entity_id: switch.charlie_crate_camera_power

        - if:
            - condition: state
              entity_id: switch.living_room_camera_power
              state: "on"
          then:
            - service: switch.turn_off
              target:
                entity_id: switch.living_room_camera_power

      else:
        - service: switch.turn_on
          target:
            entity_id:
              - switch.charlie_crate_camera_power
              - switch.living_room_camera_power
