###############################################################################
## Schedule - Start Car Reminder
###############################################################################
- id: schedule_start_car_reminder
  alias: '[Schedule] Start Car Reminder'
  description: 'Play announcement if cold enough to start car before work.'
  max_exceeded: silent
  trigger:
    - platform: state
      entity_id: sensor.leave_home_time_jason
      attribute: car_check
      to: true

    - platform: state
      entity_id: sensor.leave_home_time_sheri
      attribute: car_check
      to: true
  condition:
    - condition: state
      entity_id:
        - binary_sensor.owner_home
        - binary_sensor.work_today
      state: 'on'

    - condition: numeric_state
      entity_id: sensor.outdoor_temperature
      below: 5
  action:
    - service: script.tts_play
      data:
        message: >
          It's only {{ states('sensor.outdoor_temperature')|int(0) }} degrees outside right now.
          Start the car if you don't want to freeze your nuts off on the way to work!
        quiet_play: true
        min_volume: 50
        media_player: media_player.broadcast_speakers
