###############################################################################
## Schedule - Shift Selection Alert
###############################################################################
- id: schedule_shift_selection_alert #OCC
  alias: '[Schedule] Shift Selection Alert'
  description: 'Play announcement when alert turns on.'
  trigger:
    - platform: state
      entity_id: alert.shift_selection
      to: 'on'
  action:
    - service: script.tts_play
      data:
        message: |
          Attention!  The is a problem with your work schedule settings.
          {% if is_state('binary_sensor.google_calendar_connected','off') -%}
            The Google Calendar integration is not connected.
          {% endif -%}
          The work shift is currently set to {{ states('sensor.work_shift_today') }}, and the shift override is {{ states('input_boolean.work_shift_override') }}.
        quiet_play: true
        min_volume: 30
        save_message: true

###############################################################################
## Schedule - Pause Shift Selection Alert
###############################################################################
- id: schedule_pause_shift_selection_alert
  alias: '[Schedule] Pause Shift Selection Alert'
  description: 'Pause alert.'
  max_exceeded: silent
  trigger:
    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: pause_shift_selection
  action:
    - service: alert.turn_off
      target:
        entity_id: alert.shift_selection
