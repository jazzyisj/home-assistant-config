#######################################################################################################################
## Schedule - Leaving Work
#######################################################################################################################
- id: schedule_before_leaving_work
  alias: '[Schedule] Before Leaving Work'
  description: 'Override occupancy mode to preheat/cool house before leaving work.'
  trigger:
    - platform: state
      entity_id: binary_sensor.home_commute_active
      to: 'on'
  condition:
    - condition: state
      entity_id:
        - input_boolean.schedule_automation
        - input_boolean.climate_automation
      state: 'on'

    - condition: state
      entity_id: binary_sensor.someone_home
      state: 'off'

    - condition: not
      conditions:
        - condition: state
          entity_id: input_boolean.hvac_presence_override
          state: 'on'

    - condition: or
      conditions:
        - condition: state
          entity_id: person.jason
          state: Work

        - condition: state
          entity_id: person.sheri
          state: Work
  action:
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.hvac_presence_override
