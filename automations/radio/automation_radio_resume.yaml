#######################################################################################################################
## Radio - Resume
#######################################################################################################################
- id: radio_resume
  alias: "[Radio] Resume"
  description: Restart radio when resumed.
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: input_boolean.radio_pause
      to: 'off'

  condition:
    - condition: template
      value_template: "{{ is_state(states('sensor.radio_media_player'),'paused') }}"

    - condition: state
      entity_id: input_boolean.radio_on
      state: 'on'

    - condition: state
      entity_id:
        - script.radio_play
        - script.radio_stop
      state: 'off'

  action:
    - choose:
        - conditions:
            - !include /config/include/template/radio_tts_active_condition.yaml
            - !include /config/include/template/radio_alarm_clock_active_condition.yaml

          sequence:
            - service: input_boolean.turn_on
              entity_id: input_boolean.radio_pause

            - service: browser_mod.toast
              data:
                message: "Radio cannot be resumed when an announcement or alarm clock is playing on the radio media player!"
                duration: 30000

      default:
        - service: media_player.media_play
          data:
            entity_id: "{{ states('sensor.radio_media_player') }}"