###############################################################################
## Alarm - Arm Night
###############################################################################
- id: alarm_arm_night
  alias: '[Alarm] Arm Night'
  description: 'Arm alarm in night mode.'
  max_exceeded: silent
  variables:
    override: "{{ trigger.event.data['action'] == 'arm_alarm_night_override' }}"
  trigger:
    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: arm_alarm_night

    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: arm_alarm_night_override
  condition:
    - not:
        - condition: state
          entity_id: alarm_control_panel.master
          state: armed_night
  action:
    - service: script.arm_alarm
      data:
        mode: night
        override: '{{ override|default(false) }}'
