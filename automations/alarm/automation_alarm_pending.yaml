###############################################################################
## Alarm - Pending
###############################################################################
- id: alarm_pending
  alias: '[Alarm] Pending'
  description: 'Display notification.'
  trigger:
    - platform: state
      entity_id: alarm_control_panel.master
      to: pending
  action:
    - service: input_boolean.turn_on
      entity_id: input_boolean.alarm_pending

    - wait_template: "{{ not is_state('alarm_control_panel.master','pending') }}"

    - delay: 2 # allow alarm_triggered to turn on

    - choose:
        - conditions: "{{ is_state('alarm_control_panel.master','triggered') }}"
          sequence:
            - wait_template: "{{ is_state('input_boolean.alarm_triggered','off') }}"

    - service: input_boolean.turn_off
      entity_id: input_boolean.alarm_pending
