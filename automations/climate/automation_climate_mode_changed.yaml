#######################################################################################################################
## Climate - Mode Changed
#######################################################################################################################
- id: climate_mode_changed
  alias: '[Climate] Mode Changed'
  description: 'Update stored HVAC mode when climate mode is manually changed.'
  mode: restart
  trigger:
    - platform: state
      entity_id: climate.thermostat
      to:
        - heat
        - cool
        - heat_cool
        - fan_only
        - 'off'
  condition:
    - condition: template
      alias: 'State is not already equal to the input select state'
      value_template: "{{ not is_state('input_select.set_hvac_mode', trigger.to_state.state) }}"

    - condition: state
      entity_id: alert.hvac_window_door_open
      state: 'off'
  action:
    - service: input_select.select_option
      target:
        entity_id: input_select.set_hvac_mode
      data:
        option: "{{ states('climate.thermostat') }}"
