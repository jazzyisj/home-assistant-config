#######################################################################################################################
## Alarm Clock - Alarm Clock Play Failed Notifications Closed
#######################################################################################################################
- id: alarm_clock_play_failed_notifications_closed
  alias: "[Alarm Clock] Play Failed Notifications Closed"
  description: "Dismiss notifications on all devices."
  initial_state: true
  mode: single
  max_exceeded: silent
  trigger:
    - platform: event
      event_type: html5_notification.closed
      event_data:
        tag: alarm_clock_play_failed

    - platform: event
      event_type: mobile_app_notification_cleared
      event_data:
        tag: alarm_clock_play_failed

  action:
    - service: script.close_notifications
      data:
        target: mobile_app_jphone
        tag: alarm_clock_play_failed

    - delay:
        seconds: 180 # prevent recursive triggers