#######################################################################################################################
## Spotify - Media Player Changed
#NOTE - used in sensor.spotify_media_player as a cache value when spotify turns off for script.spotify_stop
#######################################################################################################################
- id: spotify_media_player_changed
  alias: "[Spotify] Media Player Changed"
  description: Store spotify media player entity id.
  initial_state: true
  mode: restart
  trigger:
    - platform: state
      entity_id: sensor.spotify_media_player

  condition:
    # prevents input_text from being cleared when spotify turns off
    - "{{ states('sensor.spotify_media_player') != '' }}"

  action:
    - service: input_text.set_value
      data:
        entity_id: input_text.active_media_player_spotify
        value: "{{ states('sensor.spotify_media_player') }}"