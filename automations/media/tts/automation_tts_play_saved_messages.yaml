###############################################################################
## TTS - Play Saved Messages
###############################################################################
- id: tts_play_saved_messages
  alias: "[TTS] Play Saved Messages"
  description: "Play saved TTS messages."
  trigger:
    - platform: state
      entity_id:
        - input_boolean.alarm_triggered
        - switch.system_mute
        - binary_sensor.scene_active
      to: "off"
      not_from:
        - unknown
        - unavailable
      for:
        minutes: 1
  condition:
    - condition: numeric_state
      entity_id: variable.tts_saved_messages
      above: 0

    - condition: state
      entity_id: binary_sensor.someone_home
      state: "on"
  action:
    - service: script.turn_on
      entity_id: script.tts_play_saved_messages
