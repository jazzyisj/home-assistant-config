#######################################################################################################################
## Spotify - Store Playlist Selection
#######################################################################################################################
- id: spotify_store_playlist_selection
  alias: "[Spotify] Store Playlist Selection"
  description: "Update stored spotify playlist selection."
  mode: queued
  max: 25
  max_exceeded: error
  variables:
    entity: "{{ 'input_select.spotify_playlist_' ~ trigger.entity_id|replace('media_player.spotify_','') }}"
    playlist: "{{ state_attr(trigger.entity_id,'media_playlist') }}"
  trigger:
    - platform: state
      entity_id:
        - input_select.spotify_playlist
        - input_select.spotify_jason_playlist
        - input_select.spotify_sheri_playlist
        - input_select.media_preset_spotify_wake
        - input_select.media_preset_spotify_morning
        - input_select.media_preset_spotify_sleep
        - input_select.media_preset_spotify_guest
        - input_select.media_preset_spotify_shower
        - input_select.media_preset_spotify_chill
        - input_select.media_preset_spotify_company
        - input_select.alarm_clock_spotify_auto
        - input_select.alarm_clock_spotify_manual
        - input_select.alarm_clock_spotify_nap
        - input_select.media_preset_spotify_jason
        - input_select.media_preset_spotify_sheri
  condition:
    - condition: state
      entity_id:
        - binary_sensor.wan_connected
        - binary_sensor.spotify_connected
      state: 'on'
  action:
    - service: input_text.set_value
      target:
        entity_id: "{{ trigger.entity_id|replace('input_select','input_text') }}"
      data:
        value: "{{ states(trigger.entity_id) }}"