###############################################################################
## Spotify - Play Error
###############################################################################
- id: spotify_play_error #SPOTIFY other spotify errors
  alias: '[Spotify] Play Error'
  description: 'Notify on Spotify play error.'
  mode: queued
  variables:
    name: '{{ trigger.event.data.name }}'
    msg: '{{ trigger.event.data.message }}'
    spotify_play_error: >
      {% if 'spotify-card' in msg[0] and 'No device available for playback' in msg[0] %} No device available for playback.
      {% elif name == 'custom_components.spotcast.helpers' and "Specified id doesn't exist" in msg[0] %} Specified playlist/category id doesn't exist.
      {% else %} {{ none }}
      {% endif %}
  trigger:
    - platform: event
      event_type: system_log_event
      event_data:
        level: ERROR
  condition: '{{ spotify_play_error != none }}'
  action:
    - service: browser_mod.toast
      data:
        duration: 30000
        message: 'Spotcast: {{ spotify_play_error }}'
