###############################################################################
## Lock - Set Alarm Mode
###############################################################################
- id: lock_set_garage_alarm_mode
  alias: "[Lock] Set Garage Alarm Mode"
  description: "Set door locks alarm mode."
  mode: restart
  trigger:
    - platform: state
      entity_id: alarm_control_panel.garage
      to:
        - armed_home
        - armed_night
        - armed_away
        - disarmed
  condition:
    - condition: template
      value_template: "{{ has_value('lock.garage_door_lock') }}"
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: alarm_control_panel.garage
              state: disarmed
          sequence:
            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_mode
              data:
                option: Alarm Off

        - conditions:
            - condition: state
              entity_id: alarm_control_panel.garage
              state: armed_home
          sequence:
            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_mode
              data:
                option: Alert

            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_alert_sensitivity
              data:
                option: Less Sensitive

        - conditions:
            - condition: state
              entity_id: alarm_control_panel.garage
              state: armed_night
          sequence:
            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_mode
              data:
                option: Forced Entry

            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_kick_sensitivity
              data:
                option: Most Sensitive

        - conditions:
            - condition: state
              entity_id: alarm_control_panel.garage
              state: armed_away
          sequence:
            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_mode
              data:
                option: Forced Entry

            - service: select.select_option
              target:
                entity_id: select.garage_door_lock_alarm_kick_sensitivity
              data:
                option: Most Sensitive
