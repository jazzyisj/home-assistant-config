###############################################################################
## Lock - Reset
###############################################################################
- id: lock_reset
  alias: "[Lock] Reset"
  description: "Reset lock alert sensors."
  triggers:
    - platform: state
      id: alarm
      entity_id: input_boolean.alarm_triggered
      to: "off"
      not_from:
        - unknown
        - unavailable

    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: reset_intrusion_locks

    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: reset_jammed_locks

    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: reset_failed_locks

    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: reset_keypad_disabled_locks
  actions:
    - if: "{{ trigger.id == 'alarm' }}"
      then:
        - action: script.reset_intrusion_locks
      else:
        - action: "script.{{ trigger.event.data['action'] }}"
