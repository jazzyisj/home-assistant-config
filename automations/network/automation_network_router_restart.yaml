###############################################################################
## Network - Router Restart #TEMP until fixed - reload integration here
## #ISSUE Asus Router integration doesn't always load
###############################################################################
- id: network_router_restart
  alias: "[Network] Router Restart"
  description: "Restart router if failed to load."
  trigger:
    - platform: state
      entity_id: input_boolean.startup_pending
      to: "off"
      from: "on"
      for:
        minutes: 5

    - platform: state
      entity_id: sensor.rt_ax58u_epa_boot_time
      to:
        - unknown
        - unavailable
  condition:
    - condition: state
      entity_id: sensor.rt_ax58u_epa_boot_time
      match: any
      state:
        - unknown
        - unavailable
  action:
    - service: homeassistant.reload_config_entry
      target:
        entity_id: sensor.rt_ax58u_epa_boot_time
