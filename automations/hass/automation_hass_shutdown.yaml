#######################################################################################################################
## Hass - Shutdown
#######################################################################################################################
- id: hass_shutdown
  alias: "[Hass] Shutdown"
  description: Display message on home assistant stop.
  initial_state: true
  mode: single
  trigger:
    - platform: homeassistant
      event: shutdown

  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.supplemental_logging
              state: 'on'

          sequence:
            #TIMER fan, radio, alarm clock timers
              # store time_end attribute in variable
              # on restart  if time_end then now - time
              # if 0 or negative fire timer finished event
              # if not, reset timer for time remaining

              # https://community.home-assistant.io/t/how-to-make-active-timers-survive-a-restart/146248/38

            - service: system_log.write
              data:
                message: "**** HOME ASSISTANT STOP ****"
                level: critical