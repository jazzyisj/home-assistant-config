###############################################################################
## Atmospheric Conditions Subview
###############################################################################
title: "Atmospheric Conditions"
path: atmospheric-conditions
type: sections
subview: true
max_columns: 4
dense_section_placement: true
sections:
  - type: grid
    cards:
      - type: grid
        columns: 3
        square: false
        cards:
          - !include /config/ui/gauge/barometric_pressure.yaml
          - !include /config/ui/gauge/cloud_cover.yaml

          - type: conditional
            conditions:
              - condition: state
                entity: sensor.uv_index
                state_not:
                  - unknown
                  - unavailable
            card: !include /config/ui/gauge/uv_risk.yaml

      - type: entities
        state_color: true
        show_header_toggle: false
        entities: !include /config/ui/card/weather/include/barometric_pressure_entities.yaml

      - type: entities
        state_color: true
        show_header_toggle: false
        entities: !include /config/ui/card/weather/include/outdoor_humidity_entities.yaml

      - type: entities
        state_color: true
        show_header_toggle: false
        entities: !include /config/ui/card/weather/include/cloud_entities.yaml

      - type: entities
        state_color: true
        show_header_toggle: false
        entities: !include /config/ui/card/weather/include/uv_entities.yaml

      - type: grid
        columns: 2
        square: false
        cards:
          - type: statistic
            entity: sensor.barometric_pressure
            name: "Pressure Avg"
            stat_type: mean
            period:
              fixed_period:

          - type: statistic
            entity: sensor.outdoor_humidity
            name: "Humidity Avg"
            stat_type: mean
            period:
              fixed_period:

          - type: statistic
            entity: sensor.cloud_coverage
            name: "Cloud Avg"
            stat_type: mean
            period:
              fixed_period:

          - type: statistic
            entity: sensor.uv_index_today
            name: "UV Index Avg"
            stat_type: mean
            period:
              fixed_period:

  - type: grid
    column_span: 3
    cards:
      - type: vertical-stack
        grid_options:
          columns: full
        cards:
          - !include /config/ui/graph/weather/atmospheric_conditions_detail.yaml

      - type: grid
        columns: 2
        square: false
        grid_options:
          columns: full
        cards:
          - !include /config/ui/statistics_graph/outdoor_humidity.yaml
          - !include /config/ui/statistics_graph/barometric_pressure.yaml
          - !include /config/ui/statistics_graph/cloud_cover.yaml
          - !include /config/ui/statistics_graph/uv_index.yaml