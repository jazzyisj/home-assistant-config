###################################################################################################
## Media Preset Sleep
###################################################################################################
type: vertical-stack
cards:
  - type: heading
    icon: mdi:speaker
    heading: "Sleep Media Preset"
    heading_style: subtitle

  - type: custom:vertical-stack-in-card
    cards:
      - type: tile
        entity: input_select.media_type_sleep
        name: "Media Type"
        vertical: false
        hide_state: true
        features_position: inline
        features:
          - type: select-options
        card_mod:
          style: |
            ha-card {
              border: none !important;
            }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Artist
        card:
          type: tile
          entity: select.media_artist_sleep
          name: "Artist"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Album
        card:
          type: tile
          entity: select.media_album_sleep
          name: "Album"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Playlist
        card:
          type: tile
          entity: select.media_playlist_sleep
          name: "Playlist"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Radio
        card:
          type: tile
          entity: select.media_radio_sleep
          name: "Radio"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Track
        card:
          type: tile
          entity: select.media_track_sleep
          name: "Track"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Video
        card:
          type: tile
          entity: select.media_video_sleep
          name: "Video"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state_not: Video
        card:
          type: tile
          entity: select.media_speaker_sleep
          name: "Speaker"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: conditional
        conditions:
          - condition: state
            entity: input_select.media_type_sleep
            state: Video
        card:
          type: tile
          entity: select.media_video_display_sleep
          name: "Video Display"
          vertical: false
          hide_state: true
          features_position: inline
          features:
            - type: select-options
          card_mod:
            style: |
              ha-card {
                border: none !important;
              }

      - type: tile
        entity: input_number.media_volume_sleep
        name: "Volume"
        hide_state: true
        features_position: inline
        features:
          - type: custom:service-call
            entries:
              - type: slider
                entity_id: input_number.media_volume_sleep
                range:
                  - 0
                  - 100
                tap_action:
                  action: perform-action
                  perform_action: input_number.set_value
                  data:
                    value: "{{ value | float }}"
                  target:
                    entity_id: input_number.media_volume_sleep
                step: 1
        tap_action:
          action: more-info
        icon_tap_action:
          action: more-info
        card_mod:
          style: |
            ha-card {
              border: none !important;
            }

      - type: grid
        columns: 2
        square: false
        cards:
          - type: tile
            entity: input_boolean.media_preset_options
            name: "Options"
            icon: mdi:cog
            hide_state: true
            color: rgb(180, 180, 180)
            tap_action:
              action: perform-action
              perform_action: input_boolean.toggle
              target:
                entity_id: input_boolean.media_preset_options
            icon_tap_action:
              action: none

          - type: tile
            entity: script.media_play
            name: "Play"
            icon: mdi:play-circle
            hide_state: true
            tap_action:
              action: perform-action
              perform_action: script.media_play
              data:
                preset: sleep
            double_tap_action:
              action: none
            hold_action:
              action: none
            icon_tap_action:
              action: perform-action
              perform_action: script.media_play
              data:
                preset: sleep
            card_mod:
              style: |
                ha-card {
                  border: none !important;
                }
                ha-tile-icon {
                  --tile-color: var(--entity-ok-color) !important;
                }

      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.media_preset_options
            state: "on"
        card: !include /config/ui/card/media/preset/media_preset_sleep_options.yaml
    card_mod:
      style: |
        ha-card {
          padding: 10px;
        }
