#######################################################################
## Office TV
#######################################################################
type: custom:state-switch
entity: template
template: >
  {% from 'media_player.jinja' import player_status %}
  {{ player_status('media_player.office_tv') }}
default: media_off
states:
  media_on:
    type: &type custom:mini-media-player
    entity: &entity media_player.office_tv
    name: &name "Office TV"
    icon: &icon mdi:television-play
    group: &group true
    hide: !include /config/ui/card/media/media_player/media_players/include/mini_player_on_hide_config.yaml
    artwork: &artwork_on material
    source: &source_on full
    sound_mode: &sound_mode full
    info: &info scroll
    volume_stateless: &vol_state true
    toggle_power: &toggle false
    min_volume: &min_vol 100
    max_volume: &max_vol 0
    idle_view: &idle when_standby #ISSUE doesn't change when idle
    tap_action: &tap #ISSUE hold/double_tap doesn't work (for remote/more-info )
      action: fire-dom-event
      browser_mod:
        service: browser_mod.popup
        data:
          content: !include /config/ui/card/media/media_player/office_tv_remote.yaml
          timeout: 100000
          card_mod:
            style:
              ha-dialog$: |
                div.mdc-dialog__scrim {
                  backdrop-filter: grayscale(100%) brightness(25%) !important;
                  -webkit-backdrop-filter: grayscale(100%) brightness(25%) !important;
                }
                div.mdc-dialog__surface {
                  background: transparent !important;
                }
          style: |
            --popup-min-width: 200px;
            --popup-max-width: 300px;
            --popup-border-radius: 25px;

  media_off:
    type: *type
    entity: *entity
    name: *name
    icon: *icon
    group: *group
    hide:
      name: false
      icon: false
      info: true
      power: false
      source: true
      sound_mode: true
      controls: true
      prev: true
      next: true
      play_pause: true
      play_stop: true
      volume: true
      volume_level: true
      mute: true
      progress: true
      runtime: true
      artwork_border: true
      power_state: true
      icon_state: true
      shuffle: true
      state_label: true
    artwork: *artwork_on
    source: icon
    sound_mode: icon
    info: *info
    volume_stateless: *vol_state
    toggle_power: *toggle
    min_volume: *min_vol
    max_volume: *max_vol
    idle_view: *idle
    tap_action: *tap
