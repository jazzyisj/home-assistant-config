###############################################################################
## Work Commute
###############################################################################
type: vertical-stack
cards:
  - type: conditional
    conditions:
      - condition: state
        entity: alert.late_for_work_jason
        state: "on"
    card:
      type: tile
      entity: alert.late_for_work_jason
      name: "Jason - Late for Work!"
      hold_action:
        action: perform-action
        perform_action: alert.turn_off
        target:
          entity_id: alert.late_for_work_jason
      card_mod:
        style: |
          ha-card {
            background: red;
          }

  - type: grid
    columns: 3
    square: false
    cards:
      - type: tile
        entity: sensor.leave_home_time
        name: "Leave"
        icon: mdi:home
        state_content: 12hour
        tap_action:
          action: navigate
          navigation_path: traffic
        double_tap_action:
          action: more-info
        hold_action:
          action: perform-action
          perform_action: alert.turn_off
          target:
            entity_id: alert.work_commute_jason

      - type: tile
        entity: sensor.jason_time_to_work
        name: "Time"
        icon: mdi:clock
        tap_action:
          action: perform-action
          perform_action: script.update_traffic_sensors

      - type: tile
        entity: sensor.arrive_work_time
        name: "Arrive"
        icon: mdi:factory
        state_content: 12hour
        tap_action:
          action: navigate
          navigation_path: traffic
        double_tap_action:
          action: more-info
        hold_action:
          action: perform-action
          perform_action: alert.turn_off
          target:
            entity_id: alert.work_commute_jason

  - type: conditional
    conditions:
      - condition: state
        entity: person.jason
        state_not: Work

      - alias: "Only display if app is active"
        condition: state
        entity: sensor.jphone_app_importance
        state: foreground
    card:
      type: entities
      entities:
        - type: button
          entity: button.directions_to_work
          name: "Directions To Work"
          icon: mdi:car-multiple
          action_name: "VIEW"
          tap_action:
            action: perform-action
            perform_action: button.press
            target:
              entity_id: button.directions_to_work
