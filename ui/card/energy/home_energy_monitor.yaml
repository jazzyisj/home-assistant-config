###############################################################################
## Energy Monitor
###############################################################################
type: entities
title: "Energy Monitor"
icon: mdi:lightning-bolt-circle
show_header_toggle: false
state_color: true
entities:
  - type: custom:hui-element
    card_type: grid
    square: false
    columns: 2
    cards:
      - type: custom:vertical-stack-in-card
        cards:
          - !include /config/ui/gauge/power_usage.yaml
          - !include /config/ui/button/energy/energy_tariff.yaml
        card_mod:
          class: sub_card

      - !include /config/ui/graph/energy/power_usage.yaml

  - type: custom:fold-entity-row
    head:
      entity: sensor.daily_energy_consumption_kwh
      name: "Energy Consumption - Today"
    entities:
      - entity: sensor.daily_energy_consumption_off_peak
      - entity: sensor.daily_energy_consumption_mid_peak
      - entity: sensor.daily_energy_consumption_on_peak

  - type: custom:fold-entity-row
    head:
      entity: sensor.monthly_energy_consumption_kwh
      name: "Energy Consumption - Month"
    entities:
      - entity: sensor.monthly_energy_consumption_off_peak
      - entity: sensor.monthly_energy_consumption_mid_peak
      - entity: sensor.monthly_energy_consumption_on_peak

  - entity: sensor.daily_water_consumption

  - type: custom:auto-entities
    filter:
      template: "{{ states.alert | selectattr('attributes.category', 'eq', 'energy') | map(attribute='entity_id') | list }}"
    sort:
      method: name
      ignore_case: true
    card:
      type: custom:fold-entity-row
      padding: 5
      head:
        entity: input_boolean.energy_alerts
        state_color: true
        card_mod:
          style: |
            {% from 'style.jinja' import alert_switch %}
            {{ alert_switch('input_boolean.energy_alerts') }}

  - type: button
    icon: mdi:devices
    name: "Energy Meter Device"
    action_name: "VIEW"
    tap_action:
      action: navigate
      navigation_path: /config/devices/device/a5364d8d9a10ca8a4459fc184b7812a6
card_mod:
  class: basic
