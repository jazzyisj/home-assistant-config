###############################################################################
## Lock Entities Glance
###############################################################################
type: custom:vertical-stack-in-card
cards:
  - type: glance
    show_state: true
    state_color: true
    columns: 4
    entities:
      - entity: lock.front_door_lock
        name: "Front"
        double_tap_action:
          action: call-service
          service: lock.lock
          service_data:
            entity_id: lock.front_door_lock
        hold_action:
          action: call-service
          service: lock.unlock
          service_data:
            entity_id: lock.front_door_lock
        card_mod:
          style: |
            :host {
              --state-lock-unlocked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.front_door_lock_malfunction','on')
                      or is_state('binary_sensor.front_door_lock_hardware_failure','on')
                  else 'var(--state-active-color)' }};
              --state-lock-locked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.front_door_lock_malfunction','on')
                      or is_state('binary_sensor.front_door_lock_hardware_failure','on')
                  else 'var(--state-icon-color)' }};
            }

      - entity: lock.side_door_lock
        name: "Side"
        double_tap_action:
          action: call-service
          service: lock.lock
          service_data:
            entity_id: lock.side_door_lock
        hold_action:
          action: call-service
          service: lock.unlock
          service_data:
            entity_id: lock.side_door_lock
        card_mod:
          style: |
            :host {
              --state-lock-unlocked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.side_door_lock_malfunction','on')
                      or is_state('binary_sensor.side_door_lock_hardware_failure','on')
                  else 'var(--state-active-color)' }};
              --state-lock-locked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.side_door_lock_malfunction','on')
                      or is_state('binary_sensor.side_door_lock_hardware_failure','on')
                  else 'var(--state-icon-color)' }};
            }

      - entity: lock.back_door_lock
        name: "Back"
        double_tap_action:
          action: call-service
          service: lock.lock
          service_data:
            entity_id: lock.back_door_lock
        hold_action:
          action: call-service
          service: lock.unlock
          service_data:
            entity_id: lock.back_door_lock
        card_mod:
          style: |
            :host {
              --state-lock-unlocked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.back_door_lock_malfunction','on')
                      or is_state('binary_sensor.back_door_lock_hardware_failure','on')
                  else 'var(--state-active-color)' }};
              --state-lock-locked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.back_door_lock_malfunction','on')
                      or is_state('binary_sensor.back_door_lock_hardware_failure','on')
                  else 'var(--state-icon-color)' }};
            }

      - entity: lock.garage_door_lock
        name: "Garage"
        double_tap_action:
          action: call-service
          service: lock.lock
          service_data:
            entity_id: lock.garage_door_lock.lock
        hold_action:
          action: call-service
          service: lock.unlock
          service_data:
            entity_id: lock.garage_door_lock.lock
        card_mod:
          style: |
            :host {
              --state-lock-unlocked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.garage_door_lock_malfunction','on')
                      or is_state('binary_sensor.garage_door_lock_hardware_failure','on')
                  else 'var(--state-active-color)' }};
              --state-lock-locked-color:
                {{ 'var(--entity-critical-color)' if is_state('input_boolean.garage_door_lock_malfunction','on')
                      or is_state('binary_sensor.garage_door_lock_hardware_failure','on')
                  else 'var(--state-icon-color)' }};
            }
    card_mod:
      class: sub_card

  - type: custom:swipe-card
    start_card: 1
    reset_after: 120
    parameters: !include /config/ui/swipe_parameters_auto_height.yaml
    cards:
      - !include /config/ui/card/lock/front_door_lock.yaml
      - !include /config/ui/card/lock/side_door_lock.yaml
      - !include /config/ui/card/lock/garage_door_lock.yaml
      - !include /config/ui/card/lock/back_door_lock.yaml

  - type: entities
    entities:
      - type: buttons
        entities:
          - entity: script.lock_door_locks
            name: "Lock All"
            tap_action:
              action: call-service
              service: script.lock_door_locks

          - entity: script.unlock_door_locks
            name: "Unlock All"
            tap_action:
              action: call-service
              service: script.unlock_door_locks
        card_mod:
          style:
            hui-buttons-base $: |
              .ha-scrollbar {
                justify-content: center;
              }
    card_mod:
      class: sub_card
card_mod:
  class: popup
