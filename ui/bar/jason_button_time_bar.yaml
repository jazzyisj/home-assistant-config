###############################################################################
## Jason Time To Home Bar Card
###############################################################################
type: custom:state-switch
entity: template
transition: slide-left
transition_time: 400
template: >
  {% if is_state('binary_sensor.home_commute_active','on')
      and is_state('calendar.work_vacation_jason','off') %} home_commute
  {% elif is_state('binary_sensor.work_commute_active','on')
      and is_state('calendar.work_vacation_jason','off') %} work_commute
  {% else %} false
  {% endif %}
states:
  home_commute:
    type: custom:bar-card
    entity: sensor.jason_time_to_home
    name: "Home"
    animation:
      - state: "on"
      - speed: 5
    decimal: 0
    direction: right
    height: 10px
    positions:
      icon: "off"
      indicator: "off"
      name: "off"
      minmax: "off"
      value: "inside"
    target: 10
    unit_of_measurement: "min"
    width: 90%
    severity: !include /config/ui/bar/include/work_commute_bar_color.yaml
    tap_action: #ISSUE double, hold doesn't work, fire-dom-event doesn't work
      action: call-service
      service: script.update_traffic_sensors
    card_mod:
      class: bar_sub_card
  work_commute:
    type: custom:bar-card
    entity: sensor.jason_time_to_work
    name: "Work"
    animation:
      - state: "on"
      - speed: 5
    decimal: 0
    direction: right
    height: 15px
    positions:
      icon: "off"
      indicator: "off"
      name: "off"
      minmax: "off"
      value: "inside"
    target: 10
    unit_of_measurement: "min"
    width: 90%
    severity: !include /config/ui/bar/include/work_commute_bar_color.yaml
    tap_action:
      action: call-service
      service: script.update_traffic_sensors
    card_mod:
      class: bar_sub_card
