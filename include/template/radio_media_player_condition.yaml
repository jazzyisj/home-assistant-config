# radio is on and the trigger entity is the current radio media player or in radio speaker group
# false if script.radio_play on so no triggers when media players turn on/off
# startup stops trigger during restart/shutdown when players go offline
condition: template
value_template: >
  {% set radio = states('sensor.radio_media_player') %}
  {% if is_state('binary_sensor.radio_on','off') or is_state('binary_sensor.startup_complete','off') %} false
  {% elif radio in state_attr('group.google_speaker_groups','entity_id') %}
    {% set found = namespace(value=0) %}
    {% for radio_player in state_attr('group.' ~ radio.split('.')[1],'entity_id') %}
      {% if trigger.entity_id == radio_player %}{% set found.value = 1 %}{% endif %}
    {% endfor %}
    {{ found.value|int == 1 }}
  {% else %}{{ trigger.entity_id == radio }}
  {% endif %}