#######################################################################################################################
## Home Assistant Configuration (configuration.yaml)
## https://www.home-assistant.io/docs/configuration/
## https://www.home-assistant.io/integrations/default_config/
#######################################################################################################################
homeassistant:
  customize: !include customize.yaml
  packages: !include_dir_named packages
  media_dirs:
    images: www/images
    alarm_snapshos: www/alarm_snapshots
    alarm_clock_sounds: www/alarm_clock_sounds
  allowlist_external_dirs:
    - /config/tts # req for tts folder sensor
    - /config # req for log file size sensor
  allowlist_external_urls:
    - https://www.home-assistant.io #ISSUE Failed to cast media https://www.home-assistant.io/images/cast/splash.png. DIDN"T WORK!
    - https://cast.netflix.com # netflix
    - https://i.ytimg.com #YOUTUBE
    - https://i.scdn.co #SPOTIFY
    - https://lh3.googleusercontent.com #YOUTUBE
    - https://media.live365.com #RADIO
    - https://rr2---sn-honp-t9bl.googlevideo.com #YOUTUBE
    - !secret BASE_URL_NABUCASA
  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        #NOTE - 127.0.0.1 prevents remoteUI!
        - !secret JLAPTOP_IP
        - !secret JLAPTOP_WIFI_IP
        - !secret JPHONE_IP
        - !secret SPHONE_IP

# http: #ISSUE keeps banning me
#   ip_ban_enabled: true
#   login_attempts_threshold: 10

default_config:
automation: !include automations.yaml
automation dir: !include_dir_merge_list automations
frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /hacsfiles/lovelace-card-mod/card-mod.js
system_log:
  max_entries: 100
  fire_event: true
history: !include logging/history.yaml
logbook: !include logging/logbook.yaml
recorder: !include logging/recorder.yaml
scene: !include scenes.yaml
scene dir: !include_dir_merge_list scenes
script: !include_dir_merge_named scripts
template: !include_dir_merge_list templates
logger: !include logging/logger.yaml
lovelace: !include /config/lovelace/lovelace_config.yaml

#######################################################################################################################
### CUSTOM INTEGRATIONS ###
#######################################################################################################################
browser_mod: !include browser_mod.yaml

streaming_radio_player:

sensor:
  - platform: streaming_radio_player

panel_custom:
  - name: panel-redirect
    url_path: redirect-server-controls
    sidebar_title: Server Controls
    sidebar_icon: mdi:server
    module_url: /local/panel-redirect.js
    config:
      target: /config/server_control
  - name: panel-redirect
    url_path: redirect-logs
    sidebar_title: Logs
    sidebar_icon: mdi:math-log
    module_url: /local/panel-redirect.js
    config:
      target: /config/logs
  - name: panel-redirect
    url_path: redirect-supervisor
    sidebar_title: Supervisor
    sidebar_icon: mdi:home-assistant
    module_url: /local/panel-redirect.js
    config:
      target: /hassio/dashboard
